(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fh={exports:{}},So={},Lh={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),Ox=Symbol.for("react.portal"),Dx=Symbol.for("react.fragment"),Fx=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),Mx=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),zx=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),$x=Symbol.for("react.memo"),Vx=Symbol.for("react.lazy"),ef=Symbol.iterator;function Wx(t){return t===null||typeof t!="object"?null:(t=ef&&t[ef]||t["@@iterator"],typeof t=="function"?t:null)}var Mh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bh=Object.assign,zh={};function Bn(t,e,r){this.props=t,this.context=e,this.refs=zh,this.updater=r||Mh}Bn.prototype.isReactComponent={};Bn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uh(){}Uh.prototype=Bn.prototype;function Ru(t,e,r){this.props=t,this.context=e,this.refs=zh,this.updater=r||Mh}var Ou=Ru.prototype=new Uh;Ou.constructor=Ru;Bh(Ou,Bn.prototype);Ou.isPureReactComponent=!0;var tf=Array.isArray,$h=Object.prototype.hasOwnProperty,Du={current:null},Vh={key:!0,ref:!0,__self:!0,__source:!0};function Wh(t,e,r){var n,a={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$h.call(e,n)&&!Vh.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ba,type:t,key:i,ref:o,props:a,_owner:Du.current}}function Hx(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function Gx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var rf=/\/+/g;function Zo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gx(""+t.key):e.toString(36)}function Ci(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ba:case Ox:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+Zo(o,0):n,tf(a)?(r="",t!=null&&(r=t.replace(rf,"$&/")+"/"),Ci(a,e,r,"",function(u){return u})):a!=null&&(Fu(a)&&(a=Hx(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(rf,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",tf(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Zo(i,l);o+=Ci(i,e,r,c,a)}else if(c=Wx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Zo(i,l++),o+=Ci(i,e,r,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xa(t,e,r){if(t==null)return t;var n=[],a=0;return Ci(t,n,"","",function(i){return e.call(r,i,a++)}),n}function qx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},_i={transition:null},Kx={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:_i,ReactCurrentOwner:Du};function Hh(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Xa,forEach:function(t,e,r){Xa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Xa(t,function(){e++}),e},toArray:function(t){return Xa(t,function(e){return e})||[]},only:function(t){if(!Fu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Bn;ke.Fragment=Dx;ke.Profiler=Lx;ke.PureComponent=Ru;ke.StrictMode=Fx;ke.Suspense=Ux;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;ke.act=Hh;ke.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Bh({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Du.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$h.call(e,c)&&!Vh.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ba,type:t.type,key:a,ref:i,props:n,_owner:o}};ke.createContext=function(t){return t={$$typeof:Bx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mx,_context:t},t.Consumer=t};ke.createElement=Wh;ke.createFactory=function(t){var e=Wh.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:zx,render:t}};ke.isValidElement=Fu;ke.lazy=function(t){return{$$typeof:Vx,_payload:{_status:-1,_result:t},_init:qx}};ke.memo=function(t,e){return{$$typeof:$x,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=_i.transition;_i.transition={};try{t()}finally{_i.transition=e}};ke.unstable_act=Hh;ke.useCallback=function(t,e){return St.current.useCallback(t,e)};ke.useContext=function(t){return St.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ke.useEffect=function(t,e){return St.current.useEffect(t,e)};ke.useId=function(){return St.current.useId()};ke.useImperativeHandle=function(t,e,r){return St.current.useImperativeHandle(t,e,r)};ke.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return St.current.useMemo(t,e)};ke.useReducer=function(t,e,r){return St.current.useReducer(t,e,r)};ke.useRef=function(t){return St.current.useRef(t)};ke.useState=function(t){return St.current.useState(t)};ke.useSyncExternalStore=function(t,e,r){return St.current.useSyncExternalStore(t,e,r)};ke.useTransition=function(){return St.current.useTransition()};ke.version="18.3.1";Lh.exports=ke;var Q=Lh.exports;const Zt=Rx(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=Q,Xx=Symbol.for("react.element"),Qx=Symbol.for("react.fragment"),Jx=Object.prototype.hasOwnProperty,Zx=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ey={key:!0,ref:!0,__self:!0,__source:!0};function Gh(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Jx.call(e,n)&&!ey.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Xx,type:t,key:i,ref:o,props:a,_owner:Zx.current}}So.Fragment=Qx;So.jsx=Gh;So.jsxs=Gh;Fh.exports=So;var s=Fh.exports,qh={exports:{}},Mt={},Kh={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,D){var J=V.length;V.push(D);e:for(;0<J;){var U=J-1>>>1,A=V[U];if(0<a(A,D))V[U]=D,V[J]=A,J=U;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var D=V[0],J=V.pop();if(J!==D){V[0]=J;e:for(var U=0,A=V.length,Y=A>>>1;U<Y;){var X=2*(U+1)-1,re=V[X],ee=X+1,k=V[ee];if(0>a(re,J))ee<A&&0>a(k,re)?(V[U]=k,V[ee]=J,U=ee):(V[U]=re,V[X]=J,U=X);else if(ee<A&&0>a(k,J))V[U]=k,V[ee]=J,U=ee;else break e}}return D}function a(V,D){var J=V.sortIndex-D.sortIndex;return J!==0?J:V.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,g=null,y=3,h=!1,v=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=V)n(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=r(u)}}function T(V){if(b=!1,w(V),!v)if(r(c)!==null)v=!0,q(O);else{var D=r(u);D!==null&&F(T,D.startTime-V)}}function O(V,D){v=!1,b&&(b=!1,p(K),K=-1),h=!0;var J=y;try{for(w(D),g=r(c);g!==null&&(!(g.expirationTime>D)||V&&!ae());){var U=g.callback;if(typeof U=="function"){g.callback=null,y=g.priorityLevel;var A=U(g.expirationTime<=D);D=t.unstable_now(),typeof A=="function"?g.callback=A:g===r(c)&&n(c),w(D)}else n(c);g=r(c)}if(g!==null)var Y=!0;else{var X=r(u);X!==null&&F(T,X.startTime-D),Y=!1}return Y}finally{g=null,y=J,h=!1}}var G=!1,z=null,K=-1,I=5,se=-1;function ae(){return!(t.unstable_now()-se<I)}function P(){if(z!==null){var V=t.unstable_now();se=V;var D=!0;try{D=z(!0,V)}finally{D?H():(G=!1,z=null)}}else G=!1}var H;if(typeof x=="function")H=function(){x(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,B=C.port2;C.port1.onmessage=P,H=function(){B.postMessage(null)}}else H=function(){S(P,0)};function q(V){z=V,G||(G=!0,H())}function F(V,D){K=S(function(){V(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,q(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(V){switch(y){case 1:case 2:case 3:var D=3;break;default:D=y}var J=y;y=D;try{return V()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,D){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=y;y=V;try{return D()}finally{y=J}},t.unstable_scheduleCallback=function(V,D,J){var U=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?U+J:U):J=U,V){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=J+A,V={id:f++,callback:D,priorityLevel:V,startTime:J,expirationTime:A,sortIndex:-1},J>U?(V.sortIndex=J,e(u,V),r(c)===null&&V===r(u)&&(b?(p(K),K=-1):b=!0,F(T,J-U))):(V.sortIndex=A,e(c,V),v||h||(v=!0,q(O))),V},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(V){var D=y;return function(){var J=y;y=D;try{return V.apply(this,arguments)}finally{y=J}}}})(Yh);Kh.exports=Yh;var ty=Kh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=Q,Lt=ty;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xh=new Set,va={};function $s(t,e){vn(t,e),vn(t+"Capture",e)}function vn(t,e){for(va[t]=e,t=0;t<e.length;t++)Xh.add(e[t])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=Object.prototype.hasOwnProperty,sy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sf={},nf={};function ny(t){return Ec.call(nf,t)?!0:Ec.call(sf,t)?!1:sy.test(t)?nf[t]=!0:(sf[t]=!0,!1)}function ay(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iy(t,e,r,n){if(e===null||typeof e>"u"||ay(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,r,n,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lu=/[\-:]([a-z])/g;function Mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lu,Mu);ut[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lu,Mu);ut[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lu,Mu);ut[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bu(t,e,r,n){var a=ut.hasOwnProperty(e)?ut[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iy(e,r,a,n)&&(r=null),n||a===null?ny(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Fr=ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qa=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),zu=Symbol.for("react.strict_mode"),Sc=Symbol.for("react.profiler"),Qh=Symbol.for("react.provider"),Jh=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),kc=Symbol.for("react.suspense"),Cc=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),Zh=Symbol.for("react.offscreen"),af=Symbol.iterator;function Kn(t){return t===null||typeof t!="object"?null:(t=af&&t[af]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,el;function ia(t){if(el===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);el=e&&e[1]||""}return`
`+el+t}var tl=!1;function rl(t,e){if(!t||tl)return"";tl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{tl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ia(t):""}function oy(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=rl(t.type,!1),t;case 11:return t=rl(t.type.render,!1),t;case 1:return t=rl(t.type,!0),t;default:return""}}function _c(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case Qs:return"Portal";case Sc:return"Profiler";case zu:return"StrictMode";case kc:return"Suspense";case Cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jh:return(t.displayName||"Context")+".Consumer";case Qh:return(t._context.displayName||"Context")+".Provider";case Uu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $u:return e=t.displayName||null,e!==null?e:_c(t.type)||"Memo";case $r:e=t._payload,t=t._init;try{return _c(t(e))}catch{}}return null}function ly(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _c(e);case 8:return e===zu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ep(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cy(t){var e=ep(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ja(t){t._valueTracker||(t._valueTracker=cy(t))}function tp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ep(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function $i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ac(t,e){var r=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function of(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ns(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rp(t,e){e=e.checked,e!=null&&Bu(t,"checked",e,!1)}function Tc(t,e){rp(t,e);var r=ns(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ic(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ic(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lf(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ic(t,e,r){(e!=="number"||$i(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var oa=Array.isArray;function un(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ns(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Pc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(he(92));if(oa(r)){if(1<r.length)throw Error(he(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ns(r)}}function sp(t,e){var r=ns(e.value),n=ns(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function uf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function np(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?np(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Za,ap=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Za=Za||document.createElement("div"),Za.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Za.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uy=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(t){uy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),da[e]=da[t]})});function ip(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||da.hasOwnProperty(t)&&da[t]?(""+e).trim():e+"px"}function op(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=ip(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var dy=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oc(t,e){if(e){if(dy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Dc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=null;function Vu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lc=null,dn=null,fn=null;function df(t){if(t=$a(t)){if(typeof Lc!="function")throw Error(he(280));var e=t.stateNode;e&&(e=To(e),Lc(t.stateNode,t.type,e))}}function lp(t){dn?fn?fn.push(t):fn=[t]:dn=t}function cp(){if(dn){var t=dn,e=fn;if(fn=dn=null,df(t),e)for(t=0;t<e.length;t++)df(e[t])}}function up(t,e){return t(e)}function dp(){}var sl=!1;function fp(t,e,r){if(sl)return t(e,r);sl=!0;try{return up(t,e,r)}finally{sl=!1,(dn!==null||fn!==null)&&(dp(),cp())}}function Na(t,e){var r=t.stateNode;if(r===null)return null;var n=To(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(he(231,e,typeof r));return r}var Mc=!1;if(Ir)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Mc=!1}function fy(t,e,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(f){this.onError(f)}}var fa=!1,Vi=null,Wi=!1,Bc=null,my={onError:function(t){fa=!0,Vi=t}};function hy(t,e,r,n,a,i,o,l,c){fa=!1,Vi=null,fy.apply(my,arguments)}function py(t,e,r,n,a,i,o,l,c){if(hy.apply(this,arguments),fa){if(fa){var u=Vi;fa=!1,Vi=null}else throw Error(he(198));Wi||(Wi=!0,Bc=u)}}function Vs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ff(t){if(Vs(t)!==t)throw Error(he(188))}function gy(t){var e=t.alternate;if(!e){if(e=Vs(t),e===null)throw Error(he(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return ff(a),t;if(i===n)return ff(a),e;i=i.sibling}throw Error(he(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(he(189))}}if(r.alternate!==n)throw Error(he(190))}if(r.tag!==3)throw Error(he(188));return r.stateNode.current===r?t:e}function hp(t){return t=gy(t),t!==null?pp(t):null}function pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pp(t);if(e!==null)return e;t=t.sibling}return null}var gp=Lt.unstable_scheduleCallback,mf=Lt.unstable_cancelCallback,xy=Lt.unstable_shouldYield,yy=Lt.unstable_requestPaint,Ye=Lt.unstable_now,wy=Lt.unstable_getCurrentPriorityLevel,Wu=Lt.unstable_ImmediatePriority,xp=Lt.unstable_UserBlockingPriority,Hi=Lt.unstable_NormalPriority,vy=Lt.unstable_LowPriority,yp=Lt.unstable_IdlePriority,ko=null,xr=null;function by(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(ko,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:Ey,Ny=Math.log,jy=Math.LN2;function Ey(t){return t>>>=0,t===0?32:31-(Ny(t)/jy|0)|0}var ei=64,ti=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gi(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=la(l):(i&=o,i!==0&&(n=la(i)))}else o=r&~a,o!==0?n=la(o):i!==0&&(n=la(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ar(e),a=1<<r,n|=t[r],e&=~a;return n}function Sy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ky(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ar(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Sy(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function zc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wp(){var t=ei;return ei<<=1,!(ei&4194240)&&(ei=64),t}function nl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function za(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ar(e),t[e]=r}function Cy(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-ar(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function Hu(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ar(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Ie=0;function vp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bp,Gu,Np,jp,Ep,Uc=!1,ri=[],Yr=null,Xr=null,Qr=null,ja=new Map,Ea=new Map,Wr=[],_y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Xn(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=$a(e),e!==null&&Gu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ay(t,e,r,n,a){switch(e){case"focusin":return Yr=Xn(Yr,t,e,r,n,a),!0;case"dragenter":return Xr=Xn(Xr,t,e,r,n,a),!0;case"mouseover":return Qr=Xn(Qr,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return ja.set(i,Xn(ja.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ea.set(i,Xn(Ea.get(i)||null,t,e,r,n,a)),!0}return!1}function Sp(t){var e=vs(t.target);if(e!==null){var r=Vs(e);if(r!==null){if(e=r.tag,e===13){if(e=mp(r),e!==null){t.blockedOn=e,Ep(t.priority,function(){Np(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ai(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Fc=n,r.target.dispatchEvent(n),Fc=null}else return e=$a(r),e!==null&&Gu(e),t.blockedOn=r,!1;e.shift()}return!0}function pf(t,e,r){Ai(t)&&r.delete(e)}function Ty(){Uc=!1,Yr!==null&&Ai(Yr)&&(Yr=null),Xr!==null&&Ai(Xr)&&(Xr=null),Qr!==null&&Ai(Qr)&&(Qr=null),ja.forEach(pf),Ea.forEach(pf)}function Qn(t,e){t.blockedOn===e&&(t.blockedOn=null,Uc||(Uc=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Ty)))}function Sa(t){function e(a){return Qn(a,t)}if(0<ri.length){Qn(ri[0],t);for(var r=1;r<ri.length;r++){var n=ri[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yr!==null&&Qn(Yr,t),Xr!==null&&Qn(Xr,t),Qr!==null&&Qn(Qr,t),ja.forEach(e),Ea.forEach(e),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)Sp(r),r.blockedOn===null&&Wr.shift()}var mn=Fr.ReactCurrentBatchConfig,qi=!0;function Iy(t,e,r,n){var a=Ie,i=mn.transition;mn.transition=null;try{Ie=1,qu(t,e,r,n)}finally{Ie=a,mn.transition=i}}function Py(t,e,r,n){var a=Ie,i=mn.transition;mn.transition=null;try{Ie=4,qu(t,e,r,n)}finally{Ie=a,mn.transition=i}}function qu(t,e,r,n){if(qi){var a=$c(t,e,r,n);if(a===null)hl(t,e,n,Ki,r),hf(t,n);else if(Ay(a,t,e,r,n))n.stopPropagation();else if(hf(t,n),e&4&&-1<_y.indexOf(t)){for(;a!==null;){var i=$a(a);if(i!==null&&bp(i),i=$c(t,e,r,n),i===null&&hl(t,e,n,Ki,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else hl(t,e,n,null,r)}}var Ki=null;function $c(t,e,r,n){if(Ki=null,t=Vu(n),t=vs(t),t!==null)if(e=Vs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mp(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ki=t,null}function kp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wy()){case Wu:return 1;case xp:return 4;case Hi:case vy:return 16;case yp:return 536870912;default:return 16}default:return 16}}var qr=null,Ku=null,Ti=null;function Cp(){if(Ti)return Ti;var t,e=Ku,r=e.length,n,a="value"in qr?qr.value:qr.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[i-n];n++);return Ti=a.slice(t,1<n?1-n:void 0)}function Ii(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function si(){return!0}function gf(){return!1}function Bt(t){function e(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?si:gf,this.isPropagationStopped=gf,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),e}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Bt(zn),Ua=Ve({},zn,{view:0,detail:0}),Ry=Bt(Ua),al,il,Jn,Co=Ve({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jn&&(Jn&&t.type==="mousemove"?(al=t.screenX-Jn.screenX,il=t.screenY-Jn.screenY):il=al=0,Jn=t),al)},movementY:function(t){return"movementY"in t?t.movementY:il}}),xf=Bt(Co),Oy=Ve({},Co,{dataTransfer:0}),Dy=Bt(Oy),Fy=Ve({},Ua,{relatedTarget:0}),ol=Bt(Fy),Ly=Ve({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),My=Bt(Ly),By=Ve({},zn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zy=Bt(By),Uy=Ve({},zn,{data:0}),yf=Bt(Uy),$y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wy[t])?!!e[t]:!1}function Xu(){return Hy}var Gy=Ve({},Ua,{key:function(t){if(t.key){var e=$y[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(t){return t.type==="keypress"?Ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qy=Bt(Gy),Ky=Ve({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=Bt(Ky),Yy=Ve({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),Xy=Bt(Yy),Qy=Ve({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jy=Bt(Qy),Zy=Ve({},Co,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ew=Bt(Zy),tw=[9,13,27,32],Qu=Ir&&"CompositionEvent"in window,ma=null;Ir&&"documentMode"in document&&(ma=document.documentMode);var rw=Ir&&"TextEvent"in window&&!ma,_p=Ir&&(!Qu||ma&&8<ma&&11>=ma),vf=" ",bf=!1;function Ap(t,e){switch(t){case"keyup":return tw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zs=!1;function sw(t,e){switch(t){case"compositionend":return Tp(e);case"keypress":return e.which!==32?null:(bf=!0,vf);case"textInput":return t=e.data,t===vf&&bf?null:t;default:return null}}function nw(t,e){if(Zs)return t==="compositionend"||!Qu&&Ap(t,e)?(t=Cp(),Ti=Ku=qr=null,Zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _p&&e.locale!=="ko"?null:e.data;default:return null}}var aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aw[t.type]:e==="textarea"}function Ip(t,e,r,n){lp(n),e=Yi(e,"onChange"),0<e.length&&(r=new Yu("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ha=null,ka=null;function iw(t){$p(t,0)}function _o(t){var e=rn(t);if(tp(e))return t}function ow(t,e){if(t==="change")return e}var Pp=!1;if(Ir){var ll;if(Ir){var cl="oninput"in document;if(!cl){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),cl=typeof jf.oninput=="function"}ll=cl}else ll=!1;Pp=ll&&(!document.documentMode||9<document.documentMode)}function Ef(){ha&&(ha.detachEvent("onpropertychange",Rp),ka=ha=null)}function Rp(t){if(t.propertyName==="value"&&_o(ka)){var e=[];Ip(e,ka,t,Vu(t)),fp(iw,e)}}function lw(t,e,r){t==="focusin"?(Ef(),ha=e,ka=r,ha.attachEvent("onpropertychange",Rp)):t==="focusout"&&Ef()}function cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _o(ka)}function uw(t,e){if(t==="click")return _o(e)}function dw(t,e){if(t==="input"||t==="change")return _o(e)}function fw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:fw;function Ca(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ec.call(e,a)||!lr(t[a],e[a]))return!1}return!0}function Sf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var r=Sf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Sf(r)}}function Op(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Op(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dp(){for(var t=window,e=$i();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=$i(t.document)}return e}function Ju(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mw(t){var e=Dp(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Op(r.ownerDocument.documentElement,r)){if(n!==null&&Ju(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=kf(r,i);var o=kf(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hw=Ir&&"documentMode"in document&&11>=document.documentMode,en=null,Vc=null,pa=null,Wc=!1;function Cf(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wc||en==null||en!==$i(n)||(n=en,"selectionStart"in n&&Ju(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pa&&Ca(pa,n)||(pa=n,n=Yi(Vc,"onSelect"),0<n.length&&(e=new Yu("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=en)))}function ni(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var tn={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},ul={},Fp={};Ir&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete tn.animationend.animation,delete tn.animationiteration.animation,delete tn.animationstart.animation),"TransitionEvent"in window||delete tn.transitionend.transition);function Ao(t){if(ul[t])return ul[t];if(!tn[t])return t;var e=tn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Fp)return ul[t]=e[r];return t}var Lp=Ao("animationend"),Mp=Ao("animationiteration"),Bp=Ao("animationstart"),zp=Ao("transitionend"),Up=new Map,_f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){Up.set(t,e),$s(e,[t])}for(var dl=0;dl<_f.length;dl++){var fl=_f[dl],pw=fl.toLowerCase(),gw=fl[0].toUpperCase()+fl.slice(1);ls(pw,"on"+gw)}ls(Lp,"onAnimationEnd");ls(Mp,"onAnimationIteration");ls(Bp,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(zp,"onTransitionEnd");vn("onMouseEnter",["mouseout","mouseover"]);vn("onMouseLeave",["mouseout","mouseover"]);vn("onPointerEnter",["pointerout","pointerover"]);vn("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function Af(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,py(n,e,void 0,t),t.currentTarget=null}function $p(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Af(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Af(a,l,u),i=c}}}if(Wi)throw t=Bc,Wi=!1,Bc=null,t}function Me(t,e){var r=e[Yc];r===void 0&&(r=e[Yc]=new Set);var n=t+"__bubble";r.has(n)||(Vp(e,t,2,!1),r.add(n))}function ml(t,e,r){var n=0;e&&(n|=4),Vp(r,t,n,e)}var ai="_reactListening"+Math.random().toString(36).slice(2);function _a(t){if(!t[ai]){t[ai]=!0,Xh.forEach(function(r){r!=="selectionchange"&&(xw.has(r)||ml(r,!1,t),ml(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ai]||(e[ai]=!0,ml("selectionchange",!1,e))}}function Vp(t,e,r,n){switch(kp(e)){case 1:var a=Iy;break;case 4:a=Py;break;default:a=qu}r=a.bind(null,e,r,t),a=void 0,!Mc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function hl(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=vs(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}fp(function(){var u=i,f=Vu(r),g=[];e:{var y=Up.get(t);if(y!==void 0){var h=Yu,v=t;switch(t){case"keypress":if(Ii(r)===0)break e;case"keydown":case"keyup":h=qy;break;case"focusin":v="focus",h=ol;break;case"focusout":v="blur",h=ol;break;case"beforeblur":case"afterblur":h=ol;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Xy;break;case Lp:case Mp:case Bp:h=My;break;case zp:h=Jy;break;case"scroll":h=Ry;break;case"wheel":h=ew;break;case"copy":case"cut":case"paste":h=zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=wf}var b=(e&4)!==0,S=!b&&t==="scroll",p=b?y!==null?y+"Capture":null:y;b=[];for(var x=u,w;x!==null;){w=x;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,p!==null&&(T=Na(x,p),T!=null&&b.push(Aa(x,T,w)))),S)break;x=x.return}0<b.length&&(y=new h(y,v,null,r,f),g.push({event:y,listeners:b}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",y&&r!==Fc&&(v=r.relatedTarget||r.fromElement)&&(vs(v)||v[Pr]))break e;if((h||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?vs(v):null,v!==null&&(S=Vs(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(b=xf,T="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=wf,T="onPointerLeave",p="onPointerEnter",x="pointer"),S=h==null?y:rn(h),w=v==null?y:rn(v),y=new b(T,x+"leave",h,r,f),y.target=S,y.relatedTarget=w,T=null,vs(f)===u&&(b=new b(p,x+"enter",v,r,f),b.target=w,b.relatedTarget=S,T=b),S=T,h&&v)t:{for(b=h,p=v,x=0,w=b;w;w=Gs(w))x++;for(w=0,T=p;T;T=Gs(T))w++;for(;0<x-w;)b=Gs(b),x--;for(;0<w-x;)p=Gs(p),w--;for(;x--;){if(b===p||p!==null&&b===p.alternate)break t;b=Gs(b),p=Gs(p)}b=null}else b=null;h!==null&&Tf(g,y,h,b,!1),v!==null&&S!==null&&Tf(g,S,v,b,!0)}}e:{if(y=u?rn(u):window,h=y.nodeName&&y.nodeName.toLowerCase(),h==="select"||h==="input"&&y.type==="file")var O=ow;else if(Nf(y))if(Pp)O=dw;else{O=cw;var G=lw}else(h=y.nodeName)&&h.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=uw);if(O&&(O=O(t,u))){Ip(g,O,r,f);break e}G&&G(t,y,u),t==="focusout"&&(G=y._wrapperState)&&G.controlled&&y.type==="number"&&Ic(y,"number",y.value)}switch(G=u?rn(u):window,t){case"focusin":(Nf(G)||G.contentEditable==="true")&&(en=G,Vc=u,pa=null);break;case"focusout":pa=Vc=en=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,Cf(g,r,f);break;case"selectionchange":if(hw)break;case"keydown":case"keyup":Cf(g,r,f)}var z;if(Qu)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Zs?Ap(t,r)&&(K="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(_p&&r.locale!=="ko"&&(Zs||K!=="onCompositionStart"?K==="onCompositionEnd"&&Zs&&(z=Cp()):(qr=f,Ku="value"in qr?qr.value:qr.textContent,Zs=!0)),G=Yi(u,K),0<G.length&&(K=new yf(K,t,null,r,f),g.push({event:K,listeners:G}),z?K.data=z:(z=Tp(r),z!==null&&(K.data=z)))),(z=rw?sw(t,r):nw(t,r))&&(u=Yi(u,"onBeforeInput"),0<u.length&&(f=new yf("onBeforeInput","beforeinput",null,r,f),g.push({event:f,listeners:u}),f.data=z))}$p(g,e)})}function Aa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Yi(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Na(t,r),i!=null&&n.unshift(Aa(t,i,a)),i=Na(t,e),i!=null&&n.push(Aa(t,i,a))),t=t.return}return n}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,e,r,n,a){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Na(r,i),c!=null&&o.unshift(Aa(r,c,l))):a||(c=Na(r,i),c!=null&&o.push(Aa(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var yw=/\r\n?/g,ww=/\u0000|\uFFFD/g;function If(t){return(typeof t=="string"?t:""+t).replace(yw,`
`).replace(ww,"")}function ii(t,e,r){if(e=If(e),If(t)!==e&&r)throw Error(he(425))}function Xi(){}var Hc=null,Gc=null;function qc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,vw=typeof clearTimeout=="function"?clearTimeout:void 0,Pf=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Pf<"u"?function(t){return Pf.resolve(null).then(t).catch(Nw)}:Kc;function Nw(t){setTimeout(function(){throw t})}function pl(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Sa(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Sa(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Un=Math.random().toString(36).slice(2),pr="__reactFiber$"+Un,Ta="__reactProps$"+Un,Pr="__reactContainer$"+Un,Yc="__reactEvents$"+Un,jw="__reactListeners$"+Un,Ew="__reactHandles$"+Un;function vs(t){var e=t[pr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Pr]||r[pr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Rf(t);t!==null;){if(r=t[pr])return r;t=Rf(t)}return e}t=r,r=t.parentNode}return null}function $a(t){return t=t[pr]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function To(t){return t[Ta]||null}var Xc=[],sn=-1;function cs(t){return{current:t}}function Be(t){0>sn||(t.current=Xc[sn],Xc[sn]=null,sn--)}function Le(t,e){sn++,Xc[sn]=t.current,t.current=e}var as={},wt=cs(as),At=cs(!1),Ps=as;function bn(t,e){var r=t.type.contextTypes;if(!r)return as;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Tt(t){return t=t.childContextTypes,t!=null}function Qi(){Be(At),Be(wt)}function Of(t,e,r){if(wt.current!==as)throw Error(he(168));Le(wt,e),Le(At,r)}function Wp(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(he(108,ly(t)||"Unknown",a));return Ve({},r,n)}function Ji(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||as,Ps=wt.current,Le(wt,t),Le(At,At.current),!0}function Df(t,e,r){var n=t.stateNode;if(!n)throw Error(he(169));r?(t=Wp(t,e,Ps),n.__reactInternalMemoizedMergedChildContext=t,Be(At),Be(wt),Le(wt,t)):Be(At),Le(At,r)}var jr=null,Io=!1,gl=!1;function Hp(t){jr===null?jr=[t]:jr.push(t)}function Sw(t){Io=!0,Hp(t)}function us(){if(!gl&&jr!==null){gl=!0;var t=0,e=Ie;try{var r=jr;for(Ie=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}jr=null,Io=!1}catch(a){throw jr!==null&&(jr=jr.slice(t+1)),gp(Wu,us),a}finally{Ie=e,gl=!1}}return null}var nn=[],an=0,Zi=null,eo=0,$t=[],Vt=0,Rs=null,Er=1,Sr="";function gs(t,e){nn[an++]=eo,nn[an++]=Zi,Zi=t,eo=e}function Gp(t,e,r){$t[Vt++]=Er,$t[Vt++]=Sr,$t[Vt++]=Rs,Rs=t;var n=Er;t=Sr;var a=32-ar(n)-1;n&=~(1<<a),r+=1;var i=32-ar(e)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Er=1<<32-ar(e)+a|r<<a|n,Sr=i+t}else Er=1<<i|r<<a|n,Sr=t}function Zu(t){t.return!==null&&(gs(t,1),Gp(t,1,0))}function ed(t){for(;t===Zi;)Zi=nn[--an],nn[an]=null,eo=nn[--an],nn[an]=null;for(;t===Rs;)Rs=$t[--Vt],$t[Vt]=null,Sr=$t[--Vt],$t[Vt]=null,Er=$t[--Vt],$t[Vt]=null}var Ft=null,Dt=null,ze=!1,rr=null;function qp(t,e){var r=Wt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ff(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Dt=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Rs!==null?{id:Er,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Wt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ft=t,Dt=null,!0):!1;default:return!1}}function Qc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jc(t){if(ze){var e=Dt;if(e){var r=e;if(!Ff(t,e)){if(Qc(t))throw Error(he(418));e=Jr(r.nextSibling);var n=Ft;e&&Ff(t,e)?qp(n,r):(t.flags=t.flags&-4097|2,ze=!1,Ft=t)}}else{if(Qc(t))throw Error(he(418));t.flags=t.flags&-4097|2,ze=!1,Ft=t}}}function Lf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function oi(t){if(t!==Ft)return!1;if(!ze)return Lf(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qc(t.type,t.memoizedProps)),e&&(e=Dt)){if(Qc(t))throw Kp(),Error(he(418));for(;e;)qp(t,e),e=Jr(e.nextSibling)}if(Lf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Dt=Jr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Ft?Jr(t.stateNode.nextSibling):null;return!0}function Kp(){for(var t=Dt;t;)t=Jr(t.nextSibling)}function Nn(){Dt=Ft=null,ze=!1}function td(t){rr===null?rr=[t]:rr.push(t)}var kw=Fr.ReactCurrentBatchConfig;function Zn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(he(309));var n=r.stateNode}if(!n)throw Error(he(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(he(284));if(!r._owner)throw Error(he(290,t))}return t}function li(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mf(t){var e=t._init;return e(t._payload)}function Yp(t){function e(p,x){if(t){var w=p.deletions;w===null?(p.deletions=[x],p.flags|=16):w.push(x)}}function r(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function n(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function a(p,x){return p=rs(p,x),p.index=0,p.sibling=null,p}function i(p,x,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<x?(p.flags|=2,x):w):(p.flags|=2,x)):(p.flags|=1048576,x)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,x,w,T){return x===null||x.tag!==6?(x=jl(w,p.mode,T),x.return=p,x):(x=a(x,w),x.return=p,x)}function c(p,x,w,T){var O=w.type;return O===Js?f(p,x,w.props.children,T,w.key):x!==null&&(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$r&&Mf(O)===x.type)?(T=a(x,w.props),T.ref=Zn(p,x,w),T.return=p,T):(T=Mi(w.type,w.key,w.props,null,p.mode,T),T.ref=Zn(p,x,w),T.return=p,T)}function u(p,x,w,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=El(w,p.mode,T),x.return=p,x):(x=a(x,w.children||[]),x.return=p,x)}function f(p,x,w,T,O){return x===null||x.tag!==7?(x=As(w,p.mode,T,O),x.return=p,x):(x=a(x,w),x.return=p,x)}function g(p,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jl(""+x,p.mode,w),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qa:return w=Mi(x.type,x.key,x.props,null,p.mode,w),w.ref=Zn(p,null,x),w.return=p,w;case Qs:return x=El(x,p.mode,w),x.return=p,x;case $r:var T=x._init;return g(p,T(x._payload),w)}if(oa(x)||Kn(x))return x=As(x,p.mode,w,null),x.return=p,x;li(p,x)}return null}function y(p,x,w,T){var O=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:l(p,x,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qa:return w.key===O?c(p,x,w,T):null;case Qs:return w.key===O?u(p,x,w,T):null;case $r:return O=w._init,y(p,x,O(w._payload),T)}if(oa(w)||Kn(w))return O!==null?null:f(p,x,w,T,null);li(p,w)}return null}function h(p,x,w,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(w)||null,l(x,p,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Qa:return p=p.get(T.key===null?w:T.key)||null,c(x,p,T,O);case Qs:return p=p.get(T.key===null?w:T.key)||null,u(x,p,T,O);case $r:var G=T._init;return h(p,x,w,G(T._payload),O)}if(oa(T)||Kn(T))return p=p.get(w)||null,f(x,p,T,O,null);li(x,T)}return null}function v(p,x,w,T){for(var O=null,G=null,z=x,K=x=0,I=null;z!==null&&K<w.length;K++){z.index>K?(I=z,z=null):I=z.sibling;var se=y(p,z,w[K],T);if(se===null){z===null&&(z=I);break}t&&z&&se.alternate===null&&e(p,z),x=i(se,x,K),G===null?O=se:G.sibling=se,G=se,z=I}if(K===w.length)return r(p,z),ze&&gs(p,K),O;if(z===null){for(;K<w.length;K++)z=g(p,w[K],T),z!==null&&(x=i(z,x,K),G===null?O=z:G.sibling=z,G=z);return ze&&gs(p,K),O}for(z=n(p,z);K<w.length;K++)I=h(z,p,K,w[K],T),I!==null&&(t&&I.alternate!==null&&z.delete(I.key===null?K:I.key),x=i(I,x,K),G===null?O=I:G.sibling=I,G=I);return t&&z.forEach(function(ae){return e(p,ae)}),ze&&gs(p,K),O}function b(p,x,w,T){var O=Kn(w);if(typeof O!="function")throw Error(he(150));if(w=O.call(w),w==null)throw Error(he(151));for(var G=O=null,z=x,K=x=0,I=null,se=w.next();z!==null&&!se.done;K++,se=w.next()){z.index>K?(I=z,z=null):I=z.sibling;var ae=y(p,z,se.value,T);if(ae===null){z===null&&(z=I);break}t&&z&&ae.alternate===null&&e(p,z),x=i(ae,x,K),G===null?O=ae:G.sibling=ae,G=ae,z=I}if(se.done)return r(p,z),ze&&gs(p,K),O;if(z===null){for(;!se.done;K++,se=w.next())se=g(p,se.value,T),se!==null&&(x=i(se,x,K),G===null?O=se:G.sibling=se,G=se);return ze&&gs(p,K),O}for(z=n(p,z);!se.done;K++,se=w.next())se=h(z,p,K,se.value,T),se!==null&&(t&&se.alternate!==null&&z.delete(se.key===null?K:se.key),x=i(se,x,K),G===null?O=se:G.sibling=se,G=se);return t&&z.forEach(function(P){return e(p,P)}),ze&&gs(p,K),O}function S(p,x,w,T){if(typeof w=="object"&&w!==null&&w.type===Js&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qa:e:{for(var O=w.key,G=x;G!==null;){if(G.key===O){if(O=w.type,O===Js){if(G.tag===7){r(p,G.sibling),x=a(G,w.props.children),x.return=p,p=x;break e}}else if(G.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$r&&Mf(O)===G.type){r(p,G.sibling),x=a(G,w.props),x.ref=Zn(p,G,w),x.return=p,p=x;break e}r(p,G);break}else e(p,G);G=G.sibling}w.type===Js?(x=As(w.props.children,p.mode,T,w.key),x.return=p,p=x):(T=Mi(w.type,w.key,w.props,null,p.mode,T),T.ref=Zn(p,x,w),T.return=p,p=T)}return o(p);case Qs:e:{for(G=w.key;x!==null;){if(x.key===G)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(p,x.sibling),x=a(x,w.children||[]),x.return=p,p=x;break e}else{r(p,x);break}else e(p,x);x=x.sibling}x=El(w,p.mode,T),x.return=p,p=x}return o(p);case $r:return G=w._init,S(p,x,G(w._payload),T)}if(oa(w))return v(p,x,w,T);if(Kn(w))return b(p,x,w,T);li(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(p,x.sibling),x=a(x,w),x.return=p,p=x):(r(p,x),x=jl(w,p.mode,T),x.return=p,p=x),o(p)):r(p,x)}return S}var jn=Yp(!0),Xp=Yp(!1),to=cs(null),ro=null,on=null,rd=null;function sd(){rd=on=ro=null}function nd(t){var e=to.current;Be(to),t._currentValue=e}function Zc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function hn(t,e){ro=t,rd=on=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(rd!==t)if(t={context:t,memoizedValue:e,next:null},on===null){if(ro===null)throw Error(he(308));on=t,ro.dependencies={lanes:0,firstContext:t}}else on=on.next=t;return e}var bs=null;function ad(t){bs===null?bs=[t]:bs.push(t)}function Qp(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,ad(e)):(r.next=a.next,a.next=r),e.interleaved=r,Rr(t,n)}function Rr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vr=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,_e&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Rr(t,r)}return a=n.interleaved,a===null?(e.next=e,ad(n)):(e.next=a.next,a.next=e),n.interleaved=e,Rr(t,r)}function Pi(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hu(t,r)}}function Bf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function so(t,e,r,n){var a=t.updateQueue;Vr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var g=a.baseState;o=0,f=u=c=null,l=i;do{var y=l.lane,h=l.eventTime;if((n&y)===y){f!==null&&(f=f.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,b=l;switch(y=e,h=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){g=v.call(h,g,y);break e}g=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,y=typeof v=="function"?v.call(h,g,y):v,y==null)break e;g=Ve({},g,y);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=a.effects,y===null?a.effects=[l]:y.push(l))}else h={eventTime:h,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=h,c=g):f=f.next=h,o|=y;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(f===null&&(c=g),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=g}}function zf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(he(191,a));a.call(n)}}}var Va={},yr=cs(Va),Ia=cs(Va),Pa=cs(Va);function Ns(t){if(t===Va)throw Error(he(174));return t}function od(t,e){switch(Le(Pa,e),Le(Ia,t),Le(yr,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rc(e,t)}Be(yr),Le(yr,e)}function En(){Be(yr),Be(Ia),Be(Pa)}function Zp(t){Ns(Pa.current);var e=Ns(yr.current),r=Rc(e,t.type);e!==r&&(Le(Ia,t),Le(yr,r))}function ld(t){Ia.current===t&&(Be(yr),Be(Ia))}var Ue=cs(0);function no(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xl=[];function cd(){for(var t=0;t<xl.length;t++)xl[t]._workInProgressVersionPrimary=null;xl.length=0}var Ri=Fr.ReactCurrentDispatcher,yl=Fr.ReactCurrentBatchConfig,Os=0,$e=null,rt=null,nt=null,ao=!1,ga=!1,Ra=0,Cw=0;function ft(){throw Error(he(321))}function ud(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!lr(t[r],e[r]))return!1;return!0}function dd(t,e,r,n,a,i){if(Os=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ri.current=t===null||t.memoizedState===null?Iw:Pw,t=r(n,a),ga){i=0;do{if(ga=!1,Ra=0,25<=i)throw Error(he(301));i+=1,nt=rt=null,e.updateQueue=null,Ri.current=Rw,t=r(n,a)}while(ga)}if(Ri.current=io,e=rt!==null&&rt.next!==null,Os=0,nt=rt=$e=null,ao=!1,e)throw Error(he(300));return t}function fd(){var t=Ra!==0;return Ra=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?$e.memoizedState=nt=t:nt=nt.next=t,nt}function Kt(){if(rt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=nt===null?$e.memoizedState:nt.next;if(e!==null)nt=e,rt=t;else{if(t===null)throw Error(he(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},nt===null?$e.memoizedState=nt=t:nt=nt.next=t}return nt}function Oa(t,e){return typeof e=="function"?e(t):e}function wl(t){var e=Kt(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=rt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((Os&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var g={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=g,o=n):c=c.next=g,$e.lanes|=f,Ds|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,lr(n,e.memoizedState)||(_t=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,$e.lanes|=i,Ds|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function vl(t){var e=Kt(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);lr(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function e0(){}function t0(t,e){var r=$e,n=Kt(),a=e(),i=!lr(n.memoizedState,a);if(i&&(n.memoizedState=a,_t=!0),n=n.queue,md(n0.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(r.flags|=2048,Da(9,s0.bind(null,r,n,a,e),void 0,null),at===null)throw Error(he(349));Os&30||r0(r,e,a)}return a}function r0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function s0(t,e,r,n){e.value=r,e.getSnapshot=n,a0(e)&&i0(t)}function n0(t,e,r){return r(function(){a0(e)&&i0(t)})}function a0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!lr(t,r)}catch{return!0}}function i0(t){var e=Rr(t,1);e!==null&&ir(e,t,1,-1)}function Uf(t){var e=dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=Tw.bind(null,$e,t),[e.memoizedState,t]}function Da(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function o0(){return Kt().memoizedState}function Oi(t,e,r,n){var a=dr();$e.flags|=t,a.memoizedState=Da(1|e,r,void 0,n===void 0?null:n)}function Po(t,e,r,n){var a=Kt();n=n===void 0?null:n;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,n!==null&&ud(n,o.deps)){a.memoizedState=Da(e,r,i,n);return}}$e.flags|=t,a.memoizedState=Da(1|e,r,i,n)}function $f(t,e){return Oi(8390656,8,t,e)}function md(t,e){return Po(2048,8,t,e)}function l0(t,e){return Po(4,2,t,e)}function c0(t,e){return Po(4,4,t,e)}function u0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d0(t,e,r){return r=r!=null?r.concat([t]):null,Po(4,4,u0.bind(null,e,t),r)}function hd(){}function f0(t,e){var r=Kt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ud(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function m0(t,e){var r=Kt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ud(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function h0(t,e,r){return Os&21?(lr(r,e)||(r=wp(),$e.lanes|=r,Ds|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=r)}function _w(t,e){var r=Ie;Ie=r!==0&&4>r?r:4,t(!0);var n=yl.transition;yl.transition={};try{t(!1),e()}finally{Ie=r,yl.transition=n}}function p0(){return Kt().memoizedState}function Aw(t,e,r){var n=ts(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},g0(t))x0(e,r);else if(r=Qp(t,e,r,n),r!==null){var a=Et();ir(r,t,n,a),y0(r,e,n)}}function Tw(t,e,r){var n=ts(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(g0(t))x0(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,lr(l,o)){var c=e.interleaved;c===null?(a.next=a,ad(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Qp(t,e,a,n),r!==null&&(a=Et(),ir(r,t,n,a),y0(r,e,n))}}function g0(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function x0(t,e){ga=ao=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function y0(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hu(t,r)}}var io={readContext:qt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Iw={readContext:qt,useCallback:function(t,e){return dr().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:$f,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Oi(4194308,4,u0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Oi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oi(4,2,t,e)},useMemo:function(t,e){var r=dr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=dr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Aw.bind(null,$e,t),[n.memoizedState,t]},useRef:function(t){var e=dr();return t={current:t},e.memoizedState=t},useState:Uf,useDebugValue:hd,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=Uf(!1),e=t[0];return t=_w.bind(null,t[1]),dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=$e,a=dr();if(ze){if(r===void 0)throw Error(he(407));r=r()}else{if(r=e(),at===null)throw Error(he(349));Os&30||r0(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,$f(n0.bind(null,n,i,t),[t]),n.flags|=2048,Da(9,s0.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=dr(),e=at.identifierPrefix;if(ze){var r=Sr,n=Er;r=(n&~(1<<32-ar(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ra++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Cw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pw={readContext:qt,useCallback:f0,useContext:qt,useEffect:md,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:m0,useReducer:wl,useRef:o0,useState:function(){return wl(Oa)},useDebugValue:hd,useDeferredValue:function(t){var e=Kt();return h0(e,rt.memoizedState,t)},useTransition:function(){var t=wl(Oa)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:e0,useSyncExternalStore:t0,useId:p0,unstable_isNewReconciler:!1},Rw={readContext:qt,useCallback:f0,useContext:qt,useEffect:md,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:m0,useReducer:vl,useRef:o0,useState:function(){return vl(Oa)},useDebugValue:hd,useDeferredValue:function(t){var e=Kt();return rt===null?e.memoizedState=t:h0(e,rt.memoizedState,t)},useTransition:function(){var t=vl(Oa)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:e0,useSyncExternalStore:t0,useId:p0,unstable_isNewReconciler:!1};function er(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function eu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ve({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ro={isMounted:function(t){return(t=t._reactInternals)?Vs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Et(),a=ts(t),i=Ar(n,a);i.payload=e,r!=null&&(i.callback=r),e=Zr(t,i,a),e!==null&&(ir(e,t,a,n),Pi(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Et(),a=ts(t),i=Ar(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Zr(t,i,a),e!==null&&(ir(e,t,a,n),Pi(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Et(),n=ts(t),a=Ar(r,n);a.tag=2,e!=null&&(a.callback=e),e=Zr(t,a,n),e!==null&&(ir(e,t,n,r),Pi(e,t,n))}};function Vf(t,e,r,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(r,n)||!Ca(a,i):!0}function w0(t,e,r){var n=!1,a=as,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(a=Tt(e)?Ps:wt.current,n=e.contextTypes,i=(n=n!=null)?bn(t,a):as),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ro,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ro.enqueueReplaceState(e,e.state,null)}function tu(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},id(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=qt(i):(i=Tt(e)?Ps:wt.current,a.context=bn(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eu(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ro.enqueueReplaceState(a,a.state,null),so(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Sn(t,e){try{var r="",n=e;do r+=oy(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function bl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ru(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ow=typeof WeakMap=="function"?WeakMap:Map;function v0(t,e,r){r=Ar(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){lo||(lo=!0,fu=n),ru(t,e)},r}function b0(t,e,r){r=Ar(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){ru(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ru(t,e),typeof n!="function"&&(es===null?es=new Set([this]):es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Hf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ow;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Kw.bind(null,t,e,r),e.then(t,t))}function Gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qf(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ar(-1,1),e.tag=2,Zr(r,e,1))),r.lanes|=1),t)}var Dw=Fr.ReactCurrentOwner,_t=!1;function Nt(t,e,r,n){e.child=t===null?Xp(e,null,r,n):jn(e,t.child,r,n)}function Kf(t,e,r,n,a){r=r.render;var i=e.ref;return hn(e,a),n=dd(t,e,r,n,i,a),r=fd(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Or(t,e,a)):(ze&&r&&Zu(e),e.flags|=1,Nt(t,e,n,a),e.child)}function Yf(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!Nd(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,N0(t,e,i,n,a)):(t=Mi(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ca,r(o,n)&&t.ref===e.ref)return Or(t,e,a)}return e.flags|=1,t=rs(i,n),t.ref=e.ref,t.return=e,e.child=t}function N0(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(Ca(i,n)&&t.ref===e.ref)if(_t=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,Or(t,e,a)}return su(t,e,r,n,a)}function j0(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(cn,Rt),Rt|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(cn,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Le(cn,Rt),Rt|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Le(cn,Rt),Rt|=n;return Nt(t,e,a,r),e.child}function E0(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function su(t,e,r,n,a){var i=Tt(r)?Ps:wt.current;return i=bn(e,i),hn(e,a),r=dd(t,e,r,n,i,a),n=fd(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Or(t,e,a)):(ze&&n&&Zu(e),e.flags|=1,Nt(t,e,r,a),e.child)}function Xf(t,e,r,n,a){if(Tt(r)){var i=!0;Ji(e)}else i=!1;if(hn(e,a),e.stateNode===null)Di(t,e),w0(e,r,n),tu(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=qt(u):(u=Tt(r)?Ps:wt.current,u=bn(e,u));var f=r.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Wf(e,o,n,u),Vr=!1;var y=e.memoizedState;o.state=y,so(e,n,o,a),c=e.memoizedState,l!==n||y!==c||At.current||Vr?(typeof f=="function"&&(eu(e,r,f,n),c=e.memoizedState),(l=Vr||Vf(e,r,l,n,y,c,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Jp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:er(e.type,l),o.props=u,g=e.pendingProps,y=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=Tt(r)?Ps:wt.current,c=bn(e,c));var h=r.getDerivedStateFromProps;(f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==c)&&Wf(e,o,n,c),Vr=!1,y=e.memoizedState,o.state=y,so(e,n,o,a);var v=e.memoizedState;l!==g||y!==v||At.current||Vr?(typeof h=="function"&&(eu(e,r,h,n),v=e.memoizedState),(u=Vr||Vf(e,r,u,n,y,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),n=!1)}return nu(t,e,r,n,i,a)}function nu(t,e,r,n,a,i){E0(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&Df(e,r,!1),Or(t,e,i);n=e.stateNode,Dw.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=jn(e,t.child,null,i),e.child=jn(e,null,l,i)):Nt(t,e,l,i),e.memoizedState=n.state,a&&Df(e,r,!0),e.child}function S0(t){var e=t.stateNode;e.pendingContext?Of(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Of(t,e.context,!1),od(t,e.containerInfo)}function Qf(t,e,r,n,a){return Nn(),td(a),e.flags|=256,Nt(t,e,r,n),e.child}var au={dehydrated:null,treeContext:null,retryLane:0};function iu(t){return{baseLanes:t,cachePool:null,transitions:null}}function k0(t,e,r){var n=e.pendingProps,a=Ue.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Le(Ue,a&1),t===null)return Jc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fo(o,n,0,null),t=As(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=iu(r),e.memoizedState=au,t):pd(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Fw(t,e,o,n,l,a,r);if(i){i=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=rs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=rs(l,i):(i=As(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?iu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=au,n}return i=t.child,t=i.sibling,n=rs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function pd(t,e){return e=Fo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ci(t,e,r,n){return n!==null&&td(n),jn(e,t.child,null,r),t=pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fw(t,e,r,n,a,i,o){if(r)return e.flags&256?(e.flags&=-257,n=bl(Error(he(422))),ci(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=Fo({mode:"visible",children:n.children},a,0,null),i=As(i,a,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&jn(e,t.child,null,o),e.child.memoizedState=iu(o),e.memoizedState=au,i);if(!(e.mode&1))return ci(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(he(419)),n=bl(i,n,void 0),ci(t,e,o,n)}if(l=(o&t.childLanes)!==0,_t||l){if(n=at,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Rr(t,a),ir(n,t,a,-1))}return bd(),n=bl(Error(he(421))),ci(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Yw.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Dt=Jr(a.nextSibling),Ft=e,ze=!0,rr=null,t!==null&&($t[Vt++]=Er,$t[Vt++]=Sr,$t[Vt++]=Rs,Er=t.id,Sr=t.overflow,Rs=e),e=pd(e,n.children),e.flags|=4096,e)}function Jf(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Zc(t.return,e,r)}function Nl(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function C0(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Nt(t,e,n.children,r),n=Ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jf(t,r,e);else if(t.tag===19)Jf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Le(Ue,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&no(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Nl(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&no(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Nl(e,!0,r,null,i);break;case"together":Nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Di(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,r=rs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=rs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Lw(t,e,r){switch(e.tag){case 3:S0(e),Nn();break;case 5:Zp(e);break;case 1:Tt(e.type)&&Ji(e);break;case 4:od(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Le(to,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Le(Ue,Ue.current&1),e.flags|=128,null):r&e.child.childLanes?k0(t,e,r):(Le(Ue,Ue.current&1),t=Or(t,e,r),t!==null?t.sibling:null);Le(Ue,Ue.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return C0(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Le(Ue,Ue.current),n)break;return null;case 22:case 23:return e.lanes=0,j0(t,e,r)}return Or(t,e,r)}var _0,ou,A0,T0;_0=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ou=function(){};A0=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Ns(yr.current);var i=null;switch(r){case"input":a=Ac(t,a),n=Ac(t,n),i=[];break;case"select":a=Ve({},a,{value:void 0}),n=Ve({},n,{value:void 0}),i=[];break;case"textarea":a=Pc(t,a),n=Pc(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xi)}Oc(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(va.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(va.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Me("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};T0=function(t,e,r,n){r!==n&&(e.flags|=4)};function ea(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Mw(t,e,r){var n=e.pendingProps;switch(ed(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Tt(e.type)&&Qi(),mt(e),null;case 3:return n=e.stateNode,En(),Be(At),Be(wt),cd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(oi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rr!==null&&(pu(rr),rr=null))),ou(t,e),mt(e),null;case 5:ld(e);var a=Ns(Pa.current);if(r=e.type,t!==null&&e.stateNode!=null)A0(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(he(166));return mt(e),null}if(t=Ns(yr.current),oi(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[pr]=e,n[Ta]=i,t=(e.mode&1)!==0,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(a=0;a<ca.length;a++)Me(ca[a],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":of(n,i),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Me("invalid",n);break;case"textarea":cf(n,i),Me("invalid",n)}Oc(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,l,t),a=["children",""+l]):va.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",n)}switch(r){case"input":Ja(n),lf(n,i,!0);break;case"textarea":Ja(n),uf(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Xi)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=np(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[pr]=e,t[Ta]=n,_0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dc(r,n),r){case"dialog":Me("cancel",t),Me("close",t),a=n;break;case"iframe":case"object":case"embed":Me("load",t),a=n;break;case"video":case"audio":for(a=0;a<ca.length;a++)Me(ca[a],t);a=n;break;case"source":Me("error",t),a=n;break;case"img":case"image":case"link":Me("error",t),Me("load",t),a=n;break;case"details":Me("toggle",t),a=n;break;case"input":of(t,n),a=Ac(t,n),Me("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ve({},n,{value:void 0}),Me("invalid",t);break;case"textarea":cf(t,n),a=Pc(t,n),Me("invalid",t);break;default:a=n}Oc(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?op(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ap(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ba(t,c):typeof c=="number"&&ba(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(va.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Me("scroll",t):c!=null&&Bu(t,i,c,o))}switch(r){case"input":Ja(t),lf(t,n,!1);break;case"textarea":Ja(t),uf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ns(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?un(t,!!n.multiple,i,!1):n.defaultValue!=null&&un(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Xi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)T0(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(he(166));if(r=Ns(Pa.current),Ns(yr.current),oi(e)){if(n=e.stateNode,r=e.memoizedProps,n[pr]=e,(i=n.nodeValue!==r)&&(t=Ft,t!==null))switch(t.tag){case 3:ii(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ii(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pr]=e,e.stateNode=n}return mt(e),null;case 13:if(Be(Ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&Dt!==null&&e.mode&1&&!(e.flags&128))Kp(),Nn(),e.flags|=98560,i=!1;else if(i=oi(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(he(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[pr]=e}else Nn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else rr!==null&&(pu(rr),rr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?st===0&&(st=3):bd())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return En(),ou(t,e),t===null&&_a(e.stateNode.containerInfo),mt(e),null;case 10:return nd(e.type._context),mt(e),null;case 17:return Tt(e.type)&&Qi(),mt(e),null;case 19:if(Be(Ue),i=e.memoizedState,i===null)return mt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)ea(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=no(t),o!==null){for(e.flags|=128,ea(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Le(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>kn&&(e.flags|=128,n=!0,ea(i,!1),e.lanes=4194304)}else{if(!n)if(t=no(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ea(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return mt(e),null}else 2*Ye()-i.renderingStartTime>kn&&r!==1073741824&&(e.flags|=128,n=!0,ea(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,r=Ue.current,Le(Ue,n?r&1|2:r&1),e):(mt(e),null);case 22:case 23:return vd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Rt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function Bw(t,e){switch(ed(e),e.tag){case 1:return Tt(e.type)&&Qi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return En(),Be(At),Be(wt),cd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ld(e),null;case 13:if(Be(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Nn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ue),null;case 4:return En(),null;case 10:return nd(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var ui=!1,pt=!1,zw=typeof WeakSet=="function"?WeakSet:Set,we=null;function ln(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){We(t,e,n)}else r.current=null}function lu(t,e,r){try{r()}catch(n){We(t,e,n)}}var Zf=!1;function Uw(t,e){if(Hc=qi,t=Dp(),Ju(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,f=0,g=t,y=null;t:for(;;){for(var h;g!==r||a!==0&&g.nodeType!==3||(l=o+a),g!==i||n!==0&&g.nodeType!==3||(c=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(h=g.firstChild)!==null;)y=g,g=h;for(;;){if(g===t)break t;if(y===r&&++u===a&&(l=o),y===i&&++f===n&&(c=o),(h=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gc={focusedElem:t,selectionRange:r},qi=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,S=v.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:er(e.type,b),S);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(T){We(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return v=Zf,Zf=!1,v}function xa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&lu(e,r,i)}a=a.next}while(a!==n)}}function Oo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function cu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function I0(t){var e=t.alternate;e!==null&&(t.alternate=null,I0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Ta],delete e[Yc],delete e[jw],delete e[Ew])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P0(t){return t.tag===5||t.tag===3||t.tag===4}function em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xi));else if(n!==4&&(t=t.child,t!==null))for(uu(t,e,r),t=t.sibling;t!==null;)uu(t,e,r),t=t.sibling}function du(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(du(t,e,r),t=t.sibling;t!==null;)du(t,e,r),t=t.sibling}var ot=null,tr=!1;function zr(t,e,r){for(r=r.child;r!==null;)R0(t,e,r),r=r.sibling}function R0(t,e,r){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:pt||ln(r,e);case 6:var n=ot,a=tr;ot=null,zr(t,e,r),ot=n,tr=a,ot!==null&&(tr?(t=ot,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ot.removeChild(r.stateNode));break;case 18:ot!==null&&(tr?(t=ot,r=r.stateNode,t.nodeType===8?pl(t.parentNode,r):t.nodeType===1&&pl(t,r),Sa(t)):pl(ot,r.stateNode));break;case 4:n=ot,a=tr,ot=r.stateNode.containerInfo,tr=!0,zr(t,e,r),ot=n,tr=a;break;case 0:case 11:case 14:case 15:if(!pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lu(r,e,o),a=a.next}while(a!==n)}zr(t,e,r);break;case 1:if(!pt&&(ln(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){We(r,e,l)}zr(t,e,r);break;case 21:zr(t,e,r);break;case 22:r.mode&1?(pt=(n=pt)||r.memoizedState!==null,zr(t,e,r),pt=n):zr(t,e,r);break;default:zr(t,e,r)}}function tm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zw),e.forEach(function(n){var a=Xw.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Qt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,tr=!1;break e;case 3:ot=l.stateNode.containerInfo,tr=!0;break e;case 4:ot=l.stateNode.containerInfo,tr=!0;break e}l=l.return}if(ot===null)throw Error(he(160));R0(i,o,a),ot=null,tr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){We(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O0(e,t),e=e.sibling}function O0(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),ur(t),n&4){try{xa(3,t,t.return),Oo(3,t)}catch(b){We(t,t.return,b)}try{xa(5,t,t.return)}catch(b){We(t,t.return,b)}}break;case 1:Qt(e,t),ur(t),n&512&&r!==null&&ln(r,r.return);break;case 5:if(Qt(e,t),ur(t),n&512&&r!==null&&ln(r,r.return),t.flags&32){var a=t.stateNode;try{ba(a,"")}catch(b){We(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rp(a,i),Dc(l,o);var u=Dc(l,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?op(a,g):f==="dangerouslySetInnerHTML"?ap(a,g):f==="children"?ba(a,g):Bu(a,f,g,u)}switch(l){case"input":Tc(a,i);break;case"textarea":sp(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?un(a,!!i.multiple,h,!1):y!==!!i.multiple&&(i.defaultValue!=null?un(a,!!i.multiple,i.defaultValue,!0):un(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ta]=i}catch(b){We(t,t.return,b)}}break;case 6:if(Qt(e,t),ur(t),n&4){if(t.stateNode===null)throw Error(he(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(b){We(t,t.return,b)}}break;case 3:if(Qt(e,t),ur(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sa(e.containerInfo)}catch(b){We(t,t.return,b)}break;case 4:Qt(e,t),ur(t);break;case 13:Qt(e,t),ur(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(yd=Ye())),n&4&&tm(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(pt=(u=pt)||f,Qt(e,t),pt=u):Qt(e,t),ur(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(we=t,f=t.child;f!==null;){for(g=we=f;we!==null;){switch(y=we,h=y.child,y.tag){case 0:case 11:case 14:case 15:xa(4,y,y.return);break;case 1:ln(y,y.return);var v=y.stateNode;if(typeof v.componentWillUnmount=="function"){n=y,r=y.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){We(n,r,b)}}break;case 5:ln(y,y.return);break;case 22:if(y.memoizedState!==null){sm(g);continue}}h!==null?(h.return=y,we=h):sm(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{a=g.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ip("display",o))}catch(b){We(t,t.return,b)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(b){We(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Qt(e,t),ur(t),n&4&&tm(t);break;case 21:break;default:Qt(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(P0(r)){var n=r;break e}r=r.return}throw Error(he(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ba(a,""),n.flags&=-33);var i=em(t);du(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=em(t);uu(t,l,o);break;default:throw Error(he(161))}}catch(c){We(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $w(t,e,r){we=t,D0(t)}function D0(t,e,r){for(var n=(t.mode&1)!==0;we!==null;){var a=we,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||ui;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||pt;l=ui;var u=pt;if(ui=o,(pt=c)&&!u)for(we=a;we!==null;)o=we,c=o.child,o.tag===22&&o.memoizedState!==null?nm(a):c!==null?(c.return=o,we=c):nm(a);for(;i!==null;)we=i,D0(i),i=i.sibling;we=a,ui=l,pt=u}rm(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,we=i):rm(t)}}function rm(t){for(;we!==null;){var e=we;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Oo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!pt)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:er(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&zf(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}zf(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Sa(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}pt||e.flags&512&&cu(e)}catch(y){We(e,e.return,y)}}if(e===t){we=null;break}if(r=e.sibling,r!==null){r.return=e.return,we=r;break}we=e.return}}function sm(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var r=e.sibling;if(r!==null){r.return=e.return,we=r;break}we=e.return}}function nm(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Oo(4,e)}catch(c){We(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){We(e,a,c)}}var i=e.return;try{cu(e)}catch(c){We(e,i,c)}break;case 5:var o=e.return;try{cu(e)}catch(c){We(e,o,c)}}}catch(c){We(e,e.return,c)}if(e===t){we=null;break}var l=e.sibling;if(l!==null){l.return=e.return,we=l;break}we=e.return}}var Vw=Math.ceil,oo=Fr.ReactCurrentDispatcher,gd=Fr.ReactCurrentOwner,Ht=Fr.ReactCurrentBatchConfig,_e=0,at=null,Qe=null,ct=0,Rt=0,cn=cs(0),st=0,Fa=null,Ds=0,Do=0,xd=0,ya=null,Ct=null,yd=0,kn=1/0,Nr=null,lo=!1,fu=null,es=null,di=!1,Kr=null,co=0,wa=0,mu=null,Fi=-1,Li=0;function Et(){return _e&6?Ye():Fi!==-1?Fi:Fi=Ye()}function ts(t){return t.mode&1?_e&2&&ct!==0?ct&-ct:kw.transition!==null?(Li===0&&(Li=wp()),Li):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:kp(t.type)),t):1}function ir(t,e,r,n){if(50<wa)throw wa=0,mu=null,Error(he(185));za(t,r,n),(!(_e&2)||t!==at)&&(t===at&&(!(_e&2)&&(Do|=r),st===4&&Hr(t,ct)),It(t,n),r===1&&_e===0&&!(e.mode&1)&&(kn=Ye()+500,Io&&us()))}function It(t,e){var r=t.callbackNode;ky(t,e);var n=Gi(t,t===at?ct:0);if(n===0)r!==null&&mf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&mf(r),e===1)t.tag===0?Sw(am.bind(null,t)):Hp(am.bind(null,t)),bw(function(){!(_e&6)&&us()}),r=null;else{switch(vp(n)){case 1:r=Wu;break;case 4:r=xp;break;case 16:r=Hi;break;case 536870912:r=yp;break;default:r=Hi}r=V0(r,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function F0(t,e){if(Fi=-1,Li=0,_e&6)throw Error(he(327));var r=t.callbackNode;if(pn()&&t.callbackNode!==r)return null;var n=Gi(t,t===at?ct:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=uo(t,n);else{e=n;var a=_e;_e|=2;var i=M0();(at!==t||ct!==e)&&(Nr=null,kn=Ye()+500,_s(t,e));do try{Gw();break}catch(l){L0(t,l)}while(!0);sd(),oo.current=i,_e=a,Qe!==null?e=0:(at=null,ct=0,e=st)}if(e!==0){if(e===2&&(a=zc(t),a!==0&&(n=a,e=hu(t,a))),e===1)throw r=Fa,_s(t,0),Hr(t,n),It(t,Ye()),r;if(e===6)Hr(t,n);else{if(a=t.current.alternate,!(n&30)&&!Ww(a)&&(e=uo(t,n),e===2&&(i=zc(t),i!==0&&(n=i,e=hu(t,i))),e===1))throw r=Fa,_s(t,0),Hr(t,n),It(t,Ye()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(he(345));case 2:xs(t,Ct,Nr);break;case 3:if(Hr(t,n),(n&130023424)===n&&(e=yd+500-Ye(),10<e)){if(Gi(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Et(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Kc(xs.bind(null,t,Ct,Nr),e);break}xs(t,Ct,Nr);break;case 4:if(Hr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-ar(n);i=1<<o,o=e[o],o>a&&(a=o),n&=~i}if(n=a,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vw(n/1960))-n,10<n){t.timeoutHandle=Kc(xs.bind(null,t,Ct,Nr),n);break}xs(t,Ct,Nr);break;case 5:xs(t,Ct,Nr);break;default:throw Error(he(329))}}}return It(t,Ye()),t.callbackNode===r?F0.bind(null,t):null}function hu(t,e){var r=ya;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=uo(t,e),t!==2&&(e=Ct,Ct=r,e!==null&&pu(e)),t}function pu(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Ww(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!lr(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~xd,e&=~Do,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ar(e),n=1<<r;t[r]=-1,e&=~n}}function am(t){if(_e&6)throw Error(he(327));pn();var e=Gi(t,0);if(!(e&1))return It(t,Ye()),null;var r=uo(t,e);if(t.tag!==0&&r===2){var n=zc(t);n!==0&&(e=n,r=hu(t,n))}if(r===1)throw r=Fa,_s(t,0),Hr(t,e),It(t,Ye()),r;if(r===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,Ct,Nr),It(t,Ye()),null}function wd(t,e){var r=_e;_e|=1;try{return t(e)}finally{_e=r,_e===0&&(kn=Ye()+500,Io&&us())}}function Fs(t){Kr!==null&&Kr.tag===0&&!(_e&6)&&pn();var e=_e;_e|=1;var r=Ht.transition,n=Ie;try{if(Ht.transition=null,Ie=1,t)return t()}finally{Ie=n,Ht.transition=r,_e=e,!(_e&6)&&us()}}function vd(){Rt=cn.current,Be(cn)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vw(r)),Qe!==null)for(r=Qe.return;r!==null;){var n=r;switch(ed(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Qi();break;case 3:En(),Be(At),Be(wt),cd();break;case 5:ld(n);break;case 4:En();break;case 13:Be(Ue);break;case 19:Be(Ue);break;case 10:nd(n.type._context);break;case 22:case 23:vd()}r=r.return}if(at=t,Qe=t=rs(t.current,null),ct=Rt=e,st=0,Fa=null,xd=Do=Ds=0,Ct=ya=null,bs!==null){for(e=0;e<bs.length;e++)if(r=bs[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}bs=null}return t}function L0(t,e){do{var r=Qe;try{if(sd(),Ri.current=io,ao){for(var n=$e.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ao=!1}if(Os=0,nt=rt=$e=null,ga=!1,Ra=0,gd.current=null,r===null||r.return===null){st=1,Fa=e,Qe=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Gf(o);if(h!==null){h.flags&=-257,qf(h,o,l,i,e),h.mode&1&&Hf(i,u,e),e=h,c=u;var v=e.updateQueue;if(v===null){var b=new Set;b.add(c),e.updateQueue=b}else v.add(c);break e}else{if(!(e&1)){Hf(i,u,e),bd();break e}c=Error(he(426))}}else if(ze&&l.mode&1){var S=Gf(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),qf(S,o,l,i,e),td(Sn(c,l));break e}}i=c=Sn(c,l),st!==4&&(st=2),ya===null?ya=[i]:ya.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=v0(i,c,e);Bf(i,p);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(es===null||!es.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=b0(i,l,e);Bf(i,T);break e}}i=i.return}while(i!==null)}z0(r)}catch(O){e=O,Qe===r&&r!==null&&(Qe=r=r.return);continue}break}while(!0)}function M0(){var t=oo.current;return oo.current=io,t===null?io:t}function bd(){(st===0||st===3||st===2)&&(st=4),at===null||!(Ds&268435455)&&!(Do&268435455)||Hr(at,ct)}function uo(t,e){var r=_e;_e|=2;var n=M0();(at!==t||ct!==e)&&(Nr=null,_s(t,e));do try{Hw();break}catch(a){L0(t,a)}while(!0);if(sd(),_e=r,oo.current=n,Qe!==null)throw Error(he(261));return at=null,ct=0,st}function Hw(){for(;Qe!==null;)B0(Qe)}function Gw(){for(;Qe!==null&&!xy();)B0(Qe)}function B0(t){var e=$0(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?z0(t):Qe=e,gd.current=null}function z0(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bw(r,e),r!==null){r.flags&=32767,Qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Qe=null;return}}else if(r=Mw(r,e,Rt),r!==null){Qe=r;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);st===0&&(st=5)}function xs(t,e,r){var n=Ie,a=Ht.transition;try{Ht.transition=null,Ie=1,qw(t,e,r,n)}finally{Ht.transition=a,Ie=n}return null}function qw(t,e,r,n){do pn();while(Kr!==null);if(_e&6)throw Error(he(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Cy(t,i),t===at&&(Qe=at=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||di||(di=!0,V0(Hi,function(){return pn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var o=Ie;Ie=1;var l=_e;_e|=4,gd.current=null,Uw(t,r),O0(r,t),mw(Gc),qi=!!Hc,Gc=Hc=null,t.current=r,$w(r),yy(),_e=l,Ie=o,Ht.transition=i}else t.current=r;if(di&&(di=!1,Kr=t,co=a),i=t.pendingLanes,i===0&&(es=null),by(r.stateNode),It(t,Ye()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(lo)throw lo=!1,t=fu,fu=null,t;return co&1&&t.tag!==0&&pn(),i=t.pendingLanes,i&1?t===mu?wa++:(wa=0,mu=t):wa=0,us(),null}function pn(){if(Kr!==null){var t=vp(co),e=Ht.transition,r=Ie;try{if(Ht.transition=null,Ie=16>t?16:t,Kr===null)var n=!1;else{if(t=Kr,Kr=null,co=0,_e&6)throw Error(he(331));var a=_e;for(_e|=4,we=t.current;we!==null;){var i=we,o=i.child;if(we.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(we=u;we!==null;){var f=we;switch(f.tag){case 0:case 11:case 15:xa(8,f,i)}var g=f.child;if(g!==null)g.return=f,we=g;else for(;we!==null;){f=we;var y=f.sibling,h=f.return;if(I0(f),f===u){we=null;break}if(y!==null){y.return=h,we=y;break}we=h}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}we=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,we=o;else e:for(;we!==null;){if(i=we,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xa(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,we=p;break e}we=i.return}}var x=t.current;for(we=x;we!==null;){o=we;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,we=w;else e:for(o=x;we!==null;){if(l=we,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oo(9,l)}}catch(O){We(l,l.return,O)}if(l===o){we=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,we=T;break e}we=l.return}}if(_e=a,us(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(ko,t)}catch{}n=!0}return n}finally{Ie=r,Ht.transition=e}}return!1}function im(t,e,r){e=Sn(r,e),e=v0(t,e,1),t=Zr(t,e,1),e=Et(),t!==null&&(za(t,1,e),It(t,e))}function We(t,e,r){if(t.tag===3)im(t,t,r);else for(;e!==null;){if(e.tag===3){im(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(es===null||!es.has(n))){t=Sn(r,t),t=b0(e,t,1),e=Zr(e,t,1),t=Et(),e!==null&&(za(e,1,t),It(e,t));break}}e=e.return}}function Kw(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&r,at===t&&(ct&r)===r&&(st===4||st===3&&(ct&130023424)===ct&&500>Ye()-yd?_s(t,0):xd|=r),It(t,e)}function U0(t,e){e===0&&(t.mode&1?(e=ti,ti<<=1,!(ti&130023424)&&(ti=4194304)):e=1);var r=Et();t=Rr(t,e),t!==null&&(za(t,e,r),It(t,r))}function Yw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),U0(t,r)}function Xw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(he(314))}n!==null&&n.delete(e),U0(t,r)}var $0;$0=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)_t=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _t=!1,Lw(t,e,r);_t=!!(t.flags&131072)}else _t=!1,ze&&e.flags&1048576&&Gp(e,eo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Di(t,e),t=e.pendingProps;var a=bn(e,wt.current);hn(e,r),a=dd(null,e,n,t,a,r);var i=fd();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(n)?(i=!0,Ji(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,id(e),a.updater=Ro,e.stateNode=a,a._reactInternals=e,tu(e,n,t,r),e=nu(null,e,n,!0,i,r)):(e.tag=0,ze&&i&&Zu(e),Nt(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Di(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Jw(n),t=er(n,t),a){case 0:e=su(null,e,n,t,r);break e;case 1:e=Xf(null,e,n,t,r);break e;case 11:e=Kf(null,e,n,t,r);break e;case 14:e=Yf(null,e,n,er(n.type,t),r);break e}throw Error(he(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:er(n,a),su(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:er(n,a),Xf(t,e,n,a,r);case 3:e:{if(S0(e),t===null)throw Error(he(387));n=e.pendingProps,i=e.memoizedState,a=i.element,Jp(t,e),so(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Sn(Error(he(423)),e),e=Qf(t,e,n,r,a);break e}else if(n!==a){a=Sn(Error(he(424)),e),e=Qf(t,e,n,r,a);break e}else for(Dt=Jr(e.stateNode.containerInfo.firstChild),Ft=e,ze=!0,rr=null,r=Xp(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nn(),n===a){e=Or(t,e,r);break e}Nt(t,e,n,r)}e=e.child}return e;case 5:return Zp(e),t===null&&Jc(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,qc(n,a)?o=null:i!==null&&qc(n,i)&&(e.flags|=32),E0(t,e),Nt(t,e,o,r),e.child;case 6:return t===null&&Jc(e),null;case 13:return k0(t,e,r);case 4:return od(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=jn(e,null,n,r):Nt(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:er(n,a),Kf(t,e,n,a,r);case 7:return Nt(t,e,e.pendingProps,r),e.child;case 8:return Nt(t,e,e.pendingProps.children,r),e.child;case 12:return Nt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,Le(to,n._currentValue),n._currentValue=o,i!==null)if(lr(i.value,o)){if(i.children===a.children&&!At.current){e=Or(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ar(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Zc(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(he(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Zc(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,hn(e,r),a=qt(a),n=n(a),e.flags|=1,Nt(t,e,n,r),e.child;case 14:return n=e.type,a=er(n,e.pendingProps),a=er(n.type,a),Yf(t,e,n,a,r);case 15:return N0(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:er(n,a),Di(t,e),e.tag=1,Tt(n)?(t=!0,Ji(e)):t=!1,hn(e,r),w0(e,n,a),tu(e,n,a,r),nu(null,e,n,!0,t,r);case 19:return C0(t,e,r);case 22:return j0(t,e,r)}throw Error(he(156,e.tag))};function V0(t,e){return gp(t,e)}function Qw(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,r,n){return new Qw(t,e,r,n)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jw(t){if(typeof t=="function")return Nd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uu)return 11;if(t===$u)return 14}return 2}function rs(t,e){var r=t.alternate;return r===null?(r=Wt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Mi(t,e,r,n,a,i){var o=2;if(n=t,typeof t=="function")Nd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Js:return As(r.children,a,i,e);case zu:o=8,a|=8;break;case Sc:return t=Wt(12,r,e,a|2),t.elementType=Sc,t.lanes=i,t;case kc:return t=Wt(13,r,e,a),t.elementType=kc,t.lanes=i,t;case Cc:return t=Wt(19,r,e,a),t.elementType=Cc,t.lanes=i,t;case Zh:return Fo(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qh:o=10;break e;case Jh:o=9;break e;case Uu:o=11;break e;case $u:o=14;break e;case $r:o=16,n=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Wt(o,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function As(t,e,r,n){return t=Wt(7,t,n,e),t.lanes=r,t}function Fo(t,e,r,n){return t=Wt(22,t,n,e),t.elementType=Zh,t.lanes=r,t.stateNode={isHidden:!1},t}function jl(t,e,r){return t=Wt(6,t,null,e),t.lanes=r,t}function El(t,e,r){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zw(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jd(t,e,r,n,a,i,o,l,c){return t=new Zw(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(i),t}function ev(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function W0(t){if(!t)return as;t=t._reactInternals;e:{if(Vs(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var r=t.type;if(Tt(r))return Wp(t,r,e)}return e}function H0(t,e,r,n,a,i,o,l,c){return t=jd(r,n,!0,t,a,i,o,l,c),t.context=W0(null),r=t.current,n=Et(),a=ts(r),i=Ar(n,a),i.callback=e??null,Zr(r,i,a),t.current.lanes=a,za(t,a,n),It(t,n),t}function Lo(t,e,r,n){var a=e.current,i=Et(),o=ts(a);return r=W0(r),e.context===null?e.context=r:e.pendingContext=r,e=Ar(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zr(a,e,o),t!==null&&(ir(t,a,o,i),Pi(t,a,o)),o}function fo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function om(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ed(t,e){om(t,e),(t=t.alternate)&&om(t,e)}function tv(){return null}var G0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sd(t){this._internalRoot=t}Mo.prototype.render=Sd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Lo(t,e,null,null)};Mo.prototype.unmount=Sd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fs(function(){Lo(null,t,null,null)}),e[Pr]=null}};function Mo(t){this._internalRoot=t}Mo.prototype.unstable_scheduleHydration=function(t){if(t){var e=jp();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wr.length&&e!==0&&e<Wr[r].priority;r++);Wr.splice(r,0,t),r===0&&Sp(t)}};function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lm(){}function rv(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=fo(o);i.call(u)}}var o=H0(e,n,t,0,null,!1,!1,"",lm);return t._reactRootContainer=o,t[Pr]=o.current,_a(t.nodeType===8?t.parentNode:t),Fs(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=fo(c);l.call(u)}}var c=jd(t,0,!1,null,null,!1,!1,"",lm);return t._reactRootContainer=c,t[Pr]=c.current,_a(t.nodeType===8?t.parentNode:t),Fs(function(){Lo(e,c,r,n)}),c}function zo(t,e,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=fo(o);l.call(c)}}Lo(e,o,t,a)}else o=rv(r,e,t,a,n);return fo(o)}bp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=la(e.pendingLanes);r!==0&&(Hu(e,r|1),It(e,Ye()),!(_e&6)&&(kn=Ye()+500,us()))}break;case 13:Fs(function(){var n=Rr(t,1);if(n!==null){var a=Et();ir(n,t,1,a)}}),Ed(t,1)}};Gu=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var r=Et();ir(e,t,134217728,r)}Ed(t,134217728)}};Np=function(t){if(t.tag===13){var e=ts(t),r=Rr(t,e);if(r!==null){var n=Et();ir(r,t,e,n)}Ed(t,e)}};jp=function(){return Ie};Ep=function(t,e){var r=Ie;try{return Ie=t,e()}finally{Ie=r}};Lc=function(t,e,r){switch(e){case"input":if(Tc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=To(n);if(!a)throw Error(he(90));tp(n),Tc(n,a)}}}break;case"textarea":sp(t,r);break;case"select":e=r.value,e!=null&&un(t,!!r.multiple,e,!1)}};up=wd;dp=Fs;var sv={usingClientEntryPoint:!1,Events:[$a,rn,To,lp,cp,wd]},ta={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nv={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hp(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fi.isDisabled&&fi.supportsFiber)try{ko=fi.inject(nv),xr=fi}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sv;Mt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(e))throw Error(he(200));return ev(t,e,null,r)};Mt.createRoot=function(t,e){if(!kd(t))throw Error(he(299));var r=!1,n="",a=G0;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=jd(t,1,!1,null,null,r,!1,n,a),t[Pr]=e.current,_a(t.nodeType===8?t.parentNode:t),new Sd(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=hp(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Fs(t)};Mt.hydrate=function(t,e,r){if(!Bo(e))throw Error(he(200));return zo(null,t,e,!0,r)};Mt.hydrateRoot=function(t,e,r){if(!kd(t))throw Error(he(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=G0;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=H0(e,null,t,1,r??null,a,!1,i,o),t[Pr]=e.current,_a(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Mo(e)};Mt.render=function(t,e,r){if(!Bo(e))throw Error(he(200));return zo(null,t,e,!1,r)};Mt.unmountComponentAtNode=function(t){if(!Bo(t))throw Error(he(40));return t._reactRootContainer?(Fs(function(){zo(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};Mt.unstable_batchedUpdates=wd;Mt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Bo(r))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return zo(t,e,r,!1,n)};Mt.version="18.3.1-next-f1338f8080-20240426";function q0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q0)}catch(t){console.error(t)}}q0(),qh.exports=Mt;var av=qh.exports,K0,cm=av;K0=cm.createRoot,cm.hydrateRoot;const iv="modulepreload",ov=function(t){return"/"+t},um={},kr=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=ov(c),c in um)return;um[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":iv,u||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),u)return new Promise((y,h)=>{g.addEventListener("load",y),g.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},lv="";class cv{constructor(){this.token=null,this.baseURL=lv,this.token=localStorage.getItem("nup_aim_auth_token")}getToken(){return this.token=localStorage.getItem("nup_aim_auth_token"),this.token}setAuthToken(e){this.token=e,e?localStorage.setItem("nup_aim_auth_token",e):localStorage.removeItem("nup_aim_auth_token")}async request(e,r={}){const n=`${this.baseURL}${e}`,a={"Content-Type":"application/json",...r.headers||{}},i=this.getToken();i&&(a.Authorization=`Bearer ${i}`);try{const o=await fetch(n,{...r,headers:a}),l=o.headers.get("content-type"),c=l&&l.includes("application/json");let u=null;if(c){const f=await o.text();if(f&&f.trim())try{u=JSON.parse(f)}catch(g){return console.error("JSON parse error:",g),{success:!1,error:"Invalid JSON response from server"}}}return o.ok?{success:!0,data:u}:{success:!1,error:(u==null?void 0:u.error)||`HTTP ${o.status}: ${o.statusText}`}}catch(o){return console.error("API Request failed:",o),{success:!1,error:o instanceof Error?o.message:"Network error occurred"}}}async healthCheck(){return this.request("/health")}async getAuthMode(){const e=await this.request("/api/auth/mode");return e.success&&e.data?e.data:{mode:"local",ssoLoginUrl:null,ssoLogoutUrl:null}}async login(e,r){var a;const n=await this.request("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:r})});return n.success&&((a=n.data)!=null&&a.token)&&this.setAuthToken(n.data.token),n}async register(e){return this.request("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async verifyEmail(e){return this.request("/api/auth/verify-email",{method:"POST",body:JSON.stringify({token:e})})}async resendVerificationEmail(e){return this.request("/api/auth/resend-verification",{method:"POST",body:JSON.stringify({email:e})})}async getProfiles(){return this.request("/api/profiles")}async getProjects(){return this.request("/api/projects")}async createProject(e){return this.request("/api/projects",{method:"POST",body:JSON.stringify(e)})}async getAnalyses(){return this.request("/api/analyses")}async createAnalysis(e){return this.request("/api/analyses",{method:"POST",body:JSON.stringify(e)})}async updateAnalysis(e,r){return this.request(`/api/analyses/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteAnalysis(e){return this.request(`/api/analyses/${e}`,{method:"DELETE"})}async initializeDatabase(){return this.request("/api/db/init",{method:"POST"})}logout(){this.setAuthToken(null)}async get(e){const r=await this.request(e,{method:"GET"});if(!r.success)throw new Error(r.error||"Request failed");return r.data}async post(e,r){const n=await this.request(e,{method:"POST",body:r?JSON.stringify(r):void 0});if(!n.success)throw new Error(n.error||"Request failed");return n.data}async put(e,r){const n=await this.request(e,{method:"PUT",body:r?JSON.stringify(r):void 0});if(!n.success)throw new Error(n.error||"Request failed");return n.data}async delete(e){const r=await this.request(e,{method:"DELETE"});if(!r.success)throw new Error(r.error||"Request failed");return r.data}}const Je=new cv,uv=Object.freeze(Object.defineProperty({__proto__:null,apiClient:Je,default:Je},Symbol.toStringTag,{value:"Module"})),Y0=Q.createContext(void 0),ds=()=>{const t=Q.useContext(Y0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},dv=30*60*1e3,fv=60*1e3,Sl="nup_aim_last_activity",mv=({children:t})=>{const[e,r]=Q.useState(null),[n,a]=Q.useState(null),[i,o]=Q.useState(!0),l=()=>{const p=Date.now();localStorage.setItem(Sl,p.toString())},c=()=>{const p=localStorage.getItem(Sl);return p?Date.now()-parseInt(p)>dv:!0},u=()=>{Je.logout(),localStorage.removeItem(Sl),localStorage.removeItem("nup_aim_current_user"),r(null),a(null)},f=()=>{e&&c()&&(console.log(" Session expired due to inactivity"),u(),alert("Sua sesso expirou por inatividade. Faa login novamente."))};Q.useEffect(()=>{const p=["mousedown","mousemove","keypress","scroll","touchstart","click"],x=()=>{e&&l()};p.forEach(T=>{document.addEventListener(T,x,!0)});const w=setInterval(f,fv);return()=>{p.forEach(T=>{document.removeEventListener(T,x,!0)}),clearInterval(w)}},[e]),Q.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("nup_aim_auth_token")){o(!1);return}if(c()){console.log(" Session expired, clearing data"),u(),o(!1);return}const w=localStorage.getItem("nup_aim_current_user");if(w){const T=JSON.parse(w);r(T);const O={id:"admin-profile",name:"Administrador",description:"Perfil de administrador com acesso completo",isDefault:!1,createdAt:new Date().toISOString(),permissions:[{id:"1",module:"ANALYSIS",action:"CREATE",allowed:!0},{id:"2",module:"ANALYSIS",action:"EDIT",allowed:!0},{id:"3",module:"ANALYSIS",action:"DELETE",allowed:!0},{id:"4",module:"ANALYSIS",action:"VIEW",allowed:!0},{id:"5",module:"PROJECT",action:"CREATE",allowed:!0},{id:"6",module:"PROJECT",action:"EDIT",allowed:!0},{id:"7",module:"PROJECT",action:"DELETE",allowed:!0},{id:"8",module:"PROJECT",action:"VIEW",allowed:!0}]};a(O),l(),console.log(" Session restored for:",T.username)}}catch(x){console.error("Error initializing auth:",x),u()}finally{o(!1)}})()},[]);const S={user:e,profile:n,login:async(p,x)=>{console.log(" Starting login process..."),console.log(" User:",p);try{const w=await Je.login(p,x);if(w.success&&w.data){console.log(" Authentication successful");const T=w.data.user;r(T);const O={id:"admin-profile",name:"Administrador",description:"Perfil de administrador com acesso completo",isDefault:!1,createdAt:new Date().toISOString(),permissions:[{id:"1",module:"ANALYSIS",action:"CREATE",allowed:!0},{id:"2",module:"ANALYSIS",action:"EDIT",allowed:!0},{id:"3",module:"ANALYSIS",action:"DELETE",allowed:!0},{id:"4",module:"ANALYSIS",action:"VIEW",allowed:!0},{id:"5",module:"PROJECT",action:"CREATE",allowed:!0},{id:"6",module:"PROJECT",action:"EDIT",allowed:!0},{id:"7",module:"PROJECT",action:"DELETE",allowed:!0},{id:"8",module:"PROJECT",action:"VIEW",allowed:!0}]};return a(O),localStorage.setItem("nup_aim_current_user",JSON.stringify(T)),l(),{success:!0}}return console.log(" Invalid credentials"),{success:!1,message:w.error||"Usurio ou senha invlidos"}}catch(w){return console.error(" Critical error in login:",w),{success:!1,message:"Erro ao fazer login. Tente novamente."}}},logout:()=>{console.log(" Logging out and clearing session"),u()},hasPermission:(p,x)=>{if(!n)return!1;const w=p.toUpperCase(),T=x.toUpperCase(),O=n.permissions.find(G=>G.module.toUpperCase()===w&&G.action.toUpperCase()===T);return(O==null?void 0:O.allowed)||!1},isAuthenticated:!!e,verifyEmail:async p=>{try{const x=await Je.verifyEmail(p);return x.success?{success:!0,message:"Email verificado com sucesso!"}:{success:!1,message:x.error||"Erro ao verificar email"}}catch(x){return console.error(" Error in email verification:",x),{success:!1,message:"Erro ao verificar email"}}},resendVerificationEmail:async p=>{try{const x=await Je.resendVerificationEmail(p);return x.success?{success:!0,message:"Email de verificao reenviado!"}:{success:!1,message:x.error||"Erro ao reenviar email"}}catch(x){return console.error(" Error resending email:",x),{success:!1,message:"Erro ao reenviar email"}}}};return i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando sistema..."})]})}):s.jsx(Y0.Provider,{value:S,children:t})},X0=Q.createContext(void 0),hv=({children:t})=>{const[e,r]=Q.useState(()=>{if(typeof window<"u"){const l=localStorage.getItem("nup-aim-theme");if(l&&["light","dark","system"].includes(l))return l}return"system"}),[n,a]=Q.useState(!1);Q.useEffect(()=>{const l=()=>{if(e==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches;a(f)}else a(e==="dark")};l();const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{e==="system"&&l()};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[e]),Q.useEffect(()=>{const l=document.documentElement;n?(l.setAttribute("data-theme","dark"),l.classList.add("dark")):(l.setAttribute("data-theme","light"),l.classList.remove("dark"))},[n]);const i=l=>{r(l),localStorage.setItem("nup-aim-theme",l)},o=()=>{i(n?"light":"dark")};return s.jsx(X0.Provider,{value:{theme:e,setTheme:i,isDark:n,toggleTheme:o},children:t})},pv=()=>{const t=Q.useContext(X0);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(t,e)=>{const r=Q.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},f)=>Q.createElement("svg",{ref:f,...gv,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${xv(t)}`,l].join(" "),...u},[...e.map(([g,y])=>Q.createElement(g,y)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ye("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ye("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=ye("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ye("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=ye("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ye("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ye("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=ye("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ye("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ye("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ye("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ye("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=ye("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=ye("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=ye("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Lv=({toast:t,onDismiss:e})=>{const[r,n]=Q.useState(!1),[a,i]=Q.useState(!1);Q.useEffect(()=>{requestAnimationFrame(()=>n(!0));const u=t.duration||5e3,f=setTimeout(()=>{o()},u);return()=>clearTimeout(f)},[t.id,t.duration]);const o=()=>{i(!0),setTimeout(()=>e(t.id),300)},l={success:s.jsx(Ze,{className:"w-5 h-5"}),error:s.jsx(Td,{className:"w-5 h-5"}),warning:s.jsx(is,{className:"w-5 h-5"}),info:s.jsx(Gt,{className:"w-5 h-5"}),ai:s.jsx(po,{className:"w-5 h-5"})},c={success:"bg-gradient-to-r from-success-500 to-success-600 text-white shadow-glow-success",error:"bg-gradient-to-r from-danger-500 to-danger-600 text-white shadow-glow-danger",warning:"bg-gradient-to-r from-warning-400 to-warning-500 text-white shadow-glow-warning",info:"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-glow-primary",ai:"bg-gradient-to-r from-secondary-500 to-primary-500 text-white"};return s.jsxs("div",{className:`
        relative flex items-start gap-3 p-4 rounded-xl min-w-[320px] max-w-md
        ${c[t.type]}
        transition-all duration-300 ease-out
        ${r&&!a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
      `,children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l[t.type]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-sm",children:t.title}),t.message&&s.jsx("p",{className:"text-sm opacity-90 mt-0.5",children:t.message}),t.action&&s.jsx("button",{onClick:()=>{var u;(u=t.action)==null||u.onClick(),o()},className:"mt-2 text-sm font-medium underline underline-offset-2 hover:opacity-80 transition-opacity",children:t.action.label})]}),s.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/20 rounded-b-xl overflow-hidden",children:s.jsx("div",{className:"h-full bg-white/40 rounded-b-xl",style:{animation:`progress ${t.duration||5e3}ms linear forwards`}})})]})},Mv=({toasts:t,onDismiss:e})=>s.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3",children:t.map(r=>s.jsx(Lv,{toast:r,onDismiss:e},r.id))}),ag=Q.createContext(void 0),Bv=({children:t})=>{const[e,r]=Q.useState([]),n=Q.useCallback(c=>{const u=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f={...c,id:u};r(g=>[...g,f])},[]),a=Q.useCallback(c=>{r(u=>u.filter(f=>f.id!==c))},[]),i=Q.useCallback(()=>{r([])},[]),o=c=>(u,f)=>{n({type:c,title:u,message:f})},l={showToast:n,success:o("success"),error:o("error"),warning:o("warning"),info:o("info"),ai:o("ai"),dismissToast:a,dismissAll:i};return s.jsxs(ag.Provider,{value:l,children:[t,s.jsx(Mv,{toasts:e,onDismiss:a})]})},zv=()=>{const t=Q.useContext(ag);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},Uv=()=>{const[t,e]=Q.useState(""),[r,n]=Q.useState(""),[a,i]=Q.useState(""),[o,l]=Q.useState(!1),[c,u]=Q.useState(!1),[f,g]=Q.useState(""),[y,h]=Q.useState(!1),[v,b]=Q.useState(""),[S,p]=Q.useState(""),[x,w]=Q.useState(""),[T,O]=Q.useState(!1),G=Q.useRef(null),{login:z,resendVerificationEmail:K}=ds(),[I,se]=Q.useState({mode:"local",ssoLoginUrl:null,ssoLogoutUrl:null}),[ae,P]=Q.useState(!0),[H,C]=Q.useState(!1),[B,q]=Q.useState({username:"",email:"",password:"",confirmPassword:""}),[F,V]=Q.useState({}),[D,J]=Q.useState(!1),[U,A]=Q.useState(!1);Q.useEffect(()=>{Y(),re()},[]);const Y=async()=>{try{const M=await fetch("/api/auth/mode");if(M.ok){const R=await M.json();if(se(R),R.mode==="sso"&&R.ssoLoginUrl){console.log(" SSO mode detected, redirecting to NuPIdentity..."),window.location.href=R.ssoLoginUrl;return}}}catch(M){console.error("Failed to check auth mode:",M)}finally{P(!1)}},X=()=>{I.ssoLoginUrl&&(window.location.href=I.ssoLoginUrl)},re=()=>{const M=G.current;if(!M)return;const R=M.getContext("2d");if(!R)return;R.clearRect(0,0,M.width,M.height);const L="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789";let ne="";for(let N=0;N<6;N++)ne+=L.charAt(Math.floor(Math.random()*L.length));p(ne),R.fillStyle="#f3f4f6",R.fillRect(0,0,M.width,M.height);for(let N=0;N<100;N++)R.fillStyle=`rgba(${Math.random()*100}, ${Math.random()*100}, ${Math.random()*100}, 0.2)`,R.beginPath(),R.arc(Math.random()*M.width,Math.random()*M.height,Math.random()*2,0,Math.PI*2),R.fill();for(let N=0;N<4;N++)R.strokeStyle=`rgba(${Math.random()*100}, ${Math.random()*100}, ${Math.random()*100}, 0.3)`,R.lineWidth=1,R.beginPath(),R.moveTo(Math.random()*M.width,Math.random()*M.height),R.lineTo(Math.random()*M.width,Math.random()*M.height),R.stroke();R.font="bold 24px Arial",R.fillStyle="#4b5563",R.textAlign="center",R.textBaseline="middle";for(let N=0;N<ne.length;N++){const ie=(N+.5)*(M.width/ne.length),_=M.height/2+(Math.random()*10-5),d=Math.random()*.4-.2;R.save(),R.translate(ie,_),R.rotate(d),R.fillText(ne[N],0,0),R.restore()}},ee=async M=>{var R;if(M.preventDefault(),i(""),O(!1),x!==S){O(!0),re();return}l(!0);try{console.log(" Tentando fazer login..."),console.log(" Usurio:",t);const L=t.trim(),ne=r.trim(),N=await z(L,ne);N.success?console.log(" Login realizado com sucesso!"):(console.log(" Login falhou:",N.message),i(N.message||"Erro ao fazer login"),(R=N.message)!=null&&R.includes("Email no verificado")&&(u(!0),g(t.includes("@")?t:"")))}catch(L){console.error(" Erro no login:",L),i("Erro ao fazer login. Tente novamente.")}finally{l(!1)}},k=async M=>{M.preventDefault(),h(!0),b("");try{const R=await K(f);b(R.message),R.success&&u(!1)}catch{b("Erro ao reenviar email de verificao")}finally{h(!1)}},E=async M=>{M.preventDefault(),V({});const R={};if(B.username.trim()?B.username.length<3&&(R.username="Nome de usurio deve ter pelo menos 3 caracteres"):R.username="Nome de usurio  obrigatrio",B.email.trim()?/\S+@\S+\.\S+/.test(B.email)||(R.email="Email invlido"):R.email="Email  obrigatrio",B.password.trim()?B.password.length<6&&(R.password="Senha deve ter pelo menos 6 caracteres"):R.password="Senha  obrigatria",B.confirmPassword.trim()?B.password!==B.confirmPassword&&(R.confirmPassword="As senhas no coincidem"):R.confirmPassword="Confirmao de senha  obrigatria",Object.keys(R).length>0){V(R);return}J(!0);try{const{apiClient:L}=await kr(async()=>{const{apiClient:N}=await Promise.resolve().then(()=>uv);return{apiClient:N}},void 0),ne=await L.register({username:B.username,email:B.email,password:B.password,profileId:""});ne.success?(A(!0),q({username:"",email:"",password:"",confirmPassword:""})):V({form:ne.error||"Erro ao criar usurio"})}catch(L){console.error("Erro ao registrar usurio:",L),V({form:"Erro ao criar usurio. Tente novamente."})}finally{J(!1)}},Z=()=>{C(!H),i(""),O(!1),V({}),A(!1),re()};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative",children:[s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-[0.03] select-none",children:s.jsx("div",{className:"absolute inset-0 flex flex-wrap content-start",children:Array.from({length:50}).map((M,R)=>s.jsxs("div",{className:"p-4 text-gray-900 text-xs rotate-[-20deg]",children:[s.jsx("div",{children:"NuPTechs"}),s.jsx("div",{className:"text-[8px]",children:"Sua fbrica de softwares inteligentes"})]},R))})}),s.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-600 rounded-lg mx-auto mb-4",children:H?s.jsx(Fv,{className:"w-8 h-8 text-white"}):s.jsx(Av,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"NuP_AIM"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sistema de Anlise de Impacto"}),s.jsxs("div",{className:"mt-1 text-xs text-blue-600 font-medium",children:[s.jsx("span",{children:"NuPTechs"}),s.jsx("span",{className:"mx-1",children:""}),s.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"Sua fbrica de softwares inteligentes"})]})]}),H?s.jsx("div",{className:"mt-8 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Criar Nova Conta"}),s.jsxs("button",{onClick:Z,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(Cn,{className:"w-4 h-4 mr-1"}),"Voltar para Login"]})]}),U?s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mx-auto mb-3",children:s.jsx(js,{className:"w-6 h-6 text-green-600"})}),s.jsx("h4",{className:"text-lg font-medium text-green-800 mb-2",children:"Cadastro Realizado!"}),s.jsxs("p",{className:"text-sm text-green-700 mb-3",children:["Enviamos um email de verificao para ",s.jsx("strong",{children:B.email}),". Por favor, verifique sua caixa de entrada e clique no link para ativar sua conta."]}),s.jsx("button",{onClick:Z,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Voltar para Login"})]}):s.jsxs("form",{onSubmit:E,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome de Usurio *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"register-username",name:"username",type:"text",required:!0,value:B.username,onChange:M=>q({...B,username:M.target.value}),className:`block w-full pl-10 pr-3 py-2 border ${F.username?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`,placeholder:"Digite seu nome de usurio"})]}),F.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(js,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"register-email",name:"email",type:"email",required:!0,value:B.email,onChange:M=>q({...B,email:M.target.value}),className:`block w-full pl-10 pr-3 py-2 border ${F.email?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`,placeholder:"seu.email@exemplo.com"})]}),F.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"register-password",name:"password",type:"password",required:!0,value:B.password,onChange:M=>q({...B,password:M.target.value}),className:`block w-full pl-10 pr-3 py-2 border ${F.password?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`,placeholder:"Mnimo 6 caracteres"})]}),F.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"register-confirm-password",name:"confirmPassword",type:"password",required:!0,value:B.confirmPassword,onChange:M=>q({...B,confirmPassword:M.target.value}),className:`block w-full pl-10 pr-3 py-2 border ${F.confirmPassword?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`,placeholder:"Digite a senha novamente"})]}),F.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.confirmPassword})]}),F.form&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(gt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-800",children:F.form})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Importante:"})," Aps o cadastro, voc receber um email de verificao.  necessrio clicar no link de confirmao para ativar sua conta."]})}),s.jsx("button",{type:"submit",disabled:D,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cadastrando..."]}):"Cadastrar"})]})]})}):ae?s.jsx("div",{className:"mt-8 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),s.jsx("span",{className:"text-gray-600 text-center",children:"Redirecionando para autenticao..."}),s.jsx("span",{className:"text-gray-400 text-sm mt-1",children:"Aguarde um momento"})]})}):I.mode==="sso"?s.jsx("div",{className:"mt-8 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Login via NuPIdentity"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Use sua conta NuPIdentity para acessar o sistema de forma segura."})]}),s.jsxs("button",{type:"button",onClick:X,className:"w-full flex items-center justify-center gap-3 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(tg,{className:"w-5 h-5"}),"Entrar com NuPIdentity"]}),s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:s.jsx("p",{children:"Voc ser redirecionado para o servidor de autenticao"})})]})}):s.jsx("form",{className:"mt-8 space-y-6",onSubmit:ee,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Usurio ou Email"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t,onChange:M=>e(M.target.value.trim()),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Digite seu usurio ou email",autoComplete:"email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Cl,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:M=>n(M.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Digite sua senha"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"captcha",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cdigo de Segurana"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(et,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"captcha",name:"captcha",type:"text",required:!0,value:x,onChange:M=>w(M.target.value),className:`block w-full pl-10 pr-3 py-2 border ${T?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"} rounded-lg transition-colors`,placeholder:"Digite o cdigo"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("canvas",{ref:G,width:"150",height:"40",className:"border border-gray-300 rounded-lg bg-gray-50"}),s.jsx("button",{type:"button",onClick:re,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Gerar novo cdigo",children:s.jsx(Dr,{className:"w-5 h-5"})})]})]}),T&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Cdigo de segurana incorreto"})]}),a&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(gt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-800",children:a})]}),c&&s.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Reenviar Email de Verificao"}),s.jsxs("form",{onSubmit:k,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-1",children:"Email para reenvio"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(js,{className:"h-4 w-4 text-yellow-600"})}),s.jsx("input",{type:"email",required:!0,value:f,onChange:M=>g(M.target.value),className:"block w-full pl-9 pr-3 py-2 text-sm border border-yellow-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"seu.email@exemplo.com"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center px-3 py-2 text-sm bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors disabled:opacity-50",children:[y?s.jsx(Dr,{className:"w-4 h-4 mr-1 animate-spin"}):s.jsx(js,{className:"w-4 h-4 mr-1"}),"Reenviar"]}),s.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-3 py-2 text-sm text-yellow-700 hover:text-yellow-900 transition-colors",children:"Cancelar"})]})]}),v&&s.jsx("p",{className:`text-sm mt-2 ${v.includes("Erro")?"text-red-600":"text-green-600"}`,children:v})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Entrando..."]}):"Entrar"}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("button",{type:"button",onClick:Z,className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:"No tem uma conta? Cadastre-se"})})]})})]})]})},$v=({token:t,onBackToLogin:e})=>{const[r,n]=Q.useState("loading"),[a,i]=Q.useState(""),[o,l]=Q.useState(""),[c,u]=Q.useState(!1),[f,g]=Q.useState(""),{verifyEmail:y,resendVerificationEmail:h}=ds();Q.useEffect(()=>{t?v():(n("error"),i("Token de verificao no fornecido"))},[t]);const v=async()=>{if(t)try{const S=await y(t);n(S.success?"success":"error"),i(S.message)}catch{n("error"),i("Erro ao verificar email")}},b=async S=>{S.preventDefault(),u(!0),g("");try{const p=await h(o);g(p.message)}catch{g("Erro ao reenviar email de verificao")}finally{u(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`flex items-center justify-center w-16 h-16 rounded-lg mx-auto mb-4 ${r==="loading"?"bg-blue-600":r==="success"?"bg-green-600":"bg-red-600"}`,children:[r==="loading"&&s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),r==="success"&&s.jsx(Ze,{className:"w-8 h-8 text-white"}),r==="error"&&s.jsx(Td,{className:"w-8 h-8 text-white"})]}),s.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:[r==="loading"&&"Verificando Email...",r==="success"&&"Email Verificado!",r==="error"&&"Erro na Verificao"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sistema de Anlise de Impacto"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[s.jsx("div",{className:`p-4 rounded-lg ${r==="success"?"bg-green-50 border border-green-200":r==="error"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:s.jsx("p",{className:`text-sm ${r==="success"?"text-green-800":r==="error"?"text-red-800":"text-blue-800"}`,children:a})}),r==="success"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Seu email foi verificado com sucesso! Agora voc pode fazer login no sistema."})}),s.jsxs("button",{onClick:e,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors",children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Voltar para Login"]})]}),r==="error"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"No foi possvel verificar seu email. Voc pode solicitar um novo email de verificao."})}),s.jsxs("form",{onSubmit:b,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email para reenvio"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(js,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"email",required:!0,value:o,onChange:S=>l(S.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"seu.email@exemplo.com"})]})]}),s.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Dr,{className:"w-4 h-4 mr-2 animate-spin"}),"Reenviando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(js,{className:"w-4 h-4 mr-2"}),"Reenviar Email de Verificao"]})})]}),f&&s.jsx("div",{className:`p-3 rounded-lg ${f.includes("Erro")?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:s.jsx("p",{className:`text-sm ${f.includes("Erro")?"text-red-800":"text-green-800"}`,children:f})}),s.jsxs("button",{onClick:e,className:"w-full flex justify-center items-center py-2 px-4 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Voltar para Login"]})]})]})]})})},Vv=({onExtendSession:t,onLogout:e})=>{const[r,n]=Q.useState(300),[a,i]=Q.useState(!1);Q.useEffect(()=>{const c=()=>{const f=localStorage.getItem("nup_aim_last_activity");if(!f)return;const g=7*60*1e3,y=2*60*1e3,h=Date.now()-parseInt(f),v=g-h;v<=y&&v>0?(n(Math.floor(v/1e3)),i(!0)):v<=0?e():i(!1)},u=setInterval(c,1e3);return c(),()=>clearInterval(u)},[e]);const o=()=>{localStorage.setItem("nup_aim_last_activity",Date.now().toString()),i(!1),t()},l=c=>{const u=Math.floor(c/60),f=c%60;return`${u}:${f.toString().padStart(2,"0")}`};return a?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(Ms,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sesso Expirando"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Sua sesso expirar em breve"})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:l(r)}),s.jsx("p",{className:"text-sm text-gray-600",children:'Sua sesso expirar automaticamente por segurana. Clique em "Continuar" para estender sua sesso.'})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:o,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Continuar Sesso"]}),s.jsxs("button",{onClick:e,className:"inline-flex items-center justify-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(sg,{className:"w-4 h-4 mr-2"}),"Sair"]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:"Segurana:"})," Por motivos de segurana, sua sesso expira aps 7 minutos de inatividade."]})})]})}):null},ys={ANALYSIS:{name:"Anlises de Impacto",actions:{CREATE:"Criar",EDIT:"Editar",DELETE:"Excluir",VIEW:"Visualizar",EXPORT:"Exportar",COPY:"Copiar"}},PROJECTS:{name:"Projetos",actions:{CREATE:"Criar",EDIT:"Editar",DELETE:"Excluir",VIEW:"Visualizar",MANAGE:"Gerenciar"}},USERS:{name:"Usurios",actions:{CREATE:"Criar",EDIT:"Editar",DELETE:"Excluir",VIEW:"Visualizar",MANAGE:"Gerenciar"}},PROFILES:{name:"Perfis",actions:{CREATE:"Criar",EDIT:"Editar",DELETE:"Excluir",VIEW:"Visualizar",MANAGE:"Gerenciar"}},DATA:{name:"Dados do Sistema",actions:{MANAGE:"Gerenciar",BACKUP:"Backup e Restaurao",STATUS:"Verificar Status"}}},Wv=(t,e)=>`
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirme seu email - NuP_AIM</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8fafc;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo {
            width: 64px;
            height: 64px;
            background: #2563eb;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }
        .logo svg {
            width: 32px;
            height: 32px;
            color: white;
        }
        h1 {
            color: #1f2937;
            margin: 0 0 8px 0;
            font-size: 24px;
        }
        .subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 14px;
        }
        .content {
            margin: 30px 0;
        }
        .button {
            display: inline-block;
            background: #2563eb;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            margin: 20px 0;
        }
        .button:hover {
            background: #1d4ed8;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            font-size: 12px;
            color: #6b7280;
            text-align: center;
        }
        .warning {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 12px;
            margin: 20px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <svg fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
            </div>
            <h1>NuP_AIM</h1>
            <p class="subtitle">Sistema de Anlise de Impacto</p>
        </div>

        <div class="content">
            <h2>Ol, ${t}!</h2>
            
            <p>Bem-vindo ao <strong>NuP_AIM</strong> - Sistema de Anlise de Impacto!</p>
            
            <p>Para completar seu cadastro e comear a usar o sistema, voc precisa confirmar seu endereo de email clicando no boto abaixo:</p>
            
            <div style="text-align: center;">
                <a href="${e}" class="button">Confirmar Email</a>
            </div>
            
            <p>Ou copie e cole este link no seu navegador:</p>
            <p style="word-break: break-all; background: #f3f4f6; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px;">
                ${e}
            </p>
            
            <div class="warning">
                <strong> Importante:</strong> Este link  vlido por 24 horas. Aps esse perodo, voc precisar solicitar um novo email de verificao.
            </div>
            
            <p>Se voc no solicitou este cadastro, pode ignorar este email com segurana.</p>
        </div>

        <div class="footer">
            <p>Este email foi enviado automaticamente pelo sistema NuP_AIM.</p>
            <p> ${new Date().getFullYear()} NuP_AIM - Sistema de Anlise de Impacto</p>
        </div>
    </div>
</body>
</html>
  `.trim(),Hv=(t,e)=>`
Ol ${t},

Bem-vindo ao NuP_AIM - Sistema de Anlise de Impacto!

Para completar seu cadastro, clique no link abaixo para verificar seu email:

${e}

Este link  vlido por 24 horas.

Se voc no solicitou este cadastro, ignore este email.

Atenciosamente,
Equipe NuP_AIM

---
 ${new Date().getFullYear()} NuP_AIM - Sistema de Anlise de Impacto
  `.trim(),Xs=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",pm=Xs?"/.netlify/functions/send-email":"http://localhost:8888/.netlify/functions/send-email",Gv=async(t,e,r,n)=>{try{console.log(" Enviando email via Netlify Function + SendGrid..."),console.log(`Para: ${t}`),console.log(`Assunto: ${e}`),console.log(`URL da funo: ${pm}`);const a=await fetch(pm,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,html:r,text:n})}),i=await a.json();return a.ok&&i.success?(console.log(" Email enviado com sucesso via Netlify Function!"),{success:!0,message:"Email enviado com sucesso",provider:"Netlify Function + SendGrid"}):(console.error(" Erro da funo Netlify:",i.message),{success:!1,message:i.message||"Erro no envio do email"})}catch(a){return console.error(" Erro de conexo com a funo Netlify:",a),{success:!1,message:"Erro de conexo com o servio de email"}}},qv=async(t,e,r,n)=>{console.log(" [MODO DESENVOLVIMENTO] Simulando envio de email..."),console.log(` Destinatrio: ${t}`),console.log(` Assunto: ${e}`);const a=1500+Math.random()*2e3;if(await new Promise(o=>setTimeout(o,a)),Math.random()>.02)return console.log(" [DEMO] EMAIL ENVIADO COM SUCESSO!"),console.log(" Detalhes do envio:"),console.log(`   Para: ${t}`),console.log(`   Assunto: ${e}`),console.log("   Status: Entregue (Simulado)"),console.log(`   Timestamp: ${new Date().toLocaleString("pt-BR")}`),console.log(""),{success:!0,message:"Email enviado com sucesso (modo desenvolvimento)",provider:"Demo Mode"};{const o=["Servidor SMTP temporariamente indisponvel","Caixa de entrada do destinatrio cheia","Falha na conexo de rede","Email rejeitado pelo servidor de destino"],l=o[Math.floor(Math.random()*o.length)];return console.error(" [DEMO] FALHA NO ENVIO DO EMAIL"),console.error(` Para: ${t}`),console.error(`  Erro: ${l}`),console.error(` Timestamp: ${new Date().toLocaleString("pt-BR")}`),console.error(""),{success:!1,message:`Falha no envio: ${l} (modo desenvolvimento)`}}},Kv=async(t,e)=>{try{console.log(` Preparando email de verificao para: ${t.email}`),console.log(` Modo: ${Xs?"PRODUO (Netlify Function)":"DESENVOLVIMENTO (Simulado)"}`),console.log(` Hostname: ${window.location.hostname}`),console.log(` URL: ${window.location.href}`);const n=`${window.location.origin+window.location.pathname}#/verify-email?token=${e}`;console.log(` Link de verificao: ${n}`);const a="Confirme seu email - NuP_AIM",i=Wv(t.username,n),o=Hv(t.username,n);let l;if(Xs?(console.log(" Enviando email REAL via Netlify Function + SendGrid..."),l=await Gv(t.email,a,i,o)):(console.log(" Usando modo desenvolvimento..."),l=await qv(t.email,a,i,o)),l.success){const c=Xs?` EMAIL DE VERIFICAO ENVIADO!

Para: ${t.email}
Status:  Entregue com sucesso via ${l.provider}

Verifique sua caixa de entrada (e pasta de spam) e clique no link de confirmao.

 O link expira em 24 horas.`:` EMAIL DE VERIFICAO ENVIADO! (MODO DESENVOLVIMENTO)

Para: ${t.email}
Status:  Entregue com sucesso (simulado)

 LINK DE VERIFICAO (Para demonstrao):
${n}

 IMPORTANTE: Em produo, este link seria enviado apenas por email.
Para testar, voc pode copiar o link acima ou verificar o console do navegador (F12).

 O link expira em 24 horas.`;return setTimeout(()=>{alert(c)},100),{success:!0,message:`Email de verificao enviado para ${t.email}${Xs?" via Netlify Function":" (modo desenvolvimento)"}`,provider:l.provider}}else return console.error(" Falha no envio:",l.message),setTimeout(()=>{alert(` ERRO NO ENVIO DO EMAIL

Para: ${t.email}
Erro: ${l.message}

${Xs?"Verifique se a chave do SendGrid est configurada corretamente nas variveis de ambiente do Netlify.":"Erro no modo de desenvolvimento."}`)},100),{success:!1,message:l.message||"Erro desconhecido no envio do email"}}catch(r){return console.error(" Erro crtico ao enviar email de verificao:",r),{success:!1,message:"Erro interno do servidor. Tente novamente mais tarde."}}},Id="nup_aim_users",xo="nup_aim_profiles",yo=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Yv=()=>Math.random().toString(36).substr(2,32)+Date.now().toString(36),gm=(t=!1)=>{const e=[];return Object.entries(ys).forEach(([r,n])=>{Object.entries(n.actions).forEach(([a,i])=>{e.push({id:`${r}_${a}`,module:r,action:a,allowed:t})})}),e},Tn=()=>{try{const t=localStorage.getItem(Id);return t?JSON.parse(t):[]}catch(t){return console.error("Erro ao carregar usurios:",t),[]}},ig=t=>{const e=Tn(),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),localStorage.setItem(Id,JSON.stringify(e))},Xv=t=>{const e=Tn();if(e.length<=1)return!1;const r=e.filter(n=>n.id!==t);return localStorage.setItem(Id,JSON.stringify(r)),!0},In=()=>{try{const t=localStorage.getItem(xo),e=t?JSON.parse(t):[];if(e.length===0){const r={id:yo(),name:"Administrador",description:"Acesso completo a todas as funcionalidades do sistema",permissions:gm(!0),isDefault:!1,createdAt:new Date().toISOString()},n={id:yo(),name:"Usurio Padro",description:"Acesso bsico para criar e visualizar anlises",permissions:gm(!1).map(a=>({...a,allowed:a.module==="ANALYSIS"&&["CREATE","EDIT","VIEW","EXPORT"].includes(a.action)})),isDefault:!0,createdAt:new Date().toISOString()};e.push(r,n),localStorage.setItem(xo,JSON.stringify(e))}return e}catch(t){return console.error("Erro ao carregar perfis:",t),[]}},wu=t=>{const e=In(),r=e.findIndex(n=>n.id===t.id);t.isDefault&&e.forEach(n=>n.isDefault=!1),r>=0?e[r]=t:e.push(t),localStorage.setItem(xo,JSON.stringify(e))},Qv=t=>{const e=In(),r=Tn();if(e.length<=1||r.filter(o=>o.profileId===t).length>0)return!1;const a=e.find(o=>o.id===t);if(a!=null&&a.isDefault){const o=e.find(l=>l.id!==t);o&&(o.isDefault=!0,wu(o))}const i=e.filter(o=>o.id!==t);return localStorage.setItem(xo,JSON.stringify(i)),!0},xm=async t=>{try{console.log(` Preparando email de verificao para: ${t.email}`);const e=Yv(),r=new Date;r.setHours(r.getHours()+24);const n={...t,emailVerificationToken:e,emailVerificationExpires:r.toISOString()};return ig(n),console.log(` Token de verificao gerado: ${e.substring(0,8)}...`),await Kv(t,e)}catch(e){return console.error(" Erro crtico ao enviar email de verificao:",e),{success:!1,message:"Erro interno do servidor. Tente novamente mais tarde."}}},Jv=({onClose:t})=>{const[e,r]=Q.useState([]),[n,a]=Q.useState([]),[i,o]=Q.useState(null),[l,c]=Q.useState(!1),[u,f]=Q.useState({username:"",email:"",password:"",confirmPassword:"",profileId:"",isActive:!0}),[g,y]=Q.useState({}),[h,v]=Q.useState(!1),[b,S]=Q.useState(!1),[p,x]=Q.useState(!1),[w,T]=Q.useState(!1);Q.useEffect(()=>{O()},[]);const O=async()=>{console.log(" Usando localStorage para gerenciamento de usurios"),G()},G=()=>{r(Tn()),a(In()),T(!1)},z=()=>{const B={};return u.username.trim()?u.username.length<3&&(B.username="Nome de usurio deve ter pelo menos 3 caracteres"):B.username="Nome de usurio  obrigatrio",u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(B.email="Email invlido"):B.email="Email  obrigatrio",u.password.trim()?u.password.length<6&&(B.password="Senha deve ter pelo menos 6 caracteres"):B.password="Senha  obrigatria",u.confirmPassword.trim()?u.password!==u.confirmPassword&&(B.confirmPassword="As senhas no coincidem"):B.confirmPassword="Confirmao de senha  obrigatria",u.profileId||(B.profileId="Perfil  obrigatrio"),e.find(V=>V.username.toLowerCase()===u.username.toLowerCase()&&V.id!==i)&&(B.username="J existe um usurio com este nome"),e.find(V=>V.email.toLowerCase()===u.email.toLowerCase()&&V.id!==i)&&(B.email="J existe um usurio com este email"),y(B),Object.keys(B).length===0},K=async()=>{var B,q;if(z()){x(!0);try{if(w){const{createUser:F,updateUser:V}=await kr(async()=>{const{createUser:D,updateUser:J}=await import("./supabaseAuth-BHSNIvez.js");return{createUser:D,updateUser:J}},[]);if(i){const D=await V(i,{username:u.username.trim(),email:u.email.trim(),password:u.password,profileId:u.profileId,isActive:u.isActive});if(!D.success){alert(`Erro ao atualizar usurio: ${D.error}`);return}}else{const D=await F({username:u.username.trim(),email:u.email.trim(),password:u.password,profileId:u.profileId,isActive:u.isActive});if(!D.success){alert(`Erro ao criar usurio: ${D.error}`);return}if(D.user){console.log(" Enviando email de verificao para novo usurio...");const{sendVerificationEmailToUser:J}=await kr(async()=>{const{sendVerificationEmailToUser:A}=await import("./supabaseAuth-BHSNIvez.js");return{sendVerificationEmailToUser:A}},[]),U=await J(D.user);U.success?console.log(" Email de verificao enviado com sucesso"):(console.error(" Falha no envio do email:",U.message),alert(`Usurio criado, mas houve um problema no envio do email: ${U.message}`))}}await O()}else{const F={id:i||yo(),username:u.username.trim(),email:u.email.trim(),password:u.password,profileId:u.profileId,isActive:u.isActive,isEmailVerified:i&&((B=e.find(V=>V.id===i))==null?void 0:B.isEmailVerified)||!1,createdAt:i?((q=e.find(V=>V.id===i))==null?void 0:q.createdAt)||new Date().toISOString():new Date().toISOString()};if(ig(F),!i){console.log(" Enviando email de verificao para novo usurio...");const V=await xm(F);V.success?console.log(" Email de verificao enviado com sucesso"):(console.error(" Falha no envio do email:",V.message),alert(`Usurio criado, mas houve um problema no envio do email: ${V.message}`))}G()}P()}catch(F){console.error("Erro ao salvar usurio:",F),alert("Erro ao salvar usurio. Tente novamente.")}finally{x(!1)}}},I=B=>{o(B.id),f({username:B.username,email:B.email,password:w?"":B.password,confirmPassword:w?"":B.password,profileId:w?B.profile_id:B.profileId,isActive:w?B.is_active:B.isActive}),c(!0),y({})},se=async B=>{const q=e.find(F=>F.id===B);if(q){if(e.length<=1){alert("No  possvel excluir o ltimo usurio. Deve haver pelo menos um usurio cadastrado.");return}if(window.confirm(`Tem certeza que deseja excluir o usurio "${q.username}"?`))try{if(w){const{deleteUser:F}=await kr(async()=>{const{deleteUser:D}=await import("./supabaseAuth-BHSNIvez.js");return{deleteUser:D}},[]),V=await F(B);V.success?await O():alert(`Erro ao excluir usurio: ${V.error}`)}else Xv(B)?G():alert("No foi possvel excluir o usurio.")}catch(F){console.error("Erro ao excluir usurio:",F),alert("Erro ao excluir usurio. Tente novamente.")}}},ae=async B=>{if(w?B.is_email_verified:B.isEmailVerified){alert("Este usurio j possui email verificado.");return}x(!0);try{if(console.log(` Reenviando verificao para: ${B.email}`),w){const{sendVerificationEmailToUser:F}=await kr(async()=>{const{sendVerificationEmailToUser:D}=await import("./supabaseAuth-BHSNIvez.js");return{sendVerificationEmailToUser:D}},[]),V=await F(B);V.success?alert("O e-mail foi reenviado. Favor validar o link"):alert(`Erro: ${V.message}`)}else{const F=await xm(B);F.success?alert("O e-mail foi reenviado. Favor validar o link"):alert(`Erro: ${F.message}`)}}catch(F){console.error("Erro ao reenviar email:",F),alert("Erro ao reenviar email de verificao. Tente novamente.")}finally{x(!1)}},P=()=>{o(null),c(!1),f({username:"",email:"",password:"",confirmPassword:"",profileId:"",isActive:!0}),y({}),v(!1),S(!1)},H=()=>{o(null);const B=n.find(q=>w?q.is_default:q.isDefault);f({username:"",email:"",password:"",confirmPassword:"",profileId:(B==null?void 0:B.id)||"",isActive:!0}),c(!0),y({}),v(!1),S(!1)},C=B=>{const q=n.find(F=>F.id===B);return(q==null?void 0:q.name)||"Perfil no encontrado"};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ma,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gerenciar Usurios"}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${w?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:w?"Supabase":"Local"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:H,disabled:l||p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Novo Usurio"]}),s.jsx("button",{onClick:t,disabled:p,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:s.jsx(tt,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[l&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:i?"Editar Usurio":"Novo Usurio"}),!i&&s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(gt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Verificao de Email Obrigatria"}),s.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Um email de verificao ser enviado automaticamente para o novo usurio. O login s ser permitido aps a confirmao do email."})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome de Usurio *"}),s.jsx("input",{type:"text",value:u.username,onChange:B=>f({...u,username:B.target.value}),disabled:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 ${g.username?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Ex: joao.silva"}),g.username&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.username})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",value:u.email,onChange:B=>f({...u,email:B.target.value}),disabled:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 ${g.email?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Ex: joao.silva@empresa.com"}),g.email&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:h?"text":"password",value:u.password,onChange:B=>f({...u,password:B.target.value}),disabled:p,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 ${g.password?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Mnimo 6 caracteres"}),s.jsx("button",{type:"button",onClick:()=>v(!h),disabled:p,className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:opacity-50",children:h?s.jsx(gu,{className:"w-4 h-4 text-gray-400"}):s.jsx(xu,{className:"w-4 h-4 text-gray-400"})})]}),g.password&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:b?"text":"password",value:u.confirmPassword,onChange:B=>f({...u,confirmPassword:B.target.value}),disabled:p,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 ${g.confirmPassword?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Digite a senha novamente"}),s.jsx("button",{type:"button",onClick:()=>S(!b),disabled:p,className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:opacity-50",children:b?s.jsx(gu,{className:"w-4 h-4 text-gray-400"}):s.jsx(xu,{className:"w-4 h-4 text-gray-400"})})]}),g.confirmPassword&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.confirmPassword})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perfil *"}),s.jsxs("select",{value:u.profileId,onChange:B=>f({...u,profileId:B.target.value}),disabled:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 ${g.profileId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,children:[s.jsx("option",{value:"",children:"Selecione um perfil"}),n.map(B=>s.jsx("option",{value:B.id,children:B.name},B.id))]}),g.profileId&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.profileId})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:u.isActive,onChange:B=>f({...u,isActive:B.target.checked}),disabled:p,className:"mr-2 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Usurio ativo"})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:K,disabled:p,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:p?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i?"Salvando...":"Criando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Salvar"]})}),s.jsxs("button",{onClick:P,disabled:p,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:[s.jsx(tt,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Usurios Cadastrados (",e.length,")"]}),e.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx(Ma,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum usurio cadastrado"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perfil"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email Verificado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltimo Login"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(B=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.username})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-500",children:B.email})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:C(w?B.profile_id:B.profileId)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(w?B.is_active:B.isActive)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(w?B.is_active:B.isActive)?"Ativo":"Inativo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(w?B.is_email_verified:B.isEmailVerified)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:(w?B.is_email_verified:B.isEmailVerified)?"Verificado":"Pendente"}),!(w?B.is_email_verified:B.isEmailVerified)&&s.jsx("button",{onClick:()=>ae(B),disabled:p,className:"text-blue-600 hover:text-blue-800 transition-colors disabled:opacity-50",title:"Reenviar email de verificao",children:s.jsx(js,{className:"w-4 h-4"})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(w?B.last_login:B.lastLogin)?new Date(w?B.last_login:B.lastLogin).toLocaleDateString("pt-BR"):"Nunca"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>I(B),disabled:l||p,className:"text-blue-600 hover:text-blue-800 transition-colors disabled:opacity-50",title:"Editar usurio",children:s.jsx($o,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>se(B.id),disabled:l||e.length<=1||p,className:"text-red-600 hover:text-red-800 transition-colors disabled:opacity-50",title:e.length<=1?"No  possvel excluir o ltimo usurio":"Excluir usurio",children:s.jsx(fs,{className:"w-4 h-4"})})]})})]},B.id))})]})})]})]})]})})},Zv=({onClose:t})=>{const[e,r]=Q.useState([]),[n,a]=Q.useState(null),[i,o]=Q.useState(!1),[l,c]=Q.useState({name:"",description:"",isDefault:!1,permissions:[]}),[u,f]=Q.useState({}),[g,y]=Q.useState("basic"),[h,v]=Q.useState(!1);Q.useEffect(()=>{b()},[]);const b=async()=>{console.log(" Usando localStorage para gerenciamento de perfis"),S()},S=()=>{const q=In();console.log(" Perfis carregados do localStorage:",q),r(q),v(!1)},p=()=>{const q=[];return Object.entries(ys).forEach(([F,V])=>{Object.entries(V.actions).forEach(([D,J])=>{q.push(`${F}_${D}`)})}),q},x=()=>{const q={};return l.name.trim()?l.name.length<2&&(q.name="Nome deve ter pelo menos 2 caracteres"):q.name="Nome do perfil  obrigatrio",l.description.trim()||(q.description="Descrio  obrigatria"),e.find(V=>V.name.toLowerCase()===l.name.toLowerCase()&&V.id!==n)&&(q.name="J existe um perfil com este nome"),f(q),Object.keys(q).length===0},w=async()=>{var q;if(x())try{if(h){const{createProfile:F,updateProfile:V}=await kr(async()=>{const{createProfile:D,updateProfile:J}=await import("./supabaseAuth-BHSNIvez.js");return{createProfile:D,updateProfile:J}},[]);if(n){const D=await V(n,{name:l.name.trim(),description:l.description.trim(),permissions:l.permissions,isDefault:l.isDefault});if(!D.success){alert(`Erro ao atualizar perfil: ${D.error}`);return}}else{const D=await F({name:l.name.trim(),description:l.description.trim(),permissions:l.permissions,isDefault:l.isDefault});if(!D.success){alert(`Erro ao criar perfil: ${D.error}`);return}}await b()}else{const F=l.permissions.map(D=>{const[J,U]=D.split("_");return{id:D,module:J,action:U,allowed:!0}}),V={id:n||yo(),name:l.name.trim(),description:l.description.trim(),permissions:F,isDefault:l.isDefault,createdAt:n?((q=e.find(D=>D.id===n))==null?void 0:q.createdAt)||new Date().toISOString():new Date().toISOString()};wu(V),S()}z()}catch(F){console.error("Error saving profile:",F),alert("Erro ao salvar perfil. Tente novamente.")}},T=q=>{a(q.id);let F=[];h?F=Array.isArray(q.permissions)?q.permissions:[]:F=q.permissions.filter(V=>V.allowed).map(V=>V.id),c({name:q.name,description:q.description,isDefault:h?q.is_default:q.isDefault,permissions:F}),o(!0),y("basic"),f({})},O=async q=>{const F=e.find(V=>V.id===q);if(F){if(e.length<=1){alert("No  possvel excluir o ltimo perfil. Deve haver pelo menos um perfil cadastrado.");return}if(window.confirm(`Tem certeza que deseja excluir o perfil "${F.name}"?`))try{if(h){const{deleteProfile:V}=await kr(async()=>{const{deleteProfile:J}=await import("./supabaseAuth-BHSNIvez.js");return{deleteProfile:J}},[]),D=await V(q);D.success?await b():alert(`Erro ao excluir perfil: ${D.error}`)}else Qv(q)?S():alert("No foi possvel excluir o perfil. Verifique se no h usurios utilizando este perfil.")}catch(V){console.error("Erro ao excluir perfil:",V),alert("Erro ao excluir perfil. Tente novamente.")}}},G=async q=>{const F=e.find(V=>V.id===q);if(F)try{if(h){const{updateProfile:V}=await kr(async()=>{const{updateProfile:J}=await import("./supabaseAuth-BHSNIvez.js");return{updateProfile:J}},[]),D=await V(q,{isDefault:!0});D.success?await b():alert(`Erro ao definir perfil padro: ${D.error}`)}else{const V={...F,isDefault:!0};wu(V),S()}}catch(V){console.error("Erro ao definir perfil padro:",V),alert("Erro ao definir perfil padro. Tente novamente.")}},z=()=>{a(null),o(!1),c({name:"",description:"",isDefault:!1,permissions:[]}),y("basic"),f({})},K=()=>{a(null),c({name:"",description:"",isDefault:!1,permissions:[]}),o(!0),y("basic"),f({})},I=(q,F)=>{c(V=>({...V,permissions:F?[...V.permissions,q]:V.permissions.filter(D=>D!==q)}))},se=(q,F)=>{const V=Object.keys(ys[q].actions).map(D=>`${q}_${D}`);c(D=>({...D,permissions:F?[...D.permissions.filter(J=>!V.includes(J)),...V]:D.permissions.filter(J=>!V.includes(J))}))},ae=q=>Object.keys(ys[q].actions).map(F=>`${q}_${F}`),P=q=>{const F=ae(q);return F.length>0&&F.every(V=>l.permissions.includes(V))},H=q=>{const F=ae(q);return F.some(V=>l.permissions.includes(V))&&!F.every(V=>l.permissions.includes(V))},C=q=>{const F=p();let V=[];h?V=Array.isArray(q.permissions)?q.permissions:[]:V=q.permissions.filter(J=>J.allowed).map(J=>J.id);const D=Object.keys(ys).map(J=>{const U=ae(J),A=U.filter(Y=>V.includes(Y)).length;return{module:ys[J].name,allowed:A,total:U.length,percentage:U.length>0?Math.round(A/U.length*100):0}});return{total:F.length,allowed:V.length,percentage:F.length>0?Math.round(V.length/F.length*100):0,modules:D}},B=q=>{const F=p();let V=[];switch(q){case"admin":V=[...F];break;case"user":V=F.filter(D=>D.startsWith("ANALYSIS_")&&["ANALYSIS_CREATE","ANALYSIS_EDIT","ANALYSIS_VIEW","ANALYSIS_EXPORT"].includes(D));break;case"viewer":V=F.filter(D=>D.endsWith("_VIEW"));break;case"analyst":V=F.filter(D=>D.startsWith("ANALYSIS_")&&["ANALYSIS_CREATE","ANALYSIS_EDIT","ANALYSIS_VIEW","ANALYSIS_EXPORT","ANALYSIS_COPY"].includes(D)||D.startsWith("PROJECTS_")&&["PROJECTS_VIEW"].includes(D));break}c(D=>({...D,permissions:V}))};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(os,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gerenciar Perfis de Acesso"}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${h?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:h?"Supabase":"Local"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:K,disabled:i,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Novo Perfil"]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[i&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:n?"Editar Perfil":"Novo Perfil"}),s.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6 max-w-md",children:[s.jsx("button",{onClick:()=>y("basic"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${g==="basic"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Dados Bsicos"}),s.jsx("button",{onClick:()=>y("permissions"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${g==="permissions"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Permisses"}),s.jsx("button",{onClick:()=>y("additional"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${g==="additional"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Informaes"})]}),g==="basic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Perfil *"}),s.jsx("input",{type:"text",value:l.name,onChange:q=>c({...l,name:q.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${u.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Ex: Analista de Sistemas"}),u.name&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio *"}),s.jsx("input",{type:"text",value:l.description,onChange:q=>c({...l,description:q.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${u.description?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Descreva as responsabilidades deste perfil"}),u.description&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.description})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:l.isDefault,onChange:q=>c({...l,isDefault:q.target.checked}),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Definir como perfil padro"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"O perfil padro ser atribudo automaticamente a novos usurios"})]})]}),g==="permissions"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Modelos de Permisso"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[s.jsx("button",{type:"button",onClick:()=>B("admin"),className:"px-3 py-2 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors",children:"Administrador"}),s.jsx("button",{type:"button",onClick:()=>B("analyst"),className:"px-3 py-2 text-sm bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors",children:"Analista"}),s.jsx("button",{type:"button",onClick:()=>B("user"),className:"px-3 py-2 text-sm bg-green-100 text-green-800 rounded hover:bg-green-200 transition-colors",children:"Usurio"}),s.jsx("button",{type:"button",onClick:()=>B("viewer"),className:"px-3 py-2 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 transition-colors",children:"Visualizador"})]})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(ys).map(([q,F])=>{const V=P(q),D=H(q);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:F.name}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:V,ref:J=>{J&&(J.indeterminate=D)},onChange:J=>se(q,J.target.checked),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:V?"Todas":D?"Algumas":"Nenhuma"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(F.actions).map(([J,U])=>{const A=`${q}_${J}`;return s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:l.permissions.includes(A),onChange:Y=>I(A,Y.target.checked),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:U})]},A)})})]},q)})})]}),g==="additional"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Resumo das Permisses"}),(()=>{const q=C({permissions:l.permissions});return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-blue-800",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Total de Permisses:"})," ",q.allowed," de ",q.total," (",q.percentage,"%)"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:q.modules.map((F,V)=>s.jsxs("div",{className:"bg-white rounded p-3 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:F.module}),s.jsxs("span",{className:"text-xs text-gray-600",children:[F.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${F.percentage}%`}})}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[F.allowed," de ",F.total," permisses"]})]},V))})]})})()]})]})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h5",{className:"font-medium text-yellow-900 mb-2",children:"Informaes Importantes"}),s.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:" Perfis controlam o acesso s funcionalidades do sistema"}),s.jsx("li",{children:" Apenas um perfil pode ser definido como padro por vez"}),s.jsx("li",{children:" Alteraes em perfis afetam todos os usurios que os utilizam"}),s.jsx("li",{children:" Deve haver pelo menos um perfil cadastrado no sistema"}),s.jsx("li",{children:" Perfis em uso por usurios no podem ser excludos"})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("h5",{className:"font-medium text-green-900 mb-2",children:"Modelos de Perfil Sugeridos"}),s.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Administrador:"})," Acesso completo a todas as funcionalidades"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Analista:"})," Criar, editar, visualizar, exportar anlises, copiar + visualizar projetos"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Usurio:"})," Criar, editar, visualizar e exportar anlises bsicas"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Visualizador:"})," Apenas visualizar informaes do sistema"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Salvar Perfil"]}),s.jsxs("button",{onClick:z,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(tt,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Perfis Cadastrados (",e.length,")"]}),e.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx(os,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum perfil cadastrado"})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.map(q=>{const F=C(q);return s.jsxs("div",{className:`border rounded-lg p-4 transition-colors ${(h?q.is_default:q.isDefault)?"border-blue-200 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 truncate",children:q.name}),(h?q.is_default:q.isDefault)&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:[s.jsx(go,{className:"w-3 h-3 mr-1"}),"Padro"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:q.description}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{children:["Criado em ",new Date(h?q.created_at:q.createdAt).toLocaleDateString("pt-BR")]}),s.jsxs("p",{children:[F.allowed," de ",F.total," permisses ativas (",F.percentage,"%)"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!(h?q.is_default:q.isDefault)&&s.jsx("button",{onClick:()=>G(q.id),className:"p-1 text-yellow-600 hover:text-yellow-800 transition-colors",title:"Definir como padro",children:s.jsx(Ad,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>T(q),disabled:i,className:"p-1 text-blue-600 hover:text-blue-800 transition-colors disabled:opacity-50",title:"Editar perfil",children:s.jsx($o,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>O(q.id),disabled:i||e.length<=1,className:"p-1 text-red-600 hover:text-red-800 transition-colors disabled:opacity-50",title:e.length<=1?"No  possvel excluir o ltimo perfil":"Excluir perfil",children:s.jsx(fs,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[s.jsx("span",{children:"Permisses por Mdulo"}),s.jsxs("span",{children:[F.percentage,"% do total"]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.modules.map((V,D)=>s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-gray-700 truncate",children:V.module}),s.jsxs("span",{className:"text-gray-500",children:[V.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:s.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${V.percentage===100?"bg-green-500":V.percentage>50?"bg-blue-500":V.percentage>0?"bg-yellow-500":"bg-gray-300"}`,style:{width:`${V.percentage}%`}})})]},D))})]})]},q.id)})})]})]})]})})},wo="nup_aim_projects",Us=()=>{try{const t=localStorage.getItem(wo),e=t?JSON.parse(t):[];if(e.length===0){const r={id:vu(),name:"Exemplo",acronym:"Ex",isDefault:!0,createdAt:new Date().toISOString()};e.push(r),localStorage.setItem(wo,JSON.stringify(e))}return e}catch(t){return console.error("Erro ao carregar projetos:",t),[{id:vu(),name:"Exemplo",acronym:"Ex",isDefault:!0,createdAt:new Date().toISOString()}]}},ym=t=>{const e=Us(),r=e.findIndex(n=>n.id===t.id);t.isDefault&&e.forEach(n=>n.isDefault=!1),r>=0?e[r]=t:e.push(t),localStorage.setItem(wo,JSON.stringify(e))},eb=t=>{const e=Us(),r=e.find(i=>i.id===t);if(e.length<=1)return!1;const n=e.filter(i=>i.isDefault);if(r!=null&&r.isDefault&&n.length===1){const i=e.find(o=>o.id!==t);i&&(i.isDefault=!0)}const a=e.filter(i=>i.id!==t);return localStorage.setItem(wo,JSON.stringify(a)),!0},og=()=>{const t=Us();return t.find(e=>e.isDefault)||t[0]||null},vu=()=>`project_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Pd="impact_analyses",bu=t=>{const e=Pn(),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),localStorage.setItem(Pd,JSON.stringify(e))},Pn=()=>{try{const t=localStorage.getItem(Pd);return t?JSON.parse(t):[]}catch(t){return console.error("Erro ao carregar anlises:",t),[]}},tb=t=>{const r=Pn().filter(n=>n.id!==t);localStorage.setItem(Pd,JSON.stringify(r))},br=()=>`analysis_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ws=null,rb=()=>({configured:!1,url:"API-based authentication",keyLength:0,client:!1,environment:"production",hostname:window.location.hostname,mode:"api"}),sb=()=>{const[t,e]=Q.useState([{name:"Verificar Conexo",description:"Testar conexo com o Supabase",status:"pending"},{name:"Executar SQL de Inicializao",description:"Executar script SQL completo para inserir dados",status:"pending"},{name:"Verificar Dados Inseridos",description:"Confirmar que os dados foram criados corretamente",status:"pending"}]),[r,n]=Q.useState(!1),[a,i]=Q.useState(-1),[o,l]=Q.useState(!1),c=()=>`
-- Script para inserir dados iniciais contornando RLS
-- Execute este SQL no Supabase SQL Editor se o inicializador automtico falhar

-- Temporariamente desabilitar RLS para inserir dados iniciais
ALTER TABLE profiles DISABLE ROW LEVEL SECURITY;
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
ALTER TABLE projects DISABLE ROW LEVEL SECURITY;

-- Limpar dados existentes para evitar conflitos
DELETE FROM users WHERE username = 'admin' OR email = 'nuptechs@nuptechs.com';
DELETE FROM profiles WHERE name IN ('Administrador', 'Usurio Padro');
DELETE FROM projects WHERE name = 'Sistema de Habilitaes';

-- Inserir perfis padro
INSERT INTO profiles (id, name, description, permissions, is_default, created_at, updated_at) VALUES
(
  '550e8400-e29b-41d4-a716-446655440001',
  'Administrador',
  'Acesso completo a todas as funcionalidades do sistema',
  '[
    "ANALYSIS_CREATE", "ANALYSIS_EDIT", "ANALYSIS_DELETE", "ANALYSIS_VIEW", "ANALYSIS_EXPORT", "ANALYSIS_IMPORT_AI", "ANALYSIS_COPY",
    "PROJECTS_CREATE", "PROJECTS_EDIT", "PROJECTS_DELETE", "PROJECTS_VIEW", "PROJECTS_MANAGE",
    "USERS_CREATE", "USERS_EDIT", "USERS_DELETE", "USERS_VIEW", "USERS_MANAGE",
    "PROFILES_CREATE", "PROFILES_EDIT", "PROFILES_DELETE", "PROFILES_VIEW", "PROFILES_MANAGE"
  ]'::jsonb,
  false,
  now(),
  now()
),
(
  '550e8400-e29b-41d4-a716-446655440002',
  'Usurio Padro',
  'Acesso bsico para criar e visualizar anlises',
  '[
    "ANALYSIS_CREATE", "ANALYSIS_EDIT", "ANALYSIS_VIEW", "ANALYSIS_EXPORT",
    "PROJECTS_VIEW"
  ]'::jsonb,
  true,
  now(),
  now()
);

-- Inserir projeto padro
INSERT INTO projects (id, name, acronym, is_default, created_at, updated_at) VALUES
(
  '550e8400-e29b-41d4-a716-446655440003',
  'Sistema de Habilitaes',
  'SH',
  true,
  now(),
  now()
);

-- Inserir usurio admin
INSERT INTO users (
  id,
  username,
  email,
  password_hash,
  profile_id,
  is_active,
  is_email_verified,
  created_at,
  updated_at
) VALUES (
  '550e8400-e29b-41d4-a716-446655440004',
  'admin',
  'nuptechs@nuptechs.com',
  'Senha@1010',
  '550e8400-e29b-41d4-a716-446655440001',
  true,
  true,
  now(),
  now()
);

-- Reabilitar RLS
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE projects ENABLE ROW LEVEL SECURITY;

-- Atualizar polticas RLS para permitir leitura pblica (necessrio para login)
DROP POLICY IF EXISTS "Profiles are viewable by authenticated users" ON profiles;
CREATE POLICY "Profiles are viewable by everyone"
  ON profiles
  FOR SELECT
  USING (true);

DROP POLICY IF EXISTS "Users can view their own data" ON users;
CREATE POLICY "Users can view for authentication"
  ON users
  FOR SELECT
  USING (true);

DROP POLICY IF EXISTS "Projects are viewable by authenticated users" ON projects;
CREATE POLICY "Projects are viewable by everyone"
  ON projects
  FOR SELECT
  USING (true);

-- Verificar se os dados foram inseridos corretamente
SELECT 'Perfis criados:' as info;
SELECT id, name, is_default FROM profiles ORDER BY name;

SELECT 'Projetos criados:' as info;
SELECT id, name, acronym, is_default FROM projects ORDER BY name;

SELECT 'Usurios criados:' as info;
SELECT 
  u.id,
  u.username,
  u.email,
  u.is_email_verified,
  u.is_active,
  p.name as profile_name
FROM users u
JOIN profiles p ON u.profile_id = p.id
ORDER BY u.username;
`,u=()=>{navigator.clipboard.writeText(c()),alert(`SQL copiado para a rea de transferncia!

V para o Supabase SQL Editor e cole o cdigo.`)},f=async()=>{{alert("Supabase no est configurado. Configure as variveis de ambiente primeiro.");return}},g=(h,v)=>h.status==="running"?s.jsx(Dr,{className:"w-4 h-4 text-blue-600 animate-spin"}):h.status==="success"?s.jsx(Ze,{className:"w-4 h-4 text-green-600"}):h.status==="error"?s.jsx(gt,{className:"w-4 h-4 text-red-600"}):s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300"}),y=h=>h.status==="running"?"text-blue-600":h.status==="success"?"text-green-600":h.status==="error"?"text-red-600":"text-gray-500";return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(Pt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Inicializar Dados do Supabase"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Criar automaticamente os dados iniciais necessrios para o funcionamento do sistema"})]})]}),s.jsx("div",{className:"space-y-4 mb-6",children:t.map((h,v)=>s.jsxs("div",{className:"flex items-start gap-3",children:[g(h),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`font-medium ${y(h)}`,children:h.name}),s.jsx("div",{className:"text-sm text-gray-600",children:h.description}),h.error&&s.jsxs("div",{className:"text-sm text-red-600 mt-1",children:["Erro: ",h.error]})]})]},v))}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"text-sm text-gray-600",children:r?`Executando passo ${a+1} de ${t.length}...`:'Clique em "Inicializar" para criar os dados automaticamente'}),s.jsx("button",{onClick:f,disabled:r,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Dr,{className:"w-4 h-4 mr-2 animate-spin"}),"Inicializando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ng,{className:"w-4 h-4 mr-2"}),"Inicializar Dados"]})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Alternativa: SQL Manual"}),s.jsx("button",{onClick:()=>l(!o),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:o?"Ocultar SQL":"Mostrar SQL"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Se a inicializao automtica falhar, voc pode executar o SQL manualmente no Supabase SQL Editor."}),o&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Script SQL Completo"}),s.jsxs("button",{onClick:u,className:"inline-flex items-center px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[s.jsx(mo,{className:"w-3 h-3 mr-1"}),"Copiar SQL"]})]}),s.jsx("pre",{className:"text-xs text-gray-600 bg-gray-100 p-3 rounded overflow-x-auto max-h-40",children:c()})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsx("h5",{className:"font-medium text-yellow-900 mb-1",children:"Como usar o SQL manual:"}),s.jsxs("ol",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:'1. Clique em "Copiar SQL" acima'}),s.jsx("li",{children:"2. V para o Supabase SQL Editor"}),s.jsx("li",{children:'3. Cole o cdigo e clique em "RUN"'}),s.jsx("li",{children:"4. Aguarde a execuo completa"}),s.jsx("li",{children:"5. Recarregue esta pgina e teste o login"})]})]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"O que ser criado:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Perfil Administrador:"})," Acesso completo ao sistema"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Perfil Usurio Padro:"})," Acesso bsico para anlises"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Projeto Padro:"})," Sistema de Habilitaes"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Usurio Admin:"})," admin / Senha@1010 (email verificado)"]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-red-900 mb-2",children:" Soluo para Erro RLS"}),s.jsx("p",{className:"text-sm text-red-800",children:'Se a inicializao automtica falhar com erro "row-level security policy", use o SQL manual acima. Ele desabilita temporariamente o RLS, insere os dados e reabilita com polticas corretas.'})]})]})},nb=()=>{var y,h,v,b;const[t,e]=Q.useState({supabaseConfigured:!1,supabaseConnected:!1,tablesExist:!1,dataExists:!1}),[r,n]=Q.useState(!1),[a,i]=Q.useState(!1),[o,l]=Q.useState(!1),c=async()=>{n(!0);const S={supabaseConfigured:!1,supabaseConnected:!1,tablesExist:!1,dataExists:!1};try{console.log(" Iniciando verificao do Supabase...");const p=rb();if(console.log(" Status do Supabase:",p),S.environment={mode:p.environment,hostname:p.hostname,url:p.url,keyLength:p.keyLength},!p.configured){console.log(" Supabase no configurado"),S.error=`Supabase no configurado. URL: ${p.url.substring(0,30)}..., Key length: ${p.keyLength}`,e(S),n(!1);return}if(S.supabaseConfigured=!0,console.log(" Supabase configurado"),!ws){console.log(" Cliente Supabase no inicializado"),S.error="Cliente Supabase no inicializado",e(S),n(!1);return}console.log(" Testando conexo bsica...");const{data:x,error:w}=await ws.from("profiles").select("count").limit(1);if(w){console.error(" Erro de conexo:",w),S.error=`Erro de conexo: ${w.message}`,e(S),n(!1);return}S.supabaseConnected=!0,S.tablesExist=!0,console.log(" Conexo estabelecida e tabelas existem"),console.log(" Verificando dados nas tabelas...");const{data:T,error:O}=await ws.from("profiles").select("*");if(O){console.error(" Erro ao buscar perfis:",O),S.error=`Erro ao verificar perfis: ${O.message}`,e(S),n(!1);return}const{data:G,error:z}=await ws.from("users").select("*");if(z){console.error(" Erro ao buscar usurios:",z),S.error=`Erro ao verificar usurios: ${z.message}`,e(S),n(!1);return}const{data:K,error:I}=await ws.from("projects").select("*");if(I){console.error(" Erro ao buscar projetos:",I),S.error=`Erro ao verificar projetos: ${I.message}`,e(S),n(!1);return}const se=T||[],ae=G||[],P=K||[];S.details={profiles:se.length,users:ae.length,projects:P.length},S.dataExists=se.length>0&&ae.length>0,console.log(" Dados encontrados:"),console.log(`   Perfis: ${se.length}`),console.log(`   Usurios: ${ae.length}`),console.log(`   Projetos: ${P.length}`),se.length>0&&console.log(" Perfis encontrados:",se.map(H=>({id:H.id,name:H.name}))),ae.length>0&&console.log(" Usurios encontrados:",ae.map(H=>({id:H.id,username:H.username,email:H.email}))),P.length>0&&console.log(" Projetos encontrados:",P.map(H=>({id:H.id,name:H.name}))),S.dataExists||console.log(" Dados no encontrados - banco vazio")}catch(p){console.error(" Erro na verificao:",p),S.error=`Erro inesperado: ${p}`}e(S),n(!1)};Q.useEffect(()=>{c()},[]);const u=()=>r?s.jsx(Dr,{className:"w-5 h-5 text-blue-600 animate-spin"}):t.dataExists?s.jsx(Ze,{className:"w-5 h-5 text-green-600"}):s.jsx(gt,{className:"w-5 h-5 text-red-600"}),f=()=>r?"Verificando conexo...":t.dataExists?"Supabase conectado e funcionando":t.tablesExist?"Conectado, mas sem dados iniciais":t.supabaseConnected?"Conectado, mas tabelas no encontradas":t.supabaseConfigured?"Configurado, mas no conecta":"Supabase no configurado",g=()=>t.dataExists?"text-green-800 bg-green-50 border-green-200":t.supabaseConnected?"text-yellow-800 bg-yellow-50 border-yellow-200":"text-red-800 bg-red-50 border-red-200";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Status do Banco de Dados"})]}),s.jsx("button",{onClick:c,disabled:r,className:"text-blue-600 hover:text-blue-800 transition-colors disabled:opacity-50",children:s.jsx(Dr,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),s.jsxs("div",{className:`p-3 rounded-lg border ${g()}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u(),s.jsx("span",{className:"font-medium",children:f()})]}),t.error&&s.jsx("p",{className:"text-sm mt-2",children:t.error})]}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Configurao:"}),s.jsx("span",{className:t.supabaseConfigured?"text-green-600":"text-red-600",children:t.supabaseConfigured?" OK":" Faltando"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Conexo:"}),s.jsx("span",{className:t.supabaseConnected?"text-green-600":"text-red-600",children:t.supabaseConnected?" OK":" Falhou"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Tabelas:"}),s.jsx("span",{className:t.tablesExist?"text-green-600":"text-red-600",children:t.tablesExist?" OK":" No encontradas"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Dados:"}),s.jsx("span",{className:t.dataExists?"text-green-600":"text-yellow-600",children:t.dataExists?" OK":" Vazios"})]})]}),t.details&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados Encontrados no Supabase:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:t.details.profiles}),s.jsx("div",{className:"text-gray-600",children:"Perfis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:t.details.users}),s.jsx("div",{className:"text-gray-600",children:"Usurios"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:t.details.projects}),s.jsx("div",{className:"text-gray-600",children:"Projetos"})]})]})]}),t.environment&&s.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Gt,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Informaes do Ambiente"}),s.jsxs("div",{className:"text-xs text-blue-800 space-y-1",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Modo:"})," ",t.environment.mode]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Hostname:"})," ",t.environment.hostname]}),s.jsxs("div",{children:[s.jsx("strong",{children:"URL:"})," ",t.environment.url.substring(0,50),"..."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Key Length:"})," ",t.environment.keyLength," caracteres"]})]})]})]})}),s.jsx("button",{onClick:()=>i(!a),className:"mt-3 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:a?"Ocultar detalhes":"Ver detalhes tcnicos"}),a&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded text-xs font-mono",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"URL:"})," ",((y=t.environment)==null?void 0:y.url)||"No configurada"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Key:"})," ",(h=t.environment)!=null&&h.keyLength?`${t.environment.keyLength} caracteres`:"No configurada"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Cliente:"})," ","No inicializado"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Modo:"})," ",((v=t.environment)==null?void 0:v.mode)||"unknown"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Hostname:"})," ",((b=t.environment)==null?void 0:b.hostname)||"unknown"]})]}),!t.supabaseConfigured&&s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Como configurar o Supabase:"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:["1. Crie um projeto em ",s.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),s.jsx("li",{children:"2. V para Settings  API"}),s.jsx("li",{children:"3. Copie Project URL e anon key"}),s.jsx("li",{children:"4. Configure as variveis de ambiente"}),s.jsx("li",{children:"5. Execute o SQL das migrations"})]})]}),t.supabaseConnected&&!t.dataExists&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Banco conectado, mas sem dados:"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"O banco est funcionando, mas no tem os dados iniciais necessrios (usurio admin, perfis, etc.)"})]}),s.jsxs("button",{onClick:()=>l(!o),className:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4 mr-2"}),o?"Ocultar Inicializador":"Inicializar Dados Automaticamente"]})]})]}),o&&t.supabaseConnected&&!t.dataExists&&s.jsx(sb,{})]})},ab=()=>{const[t,e]=Q.useState(!1),[r,n]=Q.useState([]),a=async()=>{e(!0);const c=[];try{console.log(" Teste 1: Verificando variveis de ambiente...");const u=void 0,f=void 0;(!u||u==="https://your-project.supabase.co")&&c.push({name:"Variveis de Ambiente",status:"error",message:"VITE_SUPABASE_URL no configurada ou invlida",details:{url:u}}),console.log(" Teste 2: Verificando cliente Supabase..."),ws||c.push({name:"Cliente Supabase",status:"error",message:"Cliente Supabase no foi inicializado",details:null})}catch(u){console.error(" Erro nos testes:",u),c.push({name:"Erro Geral",status:"error",message:`Erro inesperado: ${u}`,details:u})}n(c),e(!1)},i=()=>{const c=r.map(u=>`${u.name}: ${u.status.toUpperCase()} - ${u.message}`).join(`
`);navigator.clipboard.writeText(c),alert("Resultados copiados para a rea de transferncia!")},o=c=>{switch(c){case"success":return s.jsx(Ze,{className:"w-5 h-5 text-green-600"});case"error":return s.jsx(Td,{className:"w-5 h-5 text-red-600"});case"warning":return s.jsx(is,{className:"w-5 h-5 text-yellow-600"});default:return null}},l=c=>{switch(c){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Teste de Conexo Supabase"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Executa uma bateria completa de testes para verificar a conexo"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&s.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Copiar Resultados"]}),s.jsx("button",{onClick:a,disabled:t,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Testando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ng,{className:"w-4 h-4 mr-2"}),"Executar Testes"]})})]})]}),r.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Resultados dos Testes:"}),r.map((c,u)=>s.jsx("div",{className:`border rounded-lg p-4 ${l(c.status)}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[o(c.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:c.name}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${c.status==="success"?"bg-green-100 text-green-800":c.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:c.status.toUpperCase()})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:c.message}),c.details&&s.jsxs("details",{className:"text-xs",children:[s.jsx("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700",children:"Ver detalhes"}),s.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-gray-600 overflow-auto",children:JSON.stringify(c.details,null,2)})]})]})]})},u)),s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Resumo:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-green-600",children:r.filter(c=>c.status==="success").length}),s.jsx("div",{className:"text-gray-600",children:"Sucessos"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-yellow-600",children:r.filter(c=>c.status==="warning").length}),s.jsx("div",{className:"text-gray-600",children:"Avisos"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-red-600",children:r.filter(c=>c.status==="error").length}),s.jsx("div",{className:"text-gray-600",children:"Erros"})]})]})]})]}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Pt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:'Clique em "Executar Testes" para verificar a conexo com o Supabase'})]})]})},ib=({onClose:t})=>{const[e,r]=Q.useState(!1),[n,a]=Q.useState(!1),[i,o]=Q.useState(null),[l,c]=Q.useState(null),[u,f]=Q.useState("status"),g=async()=>{r(!0),c(null);try{const b={users:Tn(),profiles:In(),projects:Us(),analyses:Pn(),exportDate:new Date().toISOString(),version:"1.0"},S=JSON.stringify(b,null,2),p=new Blob([S],{type:"application/json"}),x=document.createElement("a");x.href=URL.createObjectURL(p),x.download=`nup-aim-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),c({type:"success",text:"Dados exportados com sucesso! O arquivo foi baixado."})}catch(b){console.error("Erro ao exportar dados:",b),c({type:"error",text:"Erro ao exportar dados. Tente novamente."})}finally{r(!1)}},y=async()=>{if(i){a(!0),c(null);try{const b=await i.text(),S=JSON.parse(b);if(!S.users||!S.profiles||!S.projects||!S.analyses)throw new Error("Arquivo de backup invlido");if(!window.confirm(`Tem certeza que deseja importar os dados?

Este backup contm:
 ${S.users.length} usurios
 ${S.profiles.length} perfis
 ${S.projects.length} projetos
 ${S.analyses.length} anlises

Data do backup: ${new Date(S.exportDate).toLocaleString("pt-BR")}

ATENO: Todos os dados atuais sero substitudos!`)){a(!1);return}localStorage.setItem("nup_aim_users",JSON.stringify(S.users)),localStorage.setItem("nup_aim_profiles",JSON.stringify(S.profiles)),localStorage.setItem("nup_aim_projects",JSON.stringify(S.projects)),localStorage.setItem("impact_analyses",JSON.stringify(S.analyses)),c({type:"success",text:"Dados importados com sucesso! Recarregue a pgina para ver as alteraes."}),setTimeout(()=>{window.location.reload()},3e3)}catch(b){console.error("Erro ao importar dados:",b),c({type:"error",text:"Erro ao importar dados. Verifique se o arquivo  vlido."})}finally{a(!1)}}},v=(()=>{const b=Tn(),S=In(),p=Us(),x=Pn();return{users:b.length,profiles:S.length,projects:p.length,analyses:x.length}})();return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gerenciar Dados do Sistema"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsx("button",{onClick:()=>f("status"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${u==="status"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Status da Conexo"}),s.jsx("button",{onClick:()=>f("test"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${u==="test"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Teste de Conexo"}),s.jsx("button",{onClick:()=>f("backup"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${u==="backup"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Backup e Restaurao"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[u==="status"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(nb,{}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Dados Atuais no Sistema (localStorage)"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-blue-800",children:v.users}),s.jsx("div",{className:"text-blue-600",children:"Usurios"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-blue-800",children:v.profiles}),s.jsx("div",{className:"text-blue-600",children:"Perfis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-blue-800",children:v.projects}),s.jsx("div",{className:"text-blue-600",children:"Projetos"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-blue-800",children:v.analyses}),s.jsx("div",{className:"text-blue-600",children:"Anlises"})]})]}),s.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"* Estes dados esto salvos localmente no navegador (localStorage)"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(is,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Importante sobre o localStorage"}),s.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:" Os dados ficam salvos apenas no navegador atual"}),s.jsx("li",{children:" Cada navegador/dispositivo tem seus prprios dados"}),s.jsx("li",{children:" Para usar o banco de dados Supabase, configure as variveis de ambiente"}),s.jsx("li",{children:' Use a aba "Backup e Restaurao" para transferir dados entre navegadores'})]})]})]})})]}),u==="test"&&s.jsx("div",{className:"space-y-6",children:s.jsx(ab,{})}),u==="backup"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Exportar Dados"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Faa backup de todos os dados do sistema (usurios, perfis, projetos e anlises) para um arquivo JSON que pode ser importado em outro navegador ou dispositivo."}),s.jsx("button",{onClick:g,disabled:e,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exportando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Exportar Dados"]})})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Importar Dados"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Restaure dados de um arquivo de backup.",s.jsx("strong",{className:"text-red-600",children:" ATENO: Todos os dados atuais sero substitudos!"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{children:s.jsx("input",{type:"file",accept:".json",onChange:b=>{var S;return o(((S=b.target.files)==null?void 0:S[0])||null)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),i&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Arquivo selecionado: ",s.jsx("strong",{children:i.name})]}),s.jsx("button",{onClick:y,disabled:!i||n,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Importar Dados"]})})]})]}),l&&s.jsx("div",{className:`p-4 rounded-lg border ${l.type==="success"?"bg-green-50 border-green-200":l.type==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[l.type==="success"&&s.jsx(Ze,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),l.type==="error"&&s.jsx(is,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),l.type==="info"&&s.jsx(Pt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-800":l.type==="error"?"text-red-800":"text-blue-800"}`,children:l.text})]})})]})]})]})})};var it=[];for(var Tl=0;Tl<256;++Tl)it.push((Tl+256).toString(16).slice(1));function ob(t,e=0){return(it[t[e+0]]+it[t[e+1]]+it[t[e+2]]+it[t[e+3]]+"-"+it[t[e+4]]+it[t[e+5]]+"-"+it[t[e+6]]+it[t[e+7]]+"-"+it[t[e+8]]+it[t[e+9]]+"-"+it[t[e+10]]+it[t[e+11]]+it[t[e+12]]+it[t[e+13]]+it[t[e+14]]+it[t[e+15]]).toLowerCase()}var mi,lb=new Uint8Array(16);function cb(){if(!mi&&(mi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mi(lb)}var ub=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const wm={randomUUID:ub};function sr(t,e,r){if(wm.randomUUID&&!t)return wm.randomUUID();t=t||{};var n=t.random||(t.rng||cb)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ob(n)}const Ts={ptFieldNames:["nome","email","telefone","endereo","cidade","estado","cep","cpf","rg","data","nascimento","sexo","gnero","profisso","empresa","cargo","salrio","observaes","senha","confirmar","cdigo","descrio","ttulo","subttulo","categoria","status","prioridade","anexo","url","site"],enFieldNames:["name","email","phone","address","city","state","zip","ssn","id","date","birth","gender","sex","occupation","company","position","salary","notes","password","confirm","code","description","title","subtitle","category","status","priority","attachment","url","website"],fieldIndicators:["campo","field","input","entrada","formulrio","form","label","rotulo"],requiredIndicators:["*","obrigatrio","required","mandatory"],inputIndicators:["informe","digite","preencha","insira","fornea","entre com","informar","digitar","preencher","inserir","fornecer","entrar com","obrigatrio","enter","input","fill","provide","type","required","mandatory"],outputIndicators:["calculado","retornado","resultado","total","valor final","subtotal","gerado","processado","computed","calculated","returned","result","generated","processed","output","display","shown","presented"]},ua=t=>{if(!t)return[];const e=[];try{console.log(" DEBUG - extractFieldsFromData - Dados recebidos:",t.substring(0,100)+"...");try{if(t.includes("IMAGE_DATA:")&&(t=t.split(`
`).filter(o=>!o.startsWith("IMAGE_DATA:")).join(`
`)),t.trim().startsWith("{")||t.trim().startsWith("[")){const a=JSON.parse(t);if(console.log(" DEBUG - extractFieldsFromData - Dados JSON parseados:",a),Array.isArray(a)&&a.length>0&&a[0].id&&a[0].name&&a[0].type)return console.log(" DEBUG - extractFieldsFromData - Retornando array de campos diretamente:",a.length),a;Nu(a,"",e)}}catch(a){console.log(" DEBUG - extractFieldsFromData - Erro ao analisar JSON:",a)}db(t,e),fb(t,e);const r=cg(e);console.log(" DEBUG - extractFieldsFromData - Campos aps deduplicate:",r.length);const n=r.map(a=>{const i=Ot(a.name,a.description||""),o=ju(a.type,a.complexity);return{...a,fpValue:o,fieldCategory:i}});return console.log(" DEBUG - extractFieldsFromData - Campos finais com FP:",n.length),n}catch(r){return console.error("Error extracting fields:",r),[]}},Nu=(t,e,r)=>{t&&typeof t=="object"&&Object.entries(t).forEach(([n,a])=>{const i=e?`${e}.${n}`:n;if(!(n.startsWith("_")||n==="id"||n==="key")){if(typeof a=="object"&&a!==null&&!Array.isArray(a))if(a.type||a.label||a.name){const o=a.label||a.name||n,l=ss(a.type,o),c=!!a.required,u=Ot(o,a.description||a.placeholder||"");r.push({id:sr(),name:o,type:l,required:c,description:a.description||a.placeholder||`Campo ${o}`,complexity:Tr(l,o),fpValue:0,source:"JSON",fieldCategory:u})}else Nu(a,i,r);else if(Array.isArray(a))a.length>0&&typeof a[0]=="object"&&(a[0].type||a[0].label||a[0].name)?a.forEach(o=>{const l=o.label||o.name||n,c=ss(o.type,l),u=!!o.required,f=Ot(l,o.description||o.placeholder||"");r.push({id:sr(),name:l,type:c,required:u,description:o.description||o.placeholder||`Campo ${l}`,complexity:Tr(c,l),fpValue:0,source:"JSON Array",fieldCategory:f})}):a.forEach((o,l)=>{Nu(o,`${i}[${l}]`,r)});else if(typeof a=="string"&&vo(n)){const o=ss("",n),l=Ot(n,a);r.push({id:sr(),name:Bi(n),type:o,required:!1,complexity:Tr(o,n),fpValue:0,source:"JSON Property",fieldCategory:l})}}})},db=(t,e)=>{const r=/<input[^>]*>/gi;let n;for(;(n=r.exec(t))!==null;){const l=n[0],c=l.match(/type=["']([^"']+)["']/i),u=c?c[1]:"text",f=l.match(/(?:name|id)=["']([^"']+)["']/i),g=f?f[1]:`campo_${e.length+1}`,y=l.includes("required"),h=l.match(/placeholder=["']([^"']+)["']/i),v=h?h[1]:"",b=Ot(g,v);e.push({id:sr(),name:Bi(g),type:lg(u),required:y,description:v,complexity:Tr(u,g),fpValue:0,source:"HTML",fieldCategory:b})}const a=/<select[^>]*>[\s\S]*?<\/select>/gi;for(;(n=a.exec(t))!==null;){const l=n[0],c=l.match(/(?:name|id)=["']([^"']+)["']/i),u=c?c[1]:`select_${e.length+1}`,f=l.includes("required"),g=(l.match(/<option[^>]*>/gi)||[]).length,y=Ot(u,"");e.push({id:sr(),name:Bi(u),type:"select",required:f,description:`Select com ${g} opes`,complexity:g>10?"High":g>5?"Average":"Low",fpValue:0,source:"HTML",fieldCategory:y})}const i=/<textarea[^>]*>[\s\S]*?<\/textarea>/gi;for(;(n=i.exec(t))!==null;){const l=n[0],c=l.match(/(?:name|id)=["']([^"']+)["']/i),u=c?c[1]:`textarea_${e.length+1}`,f=l.includes("required"),g=l.match(/placeholder=["']([^"']+)["']/i),y=g?g[1]:"",h=Ot(u,y);e.push({id:sr(),name:Bi(u),type:"textarea",required:f,description:y,complexity:"High",fpValue:0,source:"HTML",fieldCategory:h})}const o=/<label[^>]*>[\s\S]*?<\/label>/gi;for(;(n=o.exec(t))!==null;){const l=n[0],c=l.match(/for=["']([^"']+)["']/i),u=c?c[1]:null,f=l.match(/>([^<]+)</),g=f?f[1].trim():"";if(g){if(u){const y=e.find(h=>h.name.toLowerCase()===u.toLowerCase());y&&(y.name=g,y.fieldCategory=Ot(g,y.description||""))}else if(vo(g)){const y=ss("",g),h=Ot(g,"");e.push({id:sr(),name:g,type:y,required:g.includes("*"),complexity:Tr(y,g),fpValue:0,source:"HTML Label",fieldCategory:h})}}}},fb=(t,e)=>{t.split(`
`).forEach(n=>{if(n=n.trim(),!n||n.length<3)return;const a=Ts.fieldIndicators.some(l=>n.toLowerCase().includes(l)),i=vo(n);if(a||i){let l=n;l=l.replace(/^(campo|field|input|label|rotulo)[\s:]+/i,"");const c=Ts.requiredIndicators.some(u=>l.includes(u));if(Ts.requiredIndicators.forEach(u=>{l=l.replace(u,"")}),l=l.replace(/[:*]$/,"").trim(),l){const u=ss("",l),f=Ot(l,"");e.push({id:sr(),name:l,type:u,required:c,complexity:Tr(u,l),fpValue:0,source:"Text",fieldCategory:f})}}const o=n.match(/^([^:]+):\s*(.+)$/);if(o){const l=o[1].trim(),c=o[2].trim();if(vo(l)&&!mb(l)){const u=ss("",l),f=Ot(l,c);e.push({id:sr(),name:l,type:u,required:l.includes("*"),description:c,complexity:Tr(u,l),fpValue:0,source:"Text KeyValue",fieldCategory:f})}}})},vo=t=>{const e=t.toLowerCase();return!!(Ts.ptFieldNames.some(r=>e.includes(r))||Ts.enFieldNames.some(r=>e.includes(r))||e.includes("campo de")||e.includes("field for")||e.includes(":")&&e.length<50||/^[a-z][a-zA-Z0-9]*([A-Z][a-zA-Z0-9]*)*$/.test(t)||/^[a-z][a-z0-9]*(_[a-z0-9]+)*$/.test(t))},mb=t=>{const e=["cancelar","aes","ajuda","voltar","menu","visualizar","arquivo","configurao","administrao","painel","verso","sair","entrar","salvar","editar","excluir","novo","pesquisar","filtrar","ordenar","imprimir","exportar","importar","atualizar","fechar","abrir","copyright","todos os direitos","desenvolvido por","powered by","pgina","de","prximo","anterior","primeiro","ltimo","topo","rodap","cabealho","sistema","aplicao","app","verso","v.","login","logout","senha","usurio","esqueci","lembrar","manter","conectado","registrar","cadastrar","criar conta","entrar com","cancel","actions","help","back","menu","view","file","configuration","administration","dashboard","version","exit","enter","save","edit","delete","new","search","filter","sort","print","export","import","update","close","open","copyright","all rights","developed by","powered by","page","of","next","previous","first","last","top","footer","header","system","application","app","version","v.","login","logout","password","username","forgot","remember","keep","connected","register","sign up","create account","sign in with"],r=t.toLowerCase();return e.some(n=>r.includes(n))},Bi=t=>{let e=t.replace(/([A-Z])/g," $1");return e=e.replace(/_/g," "),e=e.charAt(0).toUpperCase()+e.slice(1),e.trim()},lg=t=>({text:"text",password:"text",email:"email",tel:"text",number:"number",date:"date","datetime-local":"date",time:"text",checkbox:"checkbox",radio:"radio",file:"file",url:"url",search:"text",color:"text",range:"number",hidden:"text"})[t.toLowerCase()]||"text",ss=(t,e)=>{if(t)return lg(t);const r=e.toLowerCase();return r.includes("email")?"email":r.includes("senha")||r.includes("password")?"text":r.includes("data")||r.includes("date")||r.includes("nascimento")?"date":r.includes("nmero")||r.includes("number")||r.includes("quantidade")||r.includes("quantity")||r.includes("valor")||r.includes("amount")||r.includes("preo")||r.includes("price")?"number":r.includes("descrio")||r.includes("description")||r.includes("observao")||r.includes("observation")||r.includes("comentrio")||r.includes("comment")||r.includes("mensagem")||r.includes("message")?"textarea":r.includes("aceito")||r.includes("accept")||r.includes("concordo")||r.includes("agree")||r.includes("lembrar")||r.includes("remember")?"checkbox":r.includes("sexo")||r.includes("gender")||r.includes("opo")||r.includes("option")?"radio":r.includes("estado")||r.includes("state")||r.includes("pas")||r.includes("country")||r.includes("categoria")||r.includes("category")||r.includes("tipo")||r.includes("type")||r.includes("status")?"select":r.includes("arquivo")||r.includes("file")||r.includes("anexo")||r.includes("attachment")||r.includes("upload")?"file":r.includes("url")||r.includes("site")||r.includes("website")||r.includes("link")?"url":"text"},Tr=(t,e)=>{if(["file","textarea"].includes(t))return"High";if(["date","select","email","url","number"].includes(t))return"Average";const r=e.toLowerCase();return r.includes("cpf")||r.includes("cnpj")||r.includes("password")||r.includes("senha")||r.includes("completo")||r.includes("complete")?"High":r.length>20||r.includes(" ")?"Average":"Low"},ju=(t,e)=>["text","email","number","date","checkbox","radio","file","url"].includes(t)?e==="Low"?3:e==="Average"?4:6:["textarea","select"].includes(t)?e==="Low"?4:e==="Average"?5:7:4,Ot=(t,e)=>{const r=t.toLowerCase(),n=e.toLowerCase();return Ts.inputIndicators.some(o=>r.includes(o)||n.includes(o))?"entrada":Ts.outputIndicators.some(o=>r.includes(o)||n.includes(o))||r.includes("total")||r.includes("subtotal")||r.includes("resultado")||r.includes("result")||r.includes("calculado")||r.includes("calculated")||r.includes("gerado")||r.includes("generated")||r.includes("status")||r.includes("situao")?"saida":r.includes("digite")||r.includes("informe")||r.includes("preencha")||r.includes("enter")||r.includes("input")||r.includes("fill")||r.endsWith("?")||r.includes("obrigatrio")||r.includes("required")||r.includes("nome")||r.includes("name")||r.includes("email")||r.includes("telefone")||r.includes("phone")||r.includes("endereo")||r.includes("address")||r.includes("cpf")||r.includes("cnpj")||r.includes("rg")||r.includes("data")&&!r.includes("atualizao")||r.includes("date")&&!r.includes("update")?"entrada":r.includes("cdigo")||r.includes("code")||r.includes("id")||r.includes("nmero")&&r.includes("pedido")||r.includes("number")&&r.includes("order")||r.includes("criado em")||r.includes("created at")||r.includes("atualizado em")||r.includes("updated at")||r.includes("verso")||r.includes("version")?"saida":"neutro"},cg=t=>{const e=[],r=new Set;return t.forEach(n=>{const a=n.name.toLowerCase();r.has(a)||(r.add(a),e.push(n))}),e},hb=t=>{const e={EI:{low:0,average:0,high:0,total:0,fp:0},EO:{low:0,average:0,high:0,total:0,fp:0},EQ:{low:0,average:0,high:0,total:0,fp:0},ILF:{low:0,average:0,high:0,total:0,fp:0},EIF:{low:0,average:0,high:0,total:0,fp:0}};t.forEach(n=>{let a;n.fieldCategory==="entrada"||["text","email","number","date","checkbox","radio","file","url"].includes(n.type)?a="EI":n.fieldCategory==="saida"||["textarea"].includes(n.type)?a="EO":a="EQ",n.complexity==="Low"?e[a].low++:n.complexity==="Average"?e[a].average++:e[a].high++,e[a].total++}),e.EI.fp=e.EI.low*3+e.EI.average*4+e.EI.high*6,e.EO.fp=e.EO.low*4+e.EO.average*5+e.EO.high*7,e.EQ.fp=e.EQ.low*3+e.EQ.average*4+e.EQ.high*6,e.ILF.fp=e.ILF.low*7+e.ILF.average*10+e.ILF.high*15,e.EIF.fp=e.EIF.low*5+e.EIF.average*7+e.EIF.high*10;const r=e.EI.fp+e.EO.fp+e.EQ.fp+e.ILF.fp+e.EIF.fp;return{totalFields:t.length,totalFunctionPoints:r,fields:t,detailedBreakdown:e}},ug=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes("webcontainer"),vm=ug?"/.netlify/functions/vision-ocr":"/api/vision-ocr",pb=ug?"/.netlify/functions/extract-fields":"/api/extract-fields",gb="/api/gemini-extract",dg=async t=>{var e,r,n;try{const a=t.length*.75;console.log(" ETAPA 2 - ENVIO PARA API DE OCR: Iniciando envio da imagem para API de OCR"),console.log("   Mtodo: POST"),console.log(`   URL: ${vm}`),console.log("   Headers: Content-Type: application/json"),console.log('   Corpo: { "imageBase64": "[BASE64_STRING_TRUNCADA]" }'),console.log(`   Tamanho da imagem: ${Math.round(a/1024)} KB`);const i=performance.now(),o=await fetch(vm,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:t})}),l=performance.now();if(console.log(` ETAPA 2 - ENVIO PARA API DE OCR: Resposta recebida em ${Math.round(l-i)}ms: status ${o.status}`),!o.ok){const u=await o.text();throw console.log(` ETAPA 2 - ENVIO PARA API DE OCR: Erro na API de OCR (${o.status})`,{error:u}),new Error(`Erro ao conectar a API de OCR: ${o.status} ${o.statusText}`)}const c=await o.json();if(!c.success)throw console.log(" ETAPA 2 - ENVIO PARA API DE OCR: API retornou erro",{error:c.error||"Erro desconhecido"}),new Error(c.error||"Erro ao conectar a API de OCR");return console.log(" ETAPA 2 - ENVIO PARA API DE OCR: OCR concludo com sucesso"),console.log(`   Elementos de texto: ${((e=c.textElements)==null?void 0:e.length)||0}`),console.log(`   Texto completo: ${(r=c.fullText)==null?void 0:r.substring(0,100)}${((n=c.fullText)==null?void 0:n.length)>100?"...":""}`),c.textElements||[]}catch(a){throw console.log(" ETAPA 2 - ENVIO PARA API DE OCR: Erro crtico na chamada da API de OCR",a),new Error("Erro ao conectar a API de OCR")}},xb=async t=>{try{const r=(await dg(t)).map(l=>l.text).join(`
`);if(!r||r.length<10)throw new Error("Texto extrado  insuficiente para extrao de campos");console.log(` ETAPA 2 - ENVIO PARA API DE OCR: Texto extrado com ${r.length} caracteres. Enviando para API de Extrao...`),console.log(`   Amostra do texto extrado: "${r.substring(0,100)}${r.length>100?"...":""}"`);const n=performance.now(),a=await fetch(pb,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})}),i=performance.now();console.log(` ETAPA 2 - ENVIO PARA API DE OCR: Resposta da API de Extrao recebida em ${Math.round(i-n)}ms: status ${a.status}`);const o=await a.json();if(!a.ok||o.status!=="success")throw console.log(" ETAPA 2 - ENVIO PARA API DE OCR: Erro na API de Extrao",o),new Error(o.message||"Erro na extrao");if(console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Extrao de campos concluda com sucesso"),o.campos){const l=Object.keys(o.campos).filter(f=>!f.endsWith("_categoria")).length;console.log(`   Total de campos extrados: ${l}`),console.log(`   Fonte de extrao: ${o.fonte||"Desconhecida"}`);const c={entrada:0,saida:0,neutro:0};Object.keys(o.campos).forEach(f=>{if(f.endsWith("_categoria")){const g=o.campos[f];(g==="entrada"||g==="saida"||g==="neutro")&&(c[g]=(c[g]||0)+1)}}),console.log("   Distribuio por categoria:"),console.log(`   - Entrada: ${c.entrada||0}`),console.log(`   - Sada: ${c.saida||0}`),console.log(`   - Neutro: ${c.neutro||0}`);const u=Object.keys(o.campos).filter(f=>!f.endsWith("_categoria")).slice(0,5);u.length>0&&(console.log("   Exemplos de campos extrados:"),u.forEach(f=>{const g=o.campos[`${f}_categoria`]||"neutro";console.log(`   - ${f}: "${o.campos[f]}" (${g})`)}),Object.keys(o.campos).filter(f=>!f.endsWith("_categoria")).length>5&&console.log(`   - ... e mais ${Object.keys(o.campos).filter(f=>!f.endsWith("_categoria")).length-5} campos`))}return o}catch(e){return console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Erro crtico na chamada da API de Extrao",e),null}},fg=async t=>{try{const e=t.length*.75,r=t.startsWith("data:image/png")?"image/png":t.startsWith("data:image/jpeg")?"image/jpeg":t.startsWith("data:image/")?t.split(";")[0].replace("data:",""):"image/unknown";console.log(" ETAPA 1 - CAPTURA E SELEO DE IMAGEM: Componente ImageFieldExtractor capturou imagem"),console.log(`   Formato: ${r}`),console.log(`   Tamanho aproximado: ${Math.round(e/1024)} KB`);let n=[];try{console.log(" ETAPA 2 - TENTANDO EXTRAO COM GEMINI AI (mtodo preferencial)...");const c=performance.now(),u=await fetch(gb,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:t})}),f=performance.now();if(console.log(` Gemini API respondeu em ${Math.round(f-c)}ms: status ${u.status}`),u.ok){const g=await u.json();if(g.success&&g.fields&&g.fields.length>0){console.log(` Gemini extraiu ${g.fields.length} campos com sucesso!`),n=g.fields.map(h=>{const v={id:h.id,name:h.name,type:h.type,required:h.required,description:h.description,complexity:h.complexity,fpValue:h.fpValue,source:"Gemini AI",fieldCategory:h.fieldCategory,confidence:h.confidence,position:void 0};return console.log(`    Campo: ${h.name}  Categoria: ${h.fieldCategory||"undefined"}`),v});const y={entrada:n.filter(h=>h.fieldCategory==="entrada").length,neutro:n.filter(h=>h.fieldCategory==="neutro").length,derivado:n.filter(h=>h.fieldCategory==="derivado").length,outros:n.filter(h=>!h.fieldCategory||h.fieldCategory!=="entrada"&&h.fieldCategory!=="neutro"&&h.fieldCategory!=="derivado").length};return console.log(" ETAPA 3 - CAMPOS EXTRADOS COM GEMINI:"),console.log(`   Total de campos: ${n.length}`),console.log("   Distribuio por categoria:"),console.log(`   - Entrada: ${y.entrada}`),console.log(`   - Neutro: ${y.neutro}`),console.log(`   - Derivado: ${y.derivado}`),n}else console.log(" Gemini retornou resposta vazia ou sem campos")}else{const g=await u.text();console.log(` Gemini API retornou erro ${u.status}: ${g}`)}}catch(c){console.log(` Gemini falhou: ${c.message}. Tentando fallback com OCR+Regex...`)}console.log(" ETAPA 2 - FALLBACK: Usando mtodo OCR+Regex...");const a=await xb(t);if(a&&a.status==="success"&&a.campos&&Object.keys(a.campos).length>0)console.log(` ETAPA 3 - CAMPOS RETORNADOS DA API: Processando ${Object.keys(a.campos).filter(c=>!c.endsWith("_categoria")).length} campos extrados`),n=Object.entries(a.campos).filter(([c])=>!c.endsWith("_categoria")).map(([c,u])=>{const f=ss("",c),g=Tr(f,c),y=ju(f,g),h=a.campos[`${c}_categoria`]||Ot(c,u);return{id:sr(),name:c,type:f,required:!1,description:`Campo extrado via ${a.fonte} (valor: ${u})`,complexity:g,fpValue:y,source:a.fonte,fieldCategory:h,confidence:.9,position:void 0}});else{console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Extrao via API falhou. Realizando OCR local");const c=await dg(t);console.log(` ETAPA 3 - CAMPOS RETORNADOS DA API: OCR local concludo com ${c.length} elementos de texto`),n=c.map(u=>{const f=ss("",u.text),g=Tr(f,u.text),y=ju(f,g),h=Ot(u.text,"");return{id:sr(),name:u.text,type:f,required:!1,description:`Campo identificado por OCR com ${Math.round((u.confidence||.8)*100)}% de confiana`,complexity:g,fpValue:y,source:"Google Cloud Vision",confidence:u.confidence,fieldCategory:h,position:u.boundingBox}})}const o=cg(n).filter(c=>!yb(c.name)),l={entrada:o.filter(c=>c.fieldCategory==="entrada").length,saida:o.filter(c=>c.fieldCategory==="saida").length,neutro:o.filter(c=>c.fieldCategory==="neutro"||!c.fieldCategory).length,derivado:o.filter(c=>c.fieldCategory==="derivado").length};return console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Processamento final concludo"),console.log(`   Total de campos: ${o.length}`),console.log("   Distribuio por categoria:"),console.log(`   - Entrada: ${l.entrada}`),console.log(`   - Sada: ${l.saida}`),console.log(`   - Neutro: ${l.neutro}`),console.log(`   - Derivado: ${l.derivado}`),o}catch(e){return console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Erro durante extrao de campos",e),[]}},yb=t=>{const e=["cancelar","aes","ajuda","voltar","menu","visualizar","arquivo","configurao","administrao","painel","verso","sair","entrar","salvar","editar","excluir","novo","pesquisar","filtrar","ordenar","imprimir","exportar","importar","atualizar","fechar","abrir","copyright","todos os direitos","desenvolvido por","powered by","pgina","de","prximo","anterior","primeiro","ltimo","topo","rodap","cabealho","sistema","aplicao","app","verso","v.","login","logout","senha","usurio","esqueci","lembrar","manter","conectado","registrar","cadastrar","criar conta","entrar com","cancel","actions","help","back","menu","view","file","configuration","administration","dashboard","version","exit","enter","save","edit","delete","new","search","filter","sort","print","export","import","update","close","open","copyright","all rights","developed by","powered by","page","of","next","previous","first","last","top","footer","header","system","application","app","version","v.","login","logout","password","username","forgot","remember","keep","connected","register","sign up","create account","sign in with"],r=t.toLowerCase();return e.some(n=>r.includes(n))},Rd=({screenshotData:t,processId:e,onClose:r,onSaveAnalysis:n})=>{const[a,i]=Q.useState([]),[o,l]=Q.useState(null),[c,u]=Q.useState(!1),[f,g]=Q.useState("fields"),[y,h]=Q.useState(""),[v,b]=Q.useState("all"),[S,p]=Q.useState("all"),[x,w]=Q.useState("all"),[T,O]=Q.useState(!1),[G,z]=Q.useState(!1),[K,I]=Q.useState([]),se=(A,Y)=>{const re=`[${new Date().toISOString().split("T")[1].split(".")[0]}]  FieldExtractorModal: ${A}`;console.log(re,Y),I(ee=>[...ee,Y?`${re} ${JSON.stringify(Y)}`:re])};Q.useEffect(()=>{ae()},[t]);const ae=async()=>{u(!0),se("Iniciando extrao de campos a partir dos dados fornecidos");try{let A=[];try{se("Tentando analisar dados como JSON"),console.log(" DEBUG - FieldExtractorModal - screenshotData:",t),A=JSON.parse(t),se(`Dados JSON analisados com sucesso, encontrados ${A.length} campos`),console.log(" DEBUG - FieldExtractorModal - fieldsData aps JSON.parse:",A)}catch(X){se("Falha ao analisar como JSON, tentando extrair campos do texto",X),console.log(" DEBUG - FieldExtractorModal - Erro ao analisar JSON:",X),A=ua(t),se(`Extrao de texto concluda, encontrados ${A.length} campos`),console.log(" DEBUG - FieldExtractorModal - fieldsData aps extractFieldsFromData:",A)}i(A),se("Iniciando anlise de pontos de funo");const Y=hb(A);se(`Anlise de pontos de funo concluda: ${Y.totalFunctionPoints} pontos totais`),l(Y)}catch(A){console.error("Error extracting fields:",A),se("Erro durante a extrao de campos",A)}finally{u(!1)}},P=A=>{switch(A){case"text":return s.jsx("span",{className:"text-blue-600",children:"Aa"});case"number":return s.jsx("span",{className:"text-green-600",children:"123"});case"date":return s.jsx("span",{className:"text-purple-600",children:""});case"select":return s.jsx("span",{className:"text-orange-600",children:""});case"checkbox":return s.jsx("span",{className:"text-teal-600",children:""});case"radio":return s.jsx("span",{className:"text-red-600",children:""});case"file":return s.jsx("span",{className:"text-gray-600",children:""});case"email":return s.jsx("span",{className:"text-indigo-600",children:""});case"url":return s.jsx("span",{className:"text-cyan-600",children:""});case"textarea":return s.jsx("span",{className:"text-amber-600",children:""});default:return s.jsx("span",{className:"text-gray-600",children:"?"})}},H=A=>{switch(A){case"Low":return"text-green-600";case"Average":return"text-yellow-600";case"High":return"text-red-600";default:return"text-gray-600"}},C=A=>{switch(A){case"entrada":return"bg-blue-100 text-blue-800";case"saida":return"bg-purple-100 text-purple-800";case"neutro":return"bg-gray-100 text-gray-800";case"derivado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},B=A=>{switch(A){case"entrada":return"Entrada";case"saida":return"Sada";case"neutro":return"Neutro";case"derivado":return"Derivado";default:return"No classificado"}},q=a.filter(A=>{const Y=A.name.toLowerCase().includes(y.toLowerCase())||(A.description||"").toLowerCase().includes(y.toLowerCase()),X=v==="all"||A.type===v,re=S==="all"||A.complexity===S,ee=x==="all"||A.fieldCategory===x;return Y&&X&&re&&ee});console.log(" DEBUG - FieldExtractorModal - filteredFields:",q);const F=()=>{if(!a.length)return;const A=["Name","Type","Complexity","FP Value","Category","Source","Description"],Y=a.map(E=>[E.name,E.type,E.complexity,E.fpValue.toString(),E.fieldCategory||"neutro",E.source,E.description||""]),X=[A.join(","),...Y.map(E=>E.map(Z=>`"${Z.replace(/"/g,'""')}"`).join(","))].join(`
`),re=new Blob([X],{type:"text/csv;charset=utf-8;"}),ee=URL.createObjectURL(re),k=document.createElement("a");k.href=ee,k.download=`function-point-fields-${e}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),se("Dados exportados para CSV")},V=A=>{navigator.clipboard.writeText(A),O(!0),setTimeout(()=>O(!1),2e3),se("Contedo copiado para a rea de transferncia")},D=()=>o?`# Function Point Analysis Report
Generated: ${new Date().toLocaleString()}

## Summary
- Total Fields Identified: ${o.totalFields}
- Total Function Points: ${o.totalFunctionPoints}

## Field Categories
- Input Fields (EI): ${o.detailedBreakdown.EI.total} (${o.detailedBreakdown.EI.fp} FP)
- Output Fields (EO): ${o.detailedBreakdown.EO.total} (${o.detailedBreakdown.EO.fp} FP)
- Query Fields (EQ): ${o.detailedBreakdown.EQ.total} (${o.detailedBreakdown.EQ.fp} FP)

## Detailed Breakdown

### External Inputs (EI)
- Low: ${o.detailedBreakdown.EI.low}  3 = ${o.detailedBreakdown.EI.low*3} FP
- Average: ${o.detailedBreakdown.EI.average}  4 = ${o.detailedBreakdown.EI.average*4} FP
- High: ${o.detailedBreakdown.EI.high}  6 = ${o.detailedBreakdown.EI.high*6} FP
- Total EI: ${o.detailedBreakdown.EI.total} (${o.detailedBreakdown.EI.fp} FP)

### External Outputs (EO)
- Low: ${o.detailedBreakdown.EO.low}  4 = ${o.detailedBreakdown.EO.low*4} FP
- Average: ${o.detailedBreakdown.EO.average}  5 = ${o.detailedBreakdown.EO.average*5} FP
- High: ${o.detailedBreakdown.EO.high}  7 = ${o.detailedBreakdown.EO.high*7} FP
- Total EO: ${o.detailedBreakdown.EO.total} (${o.detailedBreakdown.EO.fp} FP)

### External Inquiries (EQ)
- Low: ${o.detailedBreakdown.EQ.low}  3 = ${o.detailedBreakdown.EQ.low*3} FP
- Average: ${o.detailedBreakdown.EQ.average}  4 = ${o.detailedBreakdown.EQ.average*4} FP
- High: ${o.detailedBreakdown.EQ.high}  6 = ${o.detailedBreakdown.EQ.high*6} FP
- Total EQ: ${o.detailedBreakdown.EQ.total} (${o.detailedBreakdown.EQ.fp} FP)

### Internal Logical Files (ILF)
- Low: ${o.detailedBreakdown.ILF.low}  7 = ${o.detailedBreakdown.ILF.low*7} FP
- Average: ${o.detailedBreakdown.ILF.average}  10 = ${o.detailedBreakdown.ILF.average*10} FP
- High: ${o.detailedBreakdown.ILF.high}  15 = ${o.detailedBreakdown.ILF.high*15} FP
- Total ILF: ${o.detailedBreakdown.ILF.total} (${o.detailedBreakdown.ILF.fp} FP)

### External Interface Files (EIF)
- Low: ${o.detailedBreakdown.EIF.low}  5 = ${o.detailedBreakdown.EIF.low*5} FP
- Average: ${o.detailedBreakdown.EIF.average}  7 = ${o.detailedBreakdown.EIF.average*7} FP
- High: ${o.detailedBreakdown.EIF.high}  10 = ${o.detailedBreakdown.EIF.high*10} FP
- Total EIF: ${o.detailedBreakdown.EIF.total} (${o.detailedBreakdown.EIF.fp} FP)

## Field Details

${o.fields.map(A=>`- ${A.name} (${A.type}, ${A.complexity}, ${A.fieldCategory||"neutro"}): ${A.fpValue} FP`).join(`
`)}

## Notes
- This analysis follows the IFPUG Function Point Counting Practices Manual
- Complexity ratings are based on field type and characteristics
- Function point values are assigned according to standard IFPUG weights
- Fields are classified as Input (EI), Output (EO), or Query (EQ)
`:"",J=()=>o?`=== DADOS EXTRADOS POR IA ===
Processo Elementar: EI (External Input)
Complexidade: ${o.detailedBreakdown.EI.high>o.detailedBreakdown.EI.average+o.detailedBreakdown.EI.low?"High":o.detailedBreakdown.EI.low>o.detailedBreakdown.EI.average+o.detailedBreakdown.EI.high?"Low":"Average"}
Total de Pontos de Funo: ${o.totalFunctionPoints}

Campos Identificados:
${a.slice(0,20).map(A=>`- ${A.name} (${A.type}, ${A.complexity}, ${B(A.fieldCategory)}): ${A.fpValue} FP`).join(`
`)}
${a.length>20?`
... e mais ${a.length-20} campos`:""}

Distribuio por Categoria:
- Campos de Entrada (EI): ${o.detailedBreakdown.EI.total} (${o.detailedBreakdown.EI.fp} PF)
- Campos de Sada (EO): ${o.detailedBreakdown.EO.total} (${o.detailedBreakdown.EO.fp} PF)
- Campos de Consulta (EQ): ${o.detailedBreakdown.EQ.total} (${o.detailedBreakdown.EQ.fp} PF)`:"",U=()=>{n&&o&&(n(J()),z(!0),setTimeout(()=>z(!1),2e3),se("Anlise salva no detalhamento"))};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Anlise de Pontos de Funo"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsx("button",{onClick:()=>g("fields"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${f==="fields"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Campos Extrados"}),s.jsx("button",{onClick:()=>g("analysis"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${f==="analysis"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Anlise de Pontos de Funo"}),s.jsx("button",{onClick:()=>g("export"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${f==="export"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Exportar Relatrio"})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:c?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Extraindo campos e analisando pontos de funo..."})]}):s.jsxs(s.Fragment,{children:[f==="fields"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar campos...",value:y,onChange:A=>h(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("div",{children:s.jsxs("select",{value:v,onChange:A=>b(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os Tipos"}),s.jsx("option",{value:"text",children:"Texto"}),s.jsx("option",{value:"number",children:"Nmero"}),s.jsx("option",{value:"date",children:"Data"}),s.jsx("option",{value:"select",children:"Select"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"radio",children:"Radio"}),s.jsx("option",{value:"file",children:"Arquivo"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"url",children:"URL"}),s.jsx("option",{value:"textarea",children:"rea de Texto"})]})}),s.jsx("div",{children:s.jsxs("select",{value:S,onChange:A=>p(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todas as Complexidades"}),s.jsx("option",{value:"Low",children:"Baixa"}),s.jsx("option",{value:"Average",children:"Mdia"}),s.jsx("option",{value:"High",children:"Alta"})]})}),s.jsx("div",{children:s.jsxs("select",{value:x,onChange:A=>w(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"Todas as Categorias"}),s.jsx("option",{value:"entrada",children:"Entrada"}),s.jsx("option",{value:"saida",children:"Sada"}),s.jsx("option",{value:"neutro",children:"Neutro"})]})})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Campos Extrados Automaticamente"}),s.jsxs("p",{className:"text-sm text-blue-800",children:[a.length," campos foram identificados a partir dos dados fornecidos. Cada campo recebeu uma classificao de complexidade, categoria (entrada/sada) e um valor de pontos de funo de acordo com as diretrizes do IFPUG."]})]})]}),q.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome do Campo"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Complexidade"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos de Funo"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fonte"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(A=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.name,A.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),A.description&&s.jsx("div",{className:"text-xs text-gray-500 mt-1 max-w-xs truncate",title:A.description,children:A.description})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:P(A.type)}),s.jsx("span",{className:"text-sm text-gray-900",children:A.type})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs leading-5 font-semibold rounded-full ${C(A.fieldCategory)}`,children:B(A.fieldCategory)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`text-sm font-medium ${H(A.complexity)}`,children:A.complexity})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.fpValue}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:A.source})})]},A.id))})]})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx(et,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:y||v!=="all"||S!=="all"||x!=="all"?"Nenhum campo encontrado com esses filtros":"Nenhum campo extrado"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:y||v!=="all"||S!=="all"||x!=="all"?"Tente ajustar os critrios de busca ou filtros":"No foi possvel extrair campos dos dados fornecidos. Tente fornecer mais detalhes ou outro formato de dados."})]}),K.length>0&&s.jsx("div",{className:"mt-4",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(mo,{className:"w-4 h-4 mr-1"}),"Ver logs de processamento (",K.length,")"]}),s.jsx("div",{className:"mt-2 bg-gray-100 p-3 rounded-lg text-xs font-mono text-gray-800 max-h-40 overflow-y-auto",children:K.map((A,Y)=>s.jsx("div",{className:"py-1 border-b border-gray-200 last:border-0",children:A},Y))})]})})]}),f==="analysis"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Resumo da Anlise"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Total de Campos:"}),s.jsx("span",{className:"text-lg font-semibold text-blue-600",children:o.totalFields})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Total de Pontos de Funo:"}),s.jsx("span",{className:"text-xl font-bold text-blue-700",children:o.totalFunctionPoints})]}),s.jsx("div",{className:"h-1 bg-gray-200 rounded-full mt-2",children:s.jsx("div",{className:"h-1 bg-blue-600 rounded-full",style:{width:`${Math.min(100,o.totalFunctionPoints/200*100)}%`}})}),s.jsx("div",{className:"text-xs text-gray-500 text-right",children:"Baseado no padro IFPUG"})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm md:col-span-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Distribuio por Categoria"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:o.detailedBreakdown.EI.total}),s.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Entrada (EI)"}),s.jsxs("div",{className:"text-xs text-gray-500",children:[o.detailedBreakdown.EI.fp," PF"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:o.detailedBreakdown.EO.total}),s.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Sada (EO)"}),s.jsxs("div",{className:"text-xs text-gray-500",children:[o.detailedBreakdown.EO.fp," PF"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600 mb-1",children:o.detailedBreakdown.EQ.total}),s.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Consulta (EQ)"}),s.jsxs("div",{className:"text-xs text-gray-500",children:[o.detailedBreakdown.EQ.fp," PF"]})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalhamento por Tipo e Complexidade"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(o.detailedBreakdown).filter(([A,Y])=>Y.total>0).map(([A,Y])=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center justify-between",children:[s.jsx("span",{children:A}),s.jsxs("span",{className:"text-blue-600",children:[Y.fp," PF"]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-green-600",children:"Baixa:"}),s.jsxs("span",{children:[Y.low," (",Y.low*(A==="EI"||A==="EQ"?3:A==="EO"?4:A==="ILF"?7:5)," PF)"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-yellow-600",children:"Mdia:"}),s.jsxs("span",{children:[Y.average," (",Y.average*(A==="EI"||A==="EQ"?4:A==="EO"?5:A==="ILF"?10:7)," PF)"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-red-600",children:"Alta:"}),s.jsxs("span",{children:[Y.high," (",Y.high*(A==="EI"||A==="EQ"?6:A==="EO"?7:A==="ILF"?15:10)," PF)"]})]})]}),s.jsx("div",{className:"h-1 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-1 bg-blue-600 rounded-full",style:{width:`${Y.total?Y.fp/(Y.total*15)*100:0}%`}})})]},A))})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Distribuio por Categoria"}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),s.jsx("span",{children:"Entrada"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-1"}),s.jsx("span",{children:"Sada"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full mr-1"}),s.jsx("span",{children:"Neutro"})]})]})]}),s.jsx("div",{className:"space-y-4",children:["text","number","date","select","checkbox","radio","file","email","url","textarea"].map(A=>{const Y=a.filter(E=>E.type===A);if(Y.length===0)return null;const X=Y.filter(E=>E.fieldCategory==="entrada").length,re=Y.filter(E=>E.fieldCategory==="saida").length,ee=Y.filter(E=>E.fieldCategory==="neutro"||!E.fieldCategory).length,k=Y.length;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:P(A)}),s.jsx("span",{className:"font-medium",children:A.charAt(0).toUpperCase()+A.slice(1)})]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[k," campo(s)"]})]}),s.jsxs("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden flex",children:[X>0&&s.jsx("div",{className:"h-full bg-blue-500",style:{width:`${X/k*100}%`},title:`${X} campo(s) de entrada`}),re>0&&s.jsx("div",{className:"h-full bg-purple-500",style:{width:`${re/k*100}%`},title:`${re} campo(s) de sada`}),ee>0&&s.jsx("div",{className:"h-full bg-gray-500",style:{width:`${ee/k*100}%`},title:`${ee} campo(s) neutros`})]})]},A)})})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Sobre a Anlise de Pontos de Funo"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"Esta anlise segue as diretrizes do IFPUG (International Function Point Users Group) para contagem de pontos de funo. Os campos so classificados como Entradas Externas (EI), Sadas Externas (EO) ou Consultas Externas (EQ) com base em suas caractersticas. A complexidade  determinada pelo tipo de campo e suas propriedades."}),s.jsx("div",{className:"mt-2",children:s.jsxs("a",{href:"https://www.ifpug.org/about-ifpug/about-function-point-analysis/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(tg,{className:"w-3 h-3 mr-1"}),"Saiba mais sobre Anlise de Pontos de Funo"]})})]})]})})]}),f==="export"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Relatrio de Anlise de Pontos de Funo"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 relative",children:[s.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono overflow-auto max-h-96",children:D()}),s.jsx("button",{onClick:()=>V(D()),className:"absolute top-2 right-2 p-2 bg-white rounded-md shadow-sm hover:bg-gray-100 transition-colors",title:"Copiar para rea de transferncia",children:T?s.jsx(Ze,{className:"w-5 h-5 text-green-600"}):s.jsx(or,{className:"w-5 h-5 text-gray-600"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[s.jsxs("button",{onClick:()=>V(D()),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Copiar Relatrio"]}),s.jsxs("button",{onClick:F,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Exportar para CSV"]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cdigo para Insero no Documento"}),s.jsx("button",{onClick:U,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors",children:G?s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Salvo!"]}):s.jsxs(s.Fragment,{children:[s.jsx(_d,{className:"w-4 h-4 mr-2"}),"Salvar no Detalhamento"]})})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Este cdigo ser inserido no campo "Detalhamento do Trabalho" da funcionalidade para incluir a anlise de pontos de funo no documento exportado.'}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 relative",children:[s.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono overflow-auto max-h-40",children:J()}),s.jsx("button",{onClick:()=>V(J()),className:"absolute top-2 right-2 p-2 bg-white rounded-md shadow-sm hover:bg-gray-100 transition-colors",title:"Copiar para rea de transferncia",children:T?s.jsx(Ze,{className:"w-5 h-5 text-green-600"}):s.jsx(or,{className:"w-5 h-5 text-gray-600"})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Como Utilizar"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal pl-4",children:[s.jsx("li",{children:'Clique em "Salvar no Detalhamento" para adicionar automaticamente'}),s.jsx("li",{children:"Ou copie o cdigo acima manualmente"}),s.jsx("li",{children:'O cdigo ser adicionado ao campo "Detalhamento do Trabalho"'}),s.jsx("li",{children:"Ao exportar para Word, a anlise de pontos de funo ser includa automaticamente"})]})]})]})})]}),K.length>0&&s.jsx("div",{className:"mt-4",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(mo,{className:"w-4 h-4 mr-1"}),"Ver logs de processamento (",K.length,")"]}),s.jsx("div",{className:"mt-2 bg-gray-100 p-3 rounded-lg text-xs font-mono text-gray-800 max-h-40 overflow-y-auto",children:K.map((A,Y)=>s.jsx("div",{className:"py-1 border-b border-gray-200 last:border-0",children:A},Y))})]})})]})]})})]})})},wb=({onClose:t})=>{const[e,r]=Q.useState(null),[n,a]=Q.useState(!1),[i,o]=Q.useState([]),[l,c]=Q.useState(null),[u,f]=Q.useState(!1),g=Q.useRef(null),[y,h]=Q.useState(!1),v=Q.useRef(null),b=Q.useRef(null),[S,p]=Q.useState(null),[x,w]=Q.useState("idle"),[T,O]=Q.useState(!1),[G,z]=Q.useState(!1),[K,I]=Q.useState(null),[se,ae]=Q.useState([{step:"Captura e seleo imagem",status:"pending"},{step:"Envio para API de OCR",status:"pending"},{step:"Campos retornados da API",status:"pending"}]),[P,H]=Q.useState(!1),[C,B]=Q.useState(!0),[q,F]=Q.useState(10);Q.useEffect(()=>{if(T){const d=setTimeout(()=>{O(!1)},2e3);return()=>clearTimeout(d)}},[T]);const V=(d,m,j)=>{ae($=>$.map((te,W)=>W===d?{...te,status:m,message:j}:te))},D=()=>{ae([{step:"Captura e seleo imagem",status:"pending"},{step:"Envio para API de OCR",status:"pending"},{step:"Campos retornados da API",status:"pending"}]),H(!1)},J=d=>{var j;const m=(j=d.target.files)==null?void 0:j[0];if(m)if(m.type.startsWith("image/")){c(null);const $=new FileReader;$.onload=te=>{var ce;const W=(ce=te.target)==null?void 0:ce.result;r(W),Y(W)},$.readAsDataURL(m)}else c("Por favor, selecione apenas arquivos de imagem."),r(null)},U=d=>{d.preventDefault();const m=d.dataTransfer.files[0];if(m)if(m.type.startsWith("image/")){c(null);const j=new FileReader;j.onload=$=>{var W;const te=(W=$.target)==null?void 0:W.result;r(te),Y(te)},j.readAsDataURL(m)}else c("Por favor, selecione apenas arquivos de imagem.")},A=d=>{d.preventDefault()},Y=async d=>{a(!0),c(null),w("idle"),z(!1),I(null),D(),H(!0),o([]);const m=window.fetch;try{V(0,"processing","Componente ImageFieldExtractor capturou imagem"),await new Promise(W=>setTimeout(W,500));const j=Math.round(d.length*3/4/1024),$=d.startsWith("data:image/png")?"PNG":d.startsWith("data:image/jpeg")?"JPEG":d.startsWith("data:image/")?d.split(";")[0].replace("data:",""):"Desconhecido";V(0,"success",`Imagem capturada: ${$}, ${j} KB`),console.log(" ETAPA 1 - CAPTURA E SELEO DE IMAGEM: Componente ImageFieldExtractor capturou imagem"),console.log(`   Formato: ${$}`),console.log(`   Tamanho aproximado: ${j} KB`),V(1,"processing","Conectando com o servio de extrao..."),console.log(" ETAPA 2 - ENVIO PARA API DE OCR: Enviando imagem para processamento"),console.log("   Mtodo: POST"),console.log("   URL: /api/vision-ocr"),console.log("   Headers: Content-Type: application/json"),console.log('   Corpo: { "imageBase64": "[BASE64_STRING_TRUNCADA]" }'),console.log(`   Tamanho da imagem: ${j} KB`),window.fetch=async(...W)=>{var fe,de;const[ce]=W;if(ce.toString().includes("extract-fields")||ce.toString().includes("vision-ocr")){const pe=ce.toString().split("/").pop();V(1,"success",`Conectado ao endpoint: ${pe}`);const ve=await m(...W),be=ve.clone();try{const je=await be.json();if(V(2,"processing","Processando campos extrados..."),je.success||je.status==="success"){if(je.fonte==="regex"||je.campos){const dt=Object.keys(je.campos||{}).filter(Ge=>!Ge.endsWith("_categoria")).length;V(2,"success",`${dt} campos encontrados via Regex`),I("regex")}else if(je.fonte==="ia"){const dt=Object.keys(je.campos||{}).filter(Ge=>!Ge.endsWith("_categoria")).length;V(2,"success",`${dt} campos encontrados via IA`),I("ia")}else if(je.textElements){const dt=je.textElements.length;V(2,"success",`${dt} elementos de texto extrados`)}if(console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Processamento concludo"),je.campos){const dt=Object.keys(je.campos).filter(cr=>!cr.endsWith("_categoria")).length;console.log(`   Total de campos extrados: ${dt}`),console.log(`   Fonte de extrao: ${je.fonte||"Desconhecida"}`);const Ge={entrada:0,saida:0,neutro:0,derivado:0};Object.keys(je.campos).forEach(cr=>{if(cr.endsWith("_categoria")){const Pe=je.campos[cr];(Pe==="entrada"||Pe==="saida"||Pe==="neutro"||Pe==="derivado")&&(Ge[Pe]=(Ge[Pe]||0)+1)}}),console.log("   Distribuio por categoria:"),console.log(`   - Entrada: ${Ge.entrada||0}`),console.log(`   - Sada: ${Ge.saida||0}`),console.log(`   - Neutro: ${Ge.neutro||0}`),console.log(`   - Derivado: ${Ge.derivado||0}`)}else je.textElements&&(console.log(`   Total de elementos extrados: ${je.textElements.length}`),console.log(`   Texto completo: ${(fe=je.fullText)==null?void 0:fe.substring(0,100)}${((de=je.fullText)==null?void 0:de.length)>100?"...":""}`))}else V(2,"error",je.message||je.error||"Falha na extrao de campos"),console.log(" ETAPA 3 - CAMPOS RETORNADOS DA API: Erro na extrao"),console.log(`   Erro: ${je.message||je.error||"Falha na extrao de campos"}`)}catch(je){V(2,"error","Erro ao processar resposta da API"),console.error("Erro ao processar resposta JSON:",je)}return ve}return m(...W)};const te=await fg(d);window.fetch=m,o(te),w("success")}catch(j){console.error(" Componente ImageFieldExtractor: Erro na extrao:",j),c(j.message||"Erro ao processar a imagem. Tente novamente com outra imagem."),w("error"),o([]);const $=se.findIndex(te=>te.status==="processing");$>=0&&V($,"error",j.message),window.fetch!==m&&(window.fetch=m)}finally{a(!1)}},X=async()=>{p(null),h(!0);try{const d=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});v.current&&(v.current.srcObject=d)}catch(d){console.error("Error accessing camera:",d),p("No foi possvel acessar a cmera. Verifique as permisses do navegador.")}},re=()=>{v.current&&v.current.srcObject&&(v.current.srcObject.getTracks().forEach(j=>j.stop()),v.current.srcObject=null),h(!1)},ee=()=>{if(v.current&&b.current){const d=v.current,m=b.current;m.width=d.videoWidth,m.height=d.videoHeight;const j=m.getContext("2d");if(j){j.drawImage(d,0,0,m.width,m.height);const $=m.toDataURL("image/jpeg");r($),Y($),re()}}},k=d=>{switch(d){case"text":return s.jsx("span",{className:"text-blue-600",children:"Aa"});case"number":return s.jsx("span",{className:"text-green-600",children:"123"});case"date":return s.jsx("span",{className:"text-purple-600",children:""});case"select":return s.jsx("span",{className:"text-orange-600",children:""});case"checkbox":return s.jsx("span",{className:"text-teal-600",children:""});case"radio":return s.jsx("span",{className:"text-red-600",children:""});case"file":return s.jsx("span",{className:"text-gray-600",children:""});case"email":return s.jsx("span",{className:"text-indigo-600",children:""});case"url":return s.jsx("span",{className:"text-cyan-600",children:""});case"textarea":return s.jsx("span",{className:"text-amber-600",children:""});default:return s.jsx("span",{className:"text-gray-600",children:"?"})}},E=d=>{switch(d){case"pending":return s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});case"processing":return s.jsx(_v,{className:"w-5 h-5 text-blue-500 animate-spin"});case"success":return s.jsx(Ze,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(gt,{className:"w-5 h-5 text-red-500"});default:return s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}},Z=()=>{if(!i.length)return;const d=["Name","Type","Complexity","FP Value","Category","Required","Description","Source"],m=i.map(ce=>[ce.name,ce.type,ce.complexity,ce.fpValue.toString(),ce.fieldCategory||"neutro",ce.required?"Yes":"No",ce.description||"",ce.source||"OCR"]),j=[d.join(","),...m.map(ce=>ce.map(fe=>`"${String(fe).replace(/"/g,'""')}"`).join(","))].join(`
`),$=new Blob([j],{type:"text/csv;charset=utf-8;"}),te=URL.createObjectURL($),W=document.createElement("a");W.href=te,W.download=`extracted-fields-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(W),W.click(),document.body.removeChild(W)},M=()=>{try{const d=JSON.stringify(i,null,2);navigator.clipboard.writeText(d),O(!0);const m=document.createElement("div");m.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",m.textContent="JSON copiado para a rea de transferncia!",document.body.appendChild(m),setTimeout(()=>{document.body.removeChild(m)},3e3)}catch(d){console.error("Error copying to clipboard:",d),alert("Erro ao copiar para a rea de transferncia.")}},R=()=>{z(!G)},L=()=>{B(!C)},ne=()=>{F(d=>d+10)},N=d=>{switch(d){case"Low":return"text-green-600";case"Average":return"text-yellow-600";case"High":return"text-red-600";default:return"text-gray-600"}},ie=d=>{switch(d){case"entrada":return"bg-blue-100 text-blue-800";case"saida":return"bg-purple-100 text-purple-800";case"neutro":return"bg-gray-100 text-gray-800";case"derivado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},_=d=>{switch(d){case"entrada":return"Entrada";case"saida":return"Sada";case"neutro":return"Neutro";case"derivado":return"Derivado";default:return"Neutro"}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Uo,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Extrao de Campos com IA"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Extraia campos de formulrios automaticamente usando OCR e IA"})]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload de Imagem"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Faa upload de uma imagem contendo um formulrio ou tela de sistema. O sistema ir analisar a imagem e extrair automaticamente os campos identificados."})]}),y?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[s.jsx("video",{ref:v,autoPlay:!0,playsInline:!0,className:"w-full max-h-[50vh] object-contain mx-auto"}),s.jsx("canvas",{ref:b,className:"hidden"}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:ee,className:"p-4 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors",children:s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-800"})})})]}),S&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-800",children:S})}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:re,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("p",{className:"text-sm text-gray-500 italic",children:"Clique no boto central para capturar a imagem"})]})]}):s.jsx(s.Fragment,{children:e?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e,alt:"Selected",className:"max-h-[40vh] mx-auto object-contain rounded-lg border border-gray-200"}),s.jsx("button",{onClick:()=>{r(null),o([]),w("idle"),z(!1),D()},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remover imagem",children:s.jsx(tt,{className:"w-4 h-4"})})]}),P&&s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(Pt,{className:"w-4 h-4 text-blue-600"}),"Log de Processamento"]})}),s.jsx("div",{className:"space-y-3",children:se.map((d,m)=>s.jsxs("div",{className:"flex items-start gap-3",children:[E(d.status),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium ${d.status==="processing"?"text-blue-600":d.status==="success"?"text-green-600":d.status==="error"?"text-red-600":"text-gray-500"}`,children:d.step}),d.message&&s.jsx("div",{className:"text-sm text-gray-600",children:d.message})]}),d.status==="success"&&m===1&&K==="regex"&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[s.jsx(hm,{className:"w-3 h-3"}),"Regex"]}),d.status==="success"&&m===2&&K==="ia"&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:[s.jsx(dm,{className:"w-3 h-3"}),"IA"]})]},m))})]}),n?s.jsxs("div",{className:"flex items-center justify-center p-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),s.jsx("p",{className:"text-gray-600",children:"Processando imagem e extraindo campos..."})]}):s.jsxs(s.Fragment,{children:[x!=="idle"&&s.jsx("div",{className:`p-4 rounded-lg ${x==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[x==="success"?s.jsx(Ze,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):s.jsx(gt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-medium ${x==="success"?"text-green-900":"text-red-900"} mb-1`,children:x==="success"?`Extrao concluda com ${K==="regex"?"Regex":"IA"}`:"Erro ao extrair campos"}),s.jsx("p",{className:`text-sm ${x==="success"?"text-green-800":"text-red-800"}`,children:x==="success"?`${i.length} campos foram identificados na imagem.`:l||"Ocorreu um erro ao processar a imagem."}),x==="success"&&K&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Mtodo de extrao:"}),s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${K==="regex"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:K==="regex"?s.jsxs(s.Fragment,{children:[s.jsx(hm,{className:"w-3 h-3"}),"Regex (rpido)"]}):s.jsxs(s.Fragment,{children:[s.jsx(dm,{className:"w-3 h-3"}),"IA (avanado)"]})})]})]})]})}),x==="success"&&i.length>0&&s.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(Pt,{className:"w-5 h-5 text-blue-600"}),"Campos Extrados (",i.length,")"]}),s.jsx("button",{onClick:L,className:"text-blue-600 hover:text-blue-800 transition-colors",children:C?s.jsx(gu,{className:"w-4 h-4"}):s.jsx(xu,{className:"w-4 h-4"})})]}),C&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Complexidade"}),s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FP"}),s.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fonte"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice(0,q).map(d=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[d.name,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:k(d.type)}),s.jsx("span",{className:"text-sm text-gray-900",children:d.type})]})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ie(d.fieldCategory)}`,children:_(d.fieldCategory)})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.jsx("span",{className:`text-sm font-medium ${N(d.complexity)}`,children:d.complexity})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:d.fpValue}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:d.source})})]},d.id))})]})}),i.length>q&&s.jsx("div",{className:"mt-3 text-center",children:s.jsxs("button",{onClick:ne,className:"px-4 py-2 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:["Mostrar mais campos (",i.length-q," restantes)"]})}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsxs("div",{className:"text-xs text-gray-500",children:["Total de pontos de funo: ",s.jsx("span",{className:"font-bold",children:i.reduce((d,m)=>d+m.fpValue,0)})]})})]})]}),x==="success"&&i.length>0&&G&&s.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"JSON Extrado"}),s.jsx("button",{onClick:M,className:"inline-flex items-center px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:T?s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Copiado!"]}):s.jsxs(s.Fragment,{children:[s.jsx(or,{className:"w-3 h-3 mr-1"}),"Copiar"]})})]}),s.jsx("pre",{className:"text-xs bg-gray-800 text-green-400 p-3 rounded overflow-x-auto max-h-60",children:JSON.stringify(i,null,2)})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{r(null),o([]),w("idle"),z(!1),D(),g.current&&(g.current.value="")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar"}),i.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:R,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(mo,{className:"w-4 h-4 mr-2"}),G?"Ocultar JSON":"Mostrar JSON"]}),s.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Copiar JSON"]}),s.jsxs("button",{onClick:Z,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]}),s.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Anlise Detalhada"]})]})]})]})]}):s.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors border-gray-300 hover:border-gray-400 bg-gray-50",onDrop:U,onDragOver:A,children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(An,{className:"w-12 h-12 text-gray-400 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Arraste uma imagem aqui ou clique para selecionar"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Formatos suportados: JPG, PNG, GIF, BMP"})]}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsxs("button",{onClick:()=>{var d;return(d=g.current)==null?void 0:d.click()},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Selecionar Arquivo"]}),s.jsxs("button",{onClick:X,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(vv,{className:"w-4 h-4 mr-2"}),"Usar Cmera"]})]})]})})}),s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:J,className:"hidden"}),l&&!n&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-800",children:l})}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[s.jsx(Gt,{className:"w-4 h-4 text-blue-600"}),"Como Funciona"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-medium",children:"1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Captura e Seleo de Imagem"}),s.jsx("p",{className:"text-xs text-gray-600",children:"O componente ImageFieldExtractor captura a imagem do formulrio ou tela"})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-medium",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Envio para API de OCR"}),s.jsx("p",{className:"text-xs text-gray-600",children:"A imagem  enviada para processamento OCR (Reconhecimento ptico de Caracteres)"})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-medium",children:"3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Campos Retornados da API"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Os campos so classificados como Entrada, Sada ou Neutro com base em seu contexto"})]})]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Nota: A preciso da extrao depende da qualidade da imagem. Imagens ntidas e bem enquadradas produzem melhores resultados."})]})]}),u&&s.jsx(Rd,{screenshotData:JSON.stringify(i),processId:"image-extraction",onClose:()=>f(!1),onSaveAnalysis:()=>{}})]})})},vb="/api/custom-fields-proxy";class bb{constructor(e=vb){this.baseUrl=e.replace(/\/$/,""),this.apiUrl=this.baseUrl}async request(e,r={}){var i;const n=`${this.apiUrl}${e}`,a={headers:{"Content-Type":"application/json",...r.headers},...r};try{const o=await fetch(n,a),l=await o.json();if(!o.ok)throw new Error(((i=l.error)==null?void 0:i.message)||l.error||"Request failed");return l}catch(o){throw console.error(`[CustomFields] Error on ${e}:`,o),o}}async registerSections(e){return this.request("/sections/register",{method:"POST",body:JSON.stringify({sections:e})})}async getFields(e){return(await this.request(`/custom-fields?section=${e}`)).data||[]}async getValues(e,r){const a=(await this.request(`/forms/analysis/${e}/values`)).data||{},i={};return r?(a[r]||[]).forEach(l=>{i[l.field_id]=l.value}):Object.values(a).forEach(o=>{o.forEach(l=>{i[l.field_id]=l.value})}),i}async saveValues(e,r,n){const a=Object.entries(n).map(([i,o])=>({field_id:i,analysis_id:e,value:String(o)}));return this.request("/forms/values",{method:"POST",body:JSON.stringify({values:a})})}getAdminUrl(){return"/custom-fields-admin/admin"}}let Il=null;function Vo(){return Il||(Il=new bb),Il}function mg(t,e){const[r,n]=Q.useState([]),[a,i]=Q.useState({}),[o,l]=Q.useState(!0),[c,u]=Q.useState(null),[f,g]=Q.useState(!1),y=Vo(),h=Q.useRef(null);Q.useEffect(()=>{if(!t)return;const S=()=>{l(!0),u(null),y.getFields(t).then(n).catch(w=>{console.error("[useCustomFields] Failed to load fields:",w),u(w.message)}).finally(()=>l(!1))};S();const p=w=>{var T;((T=w.data)==null?void 0:T.type)==="CUSTOM_FIELDS_UPDATED"&&(console.log("[useCustomFields] Fields updated, reloading..."),S())};window.addEventListener("message",p);let x=null;try{x=new BroadcastChannel("custom-fields-updates"),x.addEventListener("message",p)}catch{}return()=>{window.removeEventListener("message",p),x&&x.close()}},[t]),Q.useEffect(()=>{if(!t||!e){i({}),h.current=null;return}i({});const S={analysisId:e,sectionName:t};h.current=S,y.getValues(e,t).then(p=>{h.current===S&&i(p)}).catch(p=>{console.error("[useCustomFields] Failed to load values:",p),h.current===S&&i({})})},[t,e]);const v=Q.useCallback((S,p)=>{i(x=>({...x,[S]:p}))},[]),b=Q.useCallback(async(S=a)=>{if(!e)return console.warn("[useCustomFields] Cannot save values without analysisId"),!1;g(!0);try{return await y.saveValues(e,t,S),i(S),!0}catch(p){throw console.error("[useCustomFields] Failed to save values:",p),p}finally{g(!1)}},[e,t,a]);return{fields:r,values:a,loading:o,error:c,saving:f,updateValue:v,saveAllValues:b,sdk:y}}async function hg(){const t=Vo(),e=[{id:"basic-info",name:"basic_info",label:"Informaes Bsicas",description:"Campos personalizados para informaes bsicas da anlise",component_name:"BasicInfoForm"},{id:"scope",name:"scope",label:"Escopo",description:"Campos personalizados para escopo da anlise",component_name:"ScopeForm"},{id:"impacts",name:"impacts",label:"Anlise de Impactos",description:"Campos personalizados para anlise de impactos",component_name:"ImpactsForm"},{id:"risks",name:"risks",label:"Matriz de Riscos",description:"Campos personalizados para matriz de riscos",component_name:"RisksForm"},{id:"mitigations",name:"mitigations",label:"Plano de Mitigao",description:"Campos personalizados para plano de mitigao",component_name:"MitigationsForm"},{id:"conclusions",name:"conclusions",label:"Concluses e Recomendaes",description:"Campos personalizados para concluses",component_name:"ConclusionsForm"}];try{await t.registerSections(e),console.log("[CustomFields] Sees registradas com sucesso")}catch(r){console.error("[CustomFields] Erro ao registrar sees:",r)}}const Nb=Object.freeze(Object.defineProperty({__proto__:null,getCustomFieldsSDK:Vo,registerNuPAIMSections:hg,useCustomFields:mg},Symbol.toStringTag,{value:"Module"})),jb=({variant:t="button",size:e="md"})=>{const{theme:r,setTheme:n,isDark:a,toggleTheme:i}=pv(),[o,l]=Zt.useState(!1),c={sm:"w-8 h-8",md:"w-10 h-10"},u={sm:"w-4 h-4",md:"w-5 h-5"};return t==="button"?s.jsx("button",{onClick:i,className:`
          ${c[e]}
          relative inline-flex items-center justify-center
          rounded-xl bg-gray-100 dark:bg-gray-800
          text-gray-600 dark:text-gray-400
          hover:bg-gray-200 dark:hover:bg-gray-700
          hover:text-gray-900 dark:hover:text-gray-100
          transition-all duration-300 ease-out
          focus-ring overflow-hidden
        `,"aria-label":a?"Mudar para tema claro":"Mudar para tema escuro",children:s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx(Al,{className:`
              ${u[e]} absolute
              transition-all duration-500 ease-out
              ${a?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}
            `}),s.jsx(_l,{className:`
              ${u[e]} absolute
              transition-all duration-500 ease-out
              ${a?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}
            `})]})}):s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),className:`
          ${c[e]}
          relative inline-flex items-center justify-center
          rounded-xl bg-gray-100 dark:bg-gray-800
          text-gray-600 dark:text-gray-400
          hover:bg-gray-200 dark:hover:bg-gray-700
          transition-all duration-200
          focus-ring
        `,"aria-label":"Opes de tema",children:[r==="light"&&s.jsx(Al,{className:u[e]}),r==="dark"&&s.jsx(_l,{className:u[e]}),r==="system"&&s.jsx(mm,{className:u[e]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),s.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-xl shadow-medium border border-gray-200 dark:border-gray-700 z-50 animate-scale-in origin-top-right overflow-hidden",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{onClick:()=>{n("light"),l(!1)},className:`
                  w-full flex items-center gap-3 px-4 py-2.5 text-sm
                  transition-colors
                  ${r==="light"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}
                `,children:[s.jsx(Al,{className:"w-4 h-4"}),s.jsx("span",{children:"Claro"})]}),s.jsxs("button",{onClick:()=>{n("dark"),l(!1)},className:`
                  w-full flex items-center gap-3 px-4 py-2.5 text-sm
                  transition-colors
                  ${r==="dark"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}
                `,children:[s.jsx(_l,{className:"w-4 h-4"}),s.jsx("span",{children:"Escuro"})]}),s.jsxs("button",{onClick:()=>{n("system"),l(!1)},className:`
                  w-full flex items-center gap-3 px-4 py-2.5 text-sm
                  transition-colors
                  ${r==="system"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}
                `,children:[s.jsx(mm,{className:"w-4 h-4"}),s.jsx("span",{children:"Sistema"})]})]})})]})]})},Eb=({onExport:t,isExporting:e})=>{const{user:r,profile:n,logout:a,hasPermission:i}=ds(),[o,l]=Q.useState(!1),[c,u]=Q.useState(!1),[f,g]=Q.useState(!1),[y,h]=Q.useState(!1),[v,b]=Q.useState(!1),[S,p]=Q.useState("");Q.useEffect(()=>{const w=()=>{const O=localStorage.getItem("nup_aim_last_activity");if(!O)return;const G=7*60*1e3,z=Date.now()-parseInt(O),K=G-z;if(K>0){const I=Math.floor(K/6e4),se=Math.floor(K%6e4/1e3);p(`${I}:${se.toString().padStart(2,"0")}`)}else p("Expirada")},T=setInterval(w,1e3);return w(),()=>clearInterval(T)},[r]);const x=()=>{a(),l(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 theme-transition",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl shadow-glow-primary",children:s.jsx(et,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"NuP_AIM"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sistema de Anlise de Impacto"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(jb,{}),r&&S&&s.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[s.jsx(Ms,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Sesso: ",S]})]}),s.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors",children:[s.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Extrair Campos de Imagem"]}),i("ANALYSIS","EXPORT")&&s.jsxs("button",{onClick:t,disabled:e,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Wa,{className:"w-4 h-4 mr-2"}),e?"Exportando...":"Exportar para Word"]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(zs,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:r==null?void 0:r.username}),s.jsx("div",{className:"text-xs text-gray-500",children:n==null?void 0:n.name})]})]}),o&&s.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[s.jsxs("div",{className:"p-3 border-b border-gray-200",children:[s.jsx("div",{className:"font-medium text-gray-900",children:r==null?void 0:r.username}),s.jsx("div",{className:"text-sm text-gray-500",children:r==null?void 0:r.email}),s.jsx("div",{className:"text-xs text-blue-600 mt-1",children:n==null?void 0:n.name}),S&&s.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[s.jsx(Ms,{className:"w-3 h-3"}),s.jsxs("span",{children:["Sesso expira em: ",S]})]})]}),s.jsxs("div",{className:"py-1",children:[i("USERS","MANAGE")&&s.jsxs("button",{onClick:()=>{u(!0),l(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(Ma,{className:"w-4 h-4"}),"Gerenciar Usurios"]}),i("PROFILES","MANAGE")&&s.jsxs("button",{onClick:()=>{g(!0),l(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(os,{className:"w-4 h-4"}),"Gerenciar Perfis"]}),i("DATA","MANAGE")&&s.jsxs("button",{onClick:()=>{h(!0),l(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(Pt,{className:"w-4 h-4"}),"Gerenciar Dados"]}),s.jsxs("button",{onClick:()=>{const w=Vo();window.open(w.getAdminUrl(),"_blank"),l(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors","data-testid":"button-custom-fields-admin",children:[s.jsx(Rv,{className:"w-4 h-4"}),"Campos Personalizados"]}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsxs("button",{onClick:x,className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(sg,{className:"w-4 h-4"}),"Sair"]})]})]})]})]})]})})}),c&&s.jsx(Jv,{onClose:()=>u(!1)}),f&&s.jsx(Zv,{onClose:()=>g(!1)}),y&&s.jsx(ib,{onClose:()=>h(!1)}),v&&s.jsx(wb,{onClose:()=>b(!1)})]})},qs=({title:t,children:e,isCollapsed:r=!1,onToggle:n,required:a=!1})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 cursor-pointer flex items-center justify-between hover:bg-gray-100 transition-colors",onClick:n,children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[t,a&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n&&s.jsx("div",{className:"text-gray-400",children:r?s.jsx(eg,{className:"w-5 h-5"}):s.jsx(Cd,{className:"w-5 h-5"})})]}),!r&&s.jsx("div",{className:"p-6",children:e})]}),Sb=({onClose:t})=>{const[e,r]=Q.useState([]),[n,a]=Q.useState(null),[i,o]=Q.useState(!1),[l,c]=Q.useState({name:"",acronym:"",isDefault:!1}),[u,f]=Q.useState({});Q.useEffect(()=>{g()},[]);const g=()=>{const w=Us();r(w)},y=()=>{const w={};return l.name.trim()?l.name.length<2&&(w.name="Nome deve ter pelo menos 2 caracteres"):w.name="Nome do projeto  obrigatrio",l.acronym.trim()?(l.acronym.length<1||l.acronym.length>10)&&(w.acronym="Sigla deve ter entre 1 e 10 caracteres"):w.acronym="Sigla  obrigatria",e.find(G=>G.name.toLowerCase()===l.name.toLowerCase()&&G.id!==n)&&(w.name="J existe um projeto com este nome"),e.find(G=>G.acronym.toLowerCase()===l.acronym.toLowerCase()&&G.id!==n)&&(w.acronym="J existe um projeto com esta sigla"),f(w),Object.keys(w).length===0},h=()=>{var T;if(!y())return;const w={id:n||vu(),name:l.name.trim(),acronym:l.acronym.trim(),isDefault:l.isDefault,createdAt:n?((T=e.find(O=>O.id===n))==null?void 0:T.createdAt)||new Date().toISOString():new Date().toISOString()};ym(w),g(),p()},v=w=>{a(w.id),c({name:w.name,acronym:w.acronym,isDefault:w.isDefault}),o(!0),f({})},b=w=>{const T=e.find(O=>O.id===w);if(T){if(e.length<=1){alert("No  possvel excluir o ltimo projeto. Deve haver pelo menos um projeto cadastrado.");return}window.confirm(`Tem certeza que deseja excluir o projeto "${T.name}"?`)&&(eb(w)?g():alert("No foi possvel excluir o projeto."))}},S=w=>{const T=e.find(O=>O.id===w);if(T){const O={...T,isDefault:!0};ym(O),g()}},p=()=>{a(null),o(!1),c({name:"",acronym:"",isDefault:!1}),f({})},x=()=>{a(null),c({name:"",acronym:"",isDefault:!1}),o(!0),f({})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Bs,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dados Bsicos - Projetos"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:x,disabled:i,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Novo Projeto"]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[i&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:n?"Editar Projeto":"Novo Projeto"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Projeto *"}),s.jsx("input",{type:"text",value:l.name,onChange:w=>c({...l,name:w.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${u.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Ex: Sistema de Gesto de Contratos"}),u.name&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sigla *"}),s.jsx("input",{type:"text",value:l.acronym,onChange:w=>c({...l,acronym:w.target.value.toUpperCase()}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${u.acronym?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Ex: SGC",maxLength:10}),u.acronym&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.acronym})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:l.isDefault,onChange:w=>c({...l,isDefault:w.target.checked}),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Definir como projeto padro"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"O projeto padro ser selecionado automaticamente ao criar novas anlises"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Salvar"]}),s.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(tt,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Projetos Cadastrados (",e.length,")"]}),e.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx(Bs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum projeto cadastrado"})]}):s.jsx("div",{className:"space-y-3",children:e.map(w=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${w.isDefault?"border-blue-200 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 truncate",children:w.name}),s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:w.acronym}),w.isDefault&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:[s.jsx(go,{className:"w-3 h-3 mr-1"}),"Padro"]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Criado em ",new Date(w.createdAt).toLocaleDateString("pt-BR")]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!w.isDefault&&s.jsx("button",{onClick:()=>S(w.id),className:"p-1 text-yellow-600 hover:text-yellow-800 transition-colors",title:"Definir como padro",children:s.jsx(Ad,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(w),disabled:i,className:"p-1 text-blue-600 hover:text-blue-800 transition-colors disabled:opacity-50",title:"Editar projeto",children:s.jsx($o,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>b(w.id),disabled:i||e.length<=1,className:"p-1 text-red-600 hover:text-red-800 transition-colors disabled:opacity-50",title:e.length<=1?"No  possvel excluir o ltimo projeto":"Excluir projeto",children:s.jsx(fs,{className:"w-4 h-4"})})]})]})},w.id))})]}),s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Informaes Importantes"}),s.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:" Deve haver pelo menos um projeto cadastrado no sistema"}),s.jsx("li",{children:" O projeto padro ser selecionado automaticamente em novas anlises"}),s.jsx("li",{children:" Apenas um projeto pode ser definido como padro por vez"}),s.jsx("li",{children:" Nomes e siglas devem ser nicos"})]})]})]})]})})},$n=({sectionName:t,analysisId:e,onValuesChange:r,initialValues:n={},className:a="",fieldWrapperClassName:i="",labelClassName:o="",inputClassName:l="",textareaClassName:c="",selectClassName:u="",checkboxClassName:f="",helpTextClassName:g="",errorTextClassName:y="",renderField:h,useTailwindOnly:v=!1})=>{const{fields:b,values:S,loading:p,error:x}=mg(t,e),w=Zt.useRef(new Set),T=Zt.useMemo(()=>{const q={};return Object.assign(q,S),Object.assign(q,n),q},[S,n]),[O,G]=Zt.useState({}),z=Zt.useRef(e);Zt.useEffect(()=>{z.current!==e&&(G({}),w.current.clear(),K.current="",z.current=e)},[e]);const K=Zt.useRef(""),I=Zt.useMemo(()=>({...T,...O}),[T,O]);Zt.useEffect(()=>{if(r&&Object.keys(I).length>0){const q=JSON.stringify(I);q!==K.current&&(K.current=q,r(I))}},[I,r]);const se=(q,F)=>{w.current.add(q);const V={...O,[q]:F};if(G(V),r){const D={...T,...V};r(D)}};if(p)return s.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-500","data-testid":"custom-fields-loading",children:[s.jsx(_n,{className:"w-5 h-5 animate-spin mr-2"}),s.jsx("span",{children:"Carregando campos personalizados..."})]});if(x)return s.jsx("div",{className:"text-sm text-gray-400 py-2","data-testid":"custom-fields-error",children:"No foi possvel carregar campos personalizados."});if(b.length===0)return null;const ae=q=>{var D;if(h){const J=h(q,I[q.id]||"",U=>se(q.id,U));if(J!=null)return J}const F=v?"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors":"custom-field-input",V={id:q.id,name:q.name,required:q.required,value:I[q.id]||"",onChange:J=>{se(q.id,J.target.value)}};switch(q.type){case"textarea":return s.jsx("textarea",{...V,placeholder:q.placeholder,rows:4,className:c||F,"data-testid":`custom-field-${q.name}`});case"select":return s.jsxs("select",{...V,className:u||F,"data-testid":`custom-field-${q.name}`,children:[s.jsx("option",{value:"",children:"Selecione..."}),(D=q.options)==null?void 0:D.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))]});case"checkbox":return s.jsx("input",{type:"checkbox",id:q.id,name:q.name,checked:I[q.id]==="true"||I[q.id]===!0,onChange:U=>se(q.id,U.target.checked),className:f||"w-4 h-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-2","data-testid":`custom-field-${q.name}`});case"date":case"email":case"tel":case"url":case"number":case"text":default:return s.jsx("input",{type:q.type,...V,placeholder:q.placeholder,className:l||F,"data-testid":`custom-field-${q.name}`})}},P=v?"space-y-4":"custom-fields-section",H=v?"space-y-2":"custom-field-wrapper",C=v?"block text-sm font-medium text-gray-700":"custom-field-label",B=v?"text-xs text-gray-500 mt-1":"custom-field-help-text";return s.jsx("div",{className:`${P} ${a}`.trim(),"data-testid":"custom-fields-section",children:b.map(q=>s.jsxs("div",{className:i||H,children:[s.jsxs("label",{htmlFor:q.id,className:o||C,children:[q.label,q.required&&s.jsx("span",{className:"custom-field-required",children:"*"})]}),ae(q),q.help_text&&s.jsx("p",{className:g||B,children:q.help_text})]},q.id))})},kb=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{const{hasPermission:a}=ds(),[i,o]=Q.useState([]),[l,c]=Q.useState(!1);Q.useEffect(()=>{u()},[]),Q.useEffect(()=>{if(!t.project&&i.length>0){const h=og();h&&e({project:h.name})}},[i,t.project,e]);const u=()=>{const h=Us();o(h)},f=h=>{let v=h.replace(/[^\d-]/g,"");v.startsWith("PA")||(v.startsWith("P")?v="PA"+v.substring(1):v="PA"+v);let b=v.substring(2);b=b.replace(/-/g,""),b.length>4&&(b=b.substring(0,4)+"-"+b.substring(4,8));const S="PA"+b;e({title:S})},g=()=>{if(!a("PROJECTS","MANAGE")){alert("Voc no tem permisso para gerenciar projetos.");return}c(!0)},y=()=>{c(!1),u()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero da PA *"}),s.jsx("input",{type:"text",value:t.title,onChange:h=>f(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"PA",maxLength:11,title:"Formato: PANNNN-AAAA (4 nmeros seguidos do ano com 4 dgitos)"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formato: PANNNN-AAAA (Ex: PA0001-2024)"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Projeto *"}),a("PROJECTS","MANAGE")&&s.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",title:"Gerenciar projetos",children:[s.jsx(Bs,{className:"w-3 h-3 mr-1"}),"Gerenciar"]})]}),s.jsxs("select",{value:t.project,onChange:h=>e({project:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"Selecione um projeto"}),i.map(h=>s.jsx("option",{value:h.name,children:h.name},h.id))]}),i.length===0&&s.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Nenhum projeto cadastrado. ",a("PROJECTS","MANAGE")?'Clique em "Gerenciar" para adicionar.':"Entre em contato com o administrador."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Autor *"}),s.jsx("input",{type:"text",value:t.author,onChange:h=>e({author:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Seu nome"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verso"}),s.jsx("input",{type:"text",value:t.version,onChange:h=>e({version:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"1.0"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio *"}),s.jsx("textarea",{value:t.description,onChange:h=>e({description:h.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Descreva o contexto e objetivo desta anlise de impacto..."})]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"basic_info",analysisId:t.id,initialValues:r,onValuesChange:n})]}),l&&s.jsx(Sb,{onClose:y})]})},Cb=({value:t,onChange:e,placeholder:r="Cole aqui as imagens ou links das telas que foram impactadas...",onExtractFields:n,autoExtractEnabled:a=!0})=>{const[i,o]=Q.useState([]),[l,c]=Q.useState(""),[u,f]=Q.useState([]),[g,y]=Q.useState(!1),[h,v]=Q.useState(!1),[b,S]=Q.useState(!1),[p,x]=Q.useState(""),w=Q.useRef(null),T=Q.useRef(null);Q.useEffect(()=>{if(t){const{images:F,text:V}=O(t);if(o(F),c(V),V||F.length>0){const D=ua(t);f(D),n&&n(D)}}},[t]);const O=F=>{const V=F.split(`
`),D=[],J=[];for(const U of V)if(U.startsWith("IMAGE_DATA:"))try{const A=U.replace("IMAGE_DATA:",""),Y=JSON.parse(A);D.push(Y)}catch(A){console.error("Error parsing image data:",A)}else U.trim()&&!U.startsWith("[Imagem ")&&J.push(U);return{images:D,text:J.join(`
`)}},G=(F,V)=>{const D=[];return V.trim()&&D.push(V.trim()),F.forEach(J=>{D.push(`IMAGE_DATA:${JSON.stringify(J)}`)}),D.join(`
`)},z=async F=>{var J;const V=(J=F.clipboardData)==null?void 0:J.items;if(!V)return;let D=!1;for(let U=0;U<V.length;U++){const A=V[U];if(A.type.indexOf("image")!==-1){D=!0,F.preventDefault();const Y=A.getAsFile();Y&&await K(Y)}}D||setTimeout(()=>{if(w.current){c(w.current.value);const U=G(i,w.current.value);e(U);const A=ua(U);f(A),n&&n(A)}},0)},K=async F=>{const V=new FileReader;V.onload=async D=>{var X;const J=(X=D.target)==null?void 0:X.result,U={id:`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,base64:J,name:F.name||`Imagem ${i.length+1}`},A=[...i,U];o(A);const Y=G(A,l);if(e(Y),a){v(!0);try{console.log(` Extraindo campos da imagem: ${U.name}`);const re=await fg(J);console.log(` Extrao concluda: ${re.length} campos encontrados`);const k=[...u,...re].filter((E,Z,M)=>Z===M.findIndex(R=>R.name===E.name));f(k),n&&n(k),re.length>0&&y(!0)}catch(re){console.error("Error extracting fields from image:",re)}finally{v(!1)}}},V.readAsDataURL(F)},I=F=>{const V=F.target.value;c(V);const D=G(i,V);e(D);const J=ua(D);f(J),n&&n(J)},se=F=>{const V=i.filter(U=>U.id!==F);o(V);const D=G(V,l);e(D);const J=ua(D);f(J),n&&n(J)},ae=async F=>{const V=F.target.files;if(V){for(let D=0;D<V.length;D++){const J=V[D];J.type.startsWith("image/")&&await K(J)}F.target&&(F.target.value="")}},P=async F=>{if(F.preventDefault(),F.dataTransfer.files&&F.dataTransfer.files.length>0)for(let V=0;V<F.dataTransfer.files.length;V++){const D=F.dataTransfer.files[V];D.type.startsWith("image/")&&await K(D)}},H=F=>{F.preventDefault()},C=()=>{y(!g)},B=F=>{const V=i.find(D=>D.id===F);V&&(x(V.base64),S(!0))},q=F=>{switch(F){case"text":return"Aa";case"number":return"123";case"date":return"";case"select":return"";case"checkbox":return"";case"radio":return"";case"file":return"";case"email":return"";case"url":return"";case"textarea":return"";default:return"?"}};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{ref:w,value:l,onChange:I,onPaste:z,onDrop:P,onDragOver:H,placeholder:r,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(Uo,{className:"w-4 h-4"}),s.jsx("span",{children:"Pressione Ctrl+V para colar imagens, arraste e solte, ou use o boto para upload"})]}),s.jsxs("label",{className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded cursor-pointer hover:bg-blue-700 transition-colors",children:[s.jsx(An,{className:"w-3 h-3 mr-1"}),"Upload",s.jsx("input",{ref:T,type:"file",multiple:!0,accept:"image/*",onChange:ae,className:"hidden"})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),s.jsx("span",{children:"Extraindo campos das imagens..."})]}),i.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h6",{className:"text-sm font-medium text-gray-700",children:["Imagens Anexadas (",i.length,"):"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.map(F=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:F.base64,alt:F.name,className:"w-full h-20 object-cover rounded border border-gray-200 shadow-sm"}),s.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity flex items-center justify-center opacity-0 group-hover:opacity-100",children:[s.jsx("button",{type:"button",onClick:()=>B(F.id),className:"p-1 bg-blue-500 text-white rounded-full mx-1",title:"Analisar imagem",children:s.jsx(J0,{className:"w-3 h-3"})}),s.jsx("button",{type:"button",onClick:()=>se(F.id),className:"p-1 bg-red-500 text-white rounded-full mx-1",title:"Remover imagem",children:s.jsx(tt,{className:"w-3 h-3"})})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 rounded-b truncate",children:F.name})]},F.id))})]}),u.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("button",{type:"button",onClick:C,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx(Pt,{className:"w-4 h-4"}),g?"Ocultar campos extrados":`Mostrar ${u.length} campos extrados automaticamente`]}),g&&s.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"Campos Extrados Automaticamente:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:[u.slice(0,9).map(F=>s.jsxs("div",{className:"text-xs bg-white p-2 rounded border border-blue-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:F.name}),F.fieldCategory==="derivado"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Derivado"})]}),F.value&&s.jsxs("div",{className:"text-gray-700 mb-1 italic",children:['"',F.value,'"']}),s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-blue-600",children:q(F.type)}),s.jsx("span",{children:F.type})]}),s.jsx("span",{className:F.complexity==="Low"?"text-green-600":F.complexity==="High"?"text-red-600":"text-yellow-600",children:F.complexity})]})]},F.id)),u.length>9&&s.jsx("div",{className:"text-xs bg-gray-100 p-2 rounded border border-gray-200 flex items-center justify-center",children:s.jsxs("span",{className:"text-gray-600",children:["+",u.length-9," campos"]})})]}),s.jsx("div",{className:"mt-2 text-xs text-blue-600",children:'Use o boto "Anlise de Pontos de Funo" para ver todos os campos e realizar a anlise completa.'})]})]}),b&&s.jsx(Rd,{screenshotData:p,processId:"image-extraction",onClose:()=>S(!1),onSaveAnalysis:()=>{}})]})},_b=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{var V;const{hasPermission:a}=ds(),[i,o]=Q.useState(null),[l,c]=Q.useState(!1),[u,f]=Q.useState(!1),[g,y]=Q.useState(""),[h,v]=Q.useState({}),[b,S]=Q.useState(null),[p,x]=Q.useState(!0),w=()=>{const D={id:Date.now().toString(),name:"",status:"nova",workDetails:"",screenshots:"",websisCreated:void 0};e({scope:{processes:[...t.scope.processes,D]}}),o(D.id),c(!0)},T=(D,J)=>{const U=[...t.scope.processes];U[D]={...U[D],...J},e({scope:{processes:U}})},O=D=>{e({scope:{processes:t.scope.processes.filter((J,U)=>U!==D)}})},G=D=>{switch(D){case"nova":return"bg-green-100 text-green-800 border-green-200";case"alterada":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"excluida":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},z=D=>{switch(D){case"nova":return"Nova";case"alterada":return"Alte";case"excluida":return"Excl";default:return D}},K=D=>D.status!=="",I=D=>D.status==="alterada",se=D=>D.status==="nova"||D.status==="excluida"?!0:D.status==="alterada"?D.websisCreated!==void 0:!1,ae=D=>!(!D.name.trim()||D.status==="alterada"&&D.websisCreated===void 0),P=D=>{const J=t.scope.processes.find(U=>U.id===D);J&&ae(J)&&(o(null),c(!1))},H=D=>{o(D),c(!0)},C=()=>{t.scope.processes.filter(J=>J.id===i&&!ae(J)).length>0&&e({scope:{processes:t.scope.processes.filter(J=>J.id!==i)}}),o(null),c(!1)},B=(D,J)=>{if(v(U=>({...U,[D]:J})),p&&J.length>0){const U=t.scope.processes.find(A=>A.id===D);if(U&&U.screenshots){const{images:A}=q(U.screenshots);A.length>0&&F(D)}}},q=D=>{if(!D)return{images:[],text:""};const J=D.split(`
`),U=[],A=[];for(const Y of J)if(Y.startsWith("IMAGE_DATA:"))try{const X=Y.replace("IMAGE_DATA:",""),re=JSON.parse(X);U.push(re)}catch(X){console.error("Error parsing image data:",X)}else Y.trim()&&!Y.startsWith("[Imagem ")&&A.push(Y);return{images:U,text:A.join(`
`)}},F=D=>{const J=t.scope.processes.find(U=>U.id===D);J&&(y(J.screenshots||""),S(D),f(!0))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"sticky top-0 bg-white z-20 py-4 border-b border-gray-200 -mx-6 px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Funcionalidades Impactadas"}),s.jsxs("button",{type:"button",onClick:w,disabled:i!==null,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Adicionar Funcionalidade"]})]})}),t.scope.processes.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Funcionalidades Cadastradas:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.scope.processes.map((D,J)=>s.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium ${G(D.status)} min-w-[200px]`,children:[s.jsx("span",{className:"font-mono text-xs flex-1 truncate",title:D.name,style:{minWidth:"140px"},children:D.name}),s.jsx("span",{className:"text-xs opacity-75 font-mono w-8 text-center",children:z(D.status)}),s.jsxs("div",{className:"flex items-center gap-1 ml-1",children:[s.jsx("button",{type:"button",onClick:()=>H(D.id),disabled:i!==null,className:"text-current hover:opacity-70 transition-opacity disabled:opacity-30",title:"Editar funcionalidade",children:s.jsx($o,{className:"w-3 h-3"})}),s.jsx("button",{type:"button",onClick:()=>O(J),disabled:i!==null,className:"text-current hover:opacity-70 transition-opacity disabled:opacity-30",title:"Remover funcionalidade",children:s.jsx(tt,{className:"w-3 h-3"})})]})]},D.id))})]}),l&&i&&s.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-6 bg-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h5",{className:"text-lg font-medium text-gray-900",children:[(V=t.scope.processes.find(D=>D.id===i))!=null&&V.name?"Editar":"Nova"," Funcionalidade"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>P(i),disabled:!ae(t.scope.processes.find(D=>D.id===i)),className:"inline-flex items-center px-3 py-1 bg-green-600 text-white text-sm font-medium rounded hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Ls,{className:"w-4 h-4 mr-1"}),"Salvar"]}),s.jsxs("button",{type:"button",onClick:C,className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm font-medium rounded hover:bg-gray-700 transition-colors",children:[s.jsx(tt,{className:"w-4 h-4 mr-1"}),"Cancelar"]})]})]}),(()=>{const D=t.scope.processes.findIndex(U=>U.id===i),J=t.scope.processes[D];return J?s.jsxs("div",{className:"space-y-4 bg-white rounded-lg p-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Funcionalidade *"}),s.jsx("input",{type:"text",value:J.name,onChange:U=>T(D,{name:U.target.value}),placeholder:"Ex: Funcionalidade de Aprovao de Documentos",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status da Funcionalidade *"}),s.jsx("div",{className:"flex gap-4",children:[{value:"nova",label:"Nova"},{value:"alterada",label:"Alterada"},{value:"excluida",label:"Excluda"}].map(U=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`status-${J.id}`,value:U.value,checked:J.status===U.value,onChange:A=>T(D,{status:A.target.value,websisCreated:void 0}),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:U.label})]},U.value))})]}),K(J)&&s.jsxs("div",{className:"space-y-4 border-t border-gray-200 pt-4",children:[I(J)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"A Websis criou/alterou essa funcionalidade antes? *"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`websis-${J.id}`,value:"sim",checked:J.websisCreated===!0,onChange:()=>T(D,{websisCreated:!0}),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"SIM"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`websis-${J.id}`,value:"nao",checked:J.websisCreated===!1,onChange:()=>T(D,{websisCreated:!1}),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"NO"})]})]})]}),se(J)&&s.jsxs("div",{className:"space-y-4 border-t border-gray-100 pt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detalhamento do Trabalho Realizado"}),s.jsx("textarea",{value:J.workDetails||"",onChange:U=>T(D,{workDetails:U.target.value}),placeholder:"Descreva detalhadamente o trabalho realizado nesta funcionalidade...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prints das Telas Impactadas"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>F(J.id),disabled:!J.screenshots,className:"inline-flex items-center px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors disabled:opacity-50",title:"Realizar anlise de pontos de funo",children:[s.jsx(J0,{className:"w-3 h-3 mr-1"}),"Anlise de Pontos de Funo"]}),s.jsxs("label",{className:"flex items-center text-xs",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:U=>x(U.target.checked),className:"mr-1 text-blue-600 focus:ring-blue-500"}),"Extrao automtica"]})]})]}),s.jsx(Cb,{value:J.screenshots||"",onChange:U=>{T(D,{screenshots:U})},onExtractFields:U=>B(J.id,U),autoExtractEnabled:p,placeholder:"Cole aqui as imagens das telas impactadas usando Ctrl+V ou descreva as telas em texto..."})]})]})]})]}):null})()]}),t.scope.processes.length===0&&!l&&s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500",children:"Nenhuma funcionalidade adicionada"}),s.jsx("p",{className:"text-sm text-gray-400",children:'Clique em "Adicionar Funcionalidade" para comear'})]}),u&&b&&s.jsx(Rd,{screenshotData:g,processId:b,onClose:()=>{f(!1),S(null)},onSaveAnalysis:D=>{if(b){const J=t.scope.processes.findIndex(U=>U.id===b);if(J!==-1){const U=t.scope.processes[J].workDetails||"",A=U+(U?`

`:"")+D;T(J,{workDetails:A})}}}}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"scope",analysisId:t.id,initialValues:r,onValuesChange:n})]})]})},Ab=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{const a=u=>{const f={id:Date.now().toString(),description:"",severity:"medio",probability:"medio",category:u};e({impacts:{...t.impacts,[u]:[...t.impacts[u],f]}})},i=(u,f,g)=>{const y=[...t.impacts[u]];y[f]={...y[f],...g},e({impacts:{...t.impacts,[u]:y}})},o=(u,f)=>{e({impacts:{...t.impacts,[u]:t.impacts[u].filter((g,y)=>y!==f)}})},l=u=>{switch(u){case"baixo":return"bg-green-100 text-green-800";case"medio":return"bg-yellow-100 text-yellow-800";case"alto":return"bg-orange-100 text-orange-800";case"critico":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=({title:u,category:f,color:g})=>{const y=t.impacts[f];return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:`text-lg font-medium ${g}`,children:u}),s.jsxs("button",{type:"button",onClick:()=>a(f),className:"inline-flex items-center px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4 mr-1"}),"Adicionar"]})]}),y.length===0?s.jsx("p",{className:"text-gray-500 text-sm italic",children:"Nenhum impacto adicionado"}):s.jsx("div",{className:"space-y-3",children:y.map((h,v)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("textarea",{value:h.description,onChange:b=>i(f,v,{description:b.target.value}),placeholder:"Descreva o impacto...",rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors mr-2"}),s.jsx("button",{type:"button",onClick:()=>o(f,v),className:"text-red-500 hover:text-red-700 transition-colors",children:s.jsx(fs,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Severidade"}),s.jsxs("select",{value:h.severity,onChange:b=>i(f,v,{severity:b.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"baixo",children:"Baixo"}),s.jsx("option",{value:"medio",children:"Mdio"}),s.jsx("option",{value:"alto",children:"Alto"}),s.jsx("option",{value:"critico",children:"Crtico"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Probabilidade"}),s.jsxs("select",{value:h.probability,onChange:b=>i(f,v,{probability:b.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"baixo",children:"Baixo"}),s.jsx("option",{value:"medio",children:"Mdio"}),s.jsx("option",{value:"alto",children:"Alto"})]})]})]}),s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${l(h.severity)}`,children:h.severity.charAt(0).toUpperCase()+h.severity.slice(1)}),s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${l(h.probability)}`,children:["Prob: ",h.probability.charAt(0).toUpperCase()+h.probability.slice(1)]})]})]},h.id))})]})};return s.jsxs("div",{className:"space-y-8",children:[s.jsx(c,{title:"Impactos de Negcio",category:"business",color:"text-blue-700"}),s.jsx(c,{title:"Impactos Tcnicos",category:"technical",color:"text-purple-700"}),s.jsx(c,{title:"Impactos Operacionais",category:"operational",color:"text-green-700"}),s.jsx(c,{title:"Impactos Financeiros",category:"financial",color:"text-red-700"}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"impacts",analysisId:t.id,initialValues:r,onValuesChange:n})]})]})},Tb=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{const a=()=>{const c={id:Date.now().toString(),description:"",impact:"medio",probability:"medio",mitigation:""};e({risks:[...t.risks,c]})},i=(c,u)=>{const f=[...t.risks];f[c]={...f[c],...u},e({risks:f})},o=c=>{e({risks:t.risks.filter((u,f)=>f!==c)})},l=(c,u)=>{const f={baixo:1,medio:2,alto:3,critico:4},g=f[c]*f[u];return g>=9?{level:"Crtico",color:"bg-red-100 text-red-800",icon:""}:g>=6?{level:"Alto",color:"bg-orange-100 text-orange-800",icon:""}:g>=3?{level:"Mdio",color:"bg-yellow-100 text-yellow-800",icon:""}:{level:"Baixo",color:"bg-green-100 text-green-800",icon:""}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-5 h-5 text-orange-500"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Matriz de Riscos"})]}),s.jsxs("button",{type:"button",onClick:a,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Adicionar Risco"]})]}),t.risks.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx(is,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum risco identificado"}),s.jsx("p",{className:"text-sm text-gray-400",children:'Clique em "Adicionar Risco" para comear'})]}):s.jsx("div",{className:"space-y-4",children:t.risks.map((c,u)=>{const f=l(c.impact,c.probability);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:f.icon}),s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${f.color}`,children:["Risco ",f.level]})]}),s.jsx("button",{type:"button",onClick:()=>o(u),className:"text-red-500 hover:text-red-700 transition-colors",children:s.jsx(fs,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio do Risco"}),s.jsx("textarea",{value:c.description,onChange:g=>i(u,{description:g.target.value}),placeholder:"Descreva o risco identificado...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Impacto"}),s.jsxs("select",{value:c.impact,onChange:g=>i(u,{impact:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"baixo",children:"Baixo"}),s.jsx("option",{value:"medio",children:"Mdio"}),s.jsx("option",{value:"alto",children:"Alto"}),s.jsx("option",{value:"critico",children:"Crtico"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Probabilidade"}),s.jsxs("select",{value:c.probability,onChange:g=>i(u,{probability:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"baixo",children:"Baixo"}),s.jsx("option",{value:"medio",children:"Mdio"}),s.jsx("option",{value:"alto",children:"Alto"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estratgia de Mitigao"}),s.jsx("textarea",{value:c.mitigation,onChange:g=>i(u,{mitigation:g.target.value}),placeholder:"Como este risco ser mitigado...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]},c.id)})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"risks",analysisId:t.id,initialValues:r,onValuesChange:n})]})]})},Ib=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{const a=()=>{const c={id:Date.now().toString(),action:"",responsible:"",deadline:"",priority:"medio"};e({mitigations:[...t.mitigations,c]})},i=(c,u)=>{const f=[...t.mitigations];f[c]={...f[c],...u},e({mitigations:f})},o=c=>{e({mitigations:t.mitigations.filter((u,f)=>f!==c)})},l=c=>{switch(c){case"alto":return"bg-red-100 text-red-800";case"medio":return"bg-yellow-100 text-yellow-800";case"baixo":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"w-5 h-5 text-green-500"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Plano de Aes de Mitigao"})]}),s.jsxs("button",{type:"button",onClick:a,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Adicionar Ao"]})]}),t.mitigations.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx(os,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Nenhuma ao de mitigao definida"}),s.jsx("p",{className:"text-sm text-gray-400",children:'Clique em "Adicionar Ao" para comear'})]}):s.jsx("div",{className:"space-y-4",children:t.mitigations.map((c,u)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${l(c.priority)}`,children:["Prioridade ",c.priority.charAt(0).toUpperCase()+c.priority.slice(1)]}),s.jsx("button",{type:"button",onClick:()=>o(u),className:"text-red-500 hover:text-red-700 transition-colors",children:s.jsx(fs,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ao de Mitigao"}),s.jsx("textarea",{value:c.action,onChange:f=>i(u,{action:f.target.value}),placeholder:"Descreva a ao a ser tomada...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsvel"}),s.jsx("input",{type:"text",value:c.responsible,onChange:f=>i(u,{responsible:f.target.value}),placeholder:"Nome do responsvel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prazo"}),s.jsx("input",{type:"date",value:c.deadline,onChange:f=>i(u,{deadline:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),s.jsxs("select",{value:c.priority,onChange:f=>i(u,{priority:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"baixo",children:"Baixo"}),s.jsx("option",{value:"medio",children:"Mdio"}),s.jsx("option",{value:"alto",children:"Alto"})]})]})]})]})]},c.id))}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"mitigations",analysisId:t.id,initialValues:r,onValuesChange:n})]})]})},Pb=({data:t,onChange:e,customFieldsValues:r={},onCustomFieldsChange:n})=>{const a=c=>{c.trim()&&e({conclusions:{...t.conclusions,recommendations:[...t.conclusions.recommendations,c.trim()]}})},i=c=>{e({conclusions:{...t.conclusions,recommendations:t.conclusions.recommendations.filter((u,f)=>f!==c)}})},o=c=>{c.trim()&&e({conclusions:{...t.conclusions,nextSteps:[...t.conclusions.nextSteps,c.trim()]}})},l=c=>{e({conclusions:{...t.conclusions,nextSteps:t.conclusions.nextSteps.filter((u,f)=>f!==c)}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"w-5 h-5 text-blue-500"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Concluses e Recomendaes"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resumo Executivo"}),s.jsx("textarea",{value:t.conclusions.summary,onChange:c=>e({conclusions:{...t.conclusions,summary:c.target.value}}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Resuma os principais pontos da anlise de impacto..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recomendaes"}),s.jsx(bm,{items:t.conclusions.recommendations,onAdd:a,onRemove:i,placeholder:"Ex: Realizar testes em ambiente de homologao"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prximos Passos"}),s.jsx(bm,{items:t.conclusions.nextSteps,onAdd:o,onRemove:l,placeholder:"Ex: Agendar reunio com stakeholders"})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Campos Personalizados"}),s.jsx($n,{sectionName:"conclusions",analysisId:t.id,initialValues:r,onValuesChange:n})]})]})},bm=({items:t,onAdd:e,onRemove:r,placeholder:n})=>{const[a,i]=Zt.useState("");return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>i(o.target.value),onKeyPress:o=>{o.key==="Enter"&&(e(a),i(""))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:n}),s.jsx("button",{type:"button",onClick:()=>{e(a),i("")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx(Yt,{className:"w-4 h-4"})})]}),t.length>0&&s.jsx("div",{className:"space-y-1",children:t.map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"text-sm text-gray-700",children:o}),s.jsx("button",{type:"button",onClick:()=>r(l),className:"text-red-500 hover:text-red-700 transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]},l))})]})},Rb=({data:t})=>{const e=l=>l?new Date(l).toLocaleDateString("pt-BR"):"No informado",r=l=>({baixo:"bg-green-100 text-green-800",medio:"bg-yellow-100 text-yellow-800",alto:"bg-orange-100 text-orange-800",critico:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",n=l=>({nova:"bg-green-100 text-green-800",alterada:"bg-yellow-100 text-yellow-800",excluida:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",a=l=>({nova:"Nova",alterada:"Alterada",excluida:"Excluda"})[l]||l,i=l=>{if(!l)return{images:[],text:""};const c=l.split(`
`),u=[],f=[];for(const g of c)if(g.startsWith("IMAGE_DATA:"))try{const y=g.replace("IMAGE_DATA:",""),h=JSON.parse(y);u.push(h)}catch(y){console.error("Error parsing image data:",y)}else g.trim()&&!g.startsWith("[Imagem ")&&f.push(g);return{images:u,text:f.join(`
`)}},o=l=>{if(!l||!l.includes("=== DADOS EXTRADOS POR IA ==="))return null;const c=l.split("=== DADOS EXTRADOS POR IA ===")[1];if(!c)return null;const u=c.match(/Processo Elementar: (\w+) \(([^)]+)\)/),f=c.match(/Complexidade: (\w+)/),g=c.match(/Total de Pontos de Funo: (\d+)/);return!u||!f||!g?null:{processType:u[1],processTypeDescription:u[2],complexity:f[1],totalFunctionPoints:parseInt(g[1],10)}};return s.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:s.jsx(et,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 break-words",children:t.title||"Anlise de Impacto"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Documento de Anlise de Impacto"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(wv,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 flex-shrink-0",children:"Projeto:"}),s.jsx("span",{className:"font-medium truncate",children:t.project||"N/A"})]}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(zs,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 flex-shrink-0",children:"Autor:"}),s.jsx("span",{className:"font-medium truncate",children:t.author||"N/A"})]}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Z0,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 flex-shrink-0",children:"Data:"}),s.jsx("span",{className:"font-medium",children:e(t.date)})]}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(et,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 flex-shrink-0",children:"Verso:"}),s.jsx("span",{className:"font-medium",children:t.version||"N/A"})]})]})]}),t.description&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Descrio"}),s.jsx("p",{className:"text-gray-700 leading-relaxed break-words",children:t.description})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Escopo"}),t.scope.processes.length>0?s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Funcionalidades Impactadas"}),s.jsx("div",{className:"space-y-4",children:t.scope.processes.map((l,c)=>{const{images:u,text:f}=i(l.screenshots||""),g=o(l.workDetails);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2 gap-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 break-words flex-1 min-w-0",children:l.name}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full flex-shrink-0 ${n(l.status)}`,children:a(l.status)})]}),l.status==="alterada"&&l.websisCreated!==void 0&&s.jsx("div",{className:"mb-2",children:s.jsxs("span",{className:"text-sm text-gray-600 break-words",children:[s.jsx("strong",{children:"Websis criou/alterou antes:"})," ",l.websisCreated?"SIM":"NO"]})}),g&&s.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-1",children:"Anlise de Pontos de Funo"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Processo:"})," ",s.jsxs("span",{className:"text-blue-800",children:[g.processType," (",g.processTypeDescription,")"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Complexidade:"})," ",s.jsx("span",{className:"text-blue-800",children:g.complexity})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Pontos de Funo:"})," ",s.jsx("span",{className:"text-blue-800 font-bold",children:g.totalFunctionPoints})]})]})]}),l.status!==""&&(l.status!=="alterada"||l.websisCreated!==void 0)&&s.jsxs("div",{className:"mt-3 space-y-3 border-t border-gray-100 pt-3",children:[l.workDetails&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Detalhamento do Trabalho:"}),s.jsx("p",{className:"text-sm text-gray-600 break-words whitespace-pre-line",children:l.workDetails})]}),(f||u.length>0)&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[s.jsx(Uo,{className:"w-4 h-4"}),"Prints das Telas:"]}),f&&s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded mb-3 break-words",children:f}),u.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:u.map(y=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:y.base64,alt:y.name,className:"w-full h-32 object-cover rounded border border-gray-200 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{const h=window.open();h&&h.document.write(`
                                            <html>
                                              <head><title>${y.name}</title></head>
                                              <body style="margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;background:#f3f4f6;">
                                                <img src="${y.base64}" alt="${y.name}" style="max-width:100%;max-height:100%;object-fit:contain;" />
                                              </body>
                                            </html>
                                          `)}}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 rounded-b truncate",children:y.name})]},y.id))})]})]})]},l.id)})})]}):s.jsx("p",{className:"text-gray-500 italic",children:"Nenhuma funcionalidade definida no escopo."})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Anlise de Impactos"}),s.jsx("div",{className:"space-y-6",children:["business","technical","operational","financial"].map(l=>{const c=t.impacts[l],u={business:"Impactos de Negcio",technical:"Impactos Tcnicos",operational:"Impactos Operacionais",financial:"Impactos Financeiros"};return c.length===0?null:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:u[l]}),s.jsx("div",{className:"space-y-3",children:c.map((f,g)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-gray-800 mb-2 break-words",children:f.description}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(f.severity)}`,children:f.severity.charAt(0).toUpperCase()+f.severity.slice(1)}),s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(f.probability)}`,children:["Prob: ",f.probability.charAt(0).toUpperCase()+f.probability.slice(1)]})]})]},f.id))})]},l)})})]}),t.risks.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Matriz de Riscos"}),s.jsx("div",{className:"space-y-4",children:t.risks.map((l,c)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-gray-800 mb-2 font-medium break-words",children:l.description}),s.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(l.impact)}`,children:["Impacto: ",l.impact.charAt(0).toUpperCase()+l.impact.slice(1)]}),s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(l.probability)}`,children:["Prob: ",l.probability.charAt(0).toUpperCase()+l.probability.slice(1)]})]}),l.mitigation&&s.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[s.jsx("strong",{children:"Mitigao:"})," ",l.mitigation]})]},l.id))})]}),t.mitigations.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Plano de Mitigao"}),s.jsx("div",{className:"space-y-4",children:t.mitigations.map((l,c)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2 gap-3",children:[s.jsx("p",{className:"text-gray-800 font-medium break-words flex-1 min-w-0",children:l.action}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full flex-shrink-0 ${r(l.priority)}`,children:l.priority.charAt(0).toUpperCase()+l.priority.slice(1)})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[s.jsxs("p",{className:"break-words",children:[s.jsx("strong",{children:"Responsvel:"})," ",l.responsible]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Prazo:"})," ",e(l.deadline)]})]})]},l.id))})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Concluses e Recomendaes"}),t.conclusions.summary&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Resumo Executivo"}),s.jsx("p",{className:"text-gray-700 leading-relaxed break-words",children:t.conclusions.summary})]}),t.conclusions.recommendations.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Recomendaes"}),s.jsx("ul",{className:"space-y-2",children:t.conclusions.recommendations.map((l,c)=>s.jsxs("li",{className:"text-gray-700 flex items-start gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"break-words",children:l})]},c))})]}),t.conclusions.nextSteps.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Prximos Passos"}),s.jsx("ul",{className:"space-y-2",children:t.conclusions.nextSteps.map((l,c)=>s.jsxs("li",{className:"text-gray-700 flex items-start gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"break-words",children:l})]},c))})]})]})]})},Ob=({sourceAnalysis:t,onComplete:e,onClose:r})=>{const[n,a]=Q.useState({basicInfo:!0,scope:!1,additionalInfo:!1,selectedProcesses:[]}),[i,o]=Q.useState(!1),l=(h,v)=>{a(b=>({...b,[h]:v,selectedProcesses:h==="scope"&&!v?[]:b.selectedProcesses}))},c=(h,v)=>{a(b=>({...b,selectedProcesses:v?[...b.selectedProcesses,h]:b.selectedProcesses.filter(S=>S!==h)}))},u=()=>{const h=t.scope.processes.map(v=>v.id);a(v=>({...v,selectedProcesses:v.selectedProcesses.length===h.length?[]:h}))},f=()=>{const h={id:br(),title:"",description:"",author:"",date:new Date().toISOString().split("T")[0],version:"1.0",project:"",scope:{processes:[]},impacts:{business:[],technical:[],operational:[],financial:[]},risks:[],mitigations:[],conclusions:{summary:"",recommendations:[],nextSteps:[]}};if(n.basicInfo&&(h.title=`${t.title} - Cpia`,h.description=t.description,h.author=t.author,h.project=t.project,h.version=t.version),n.scope&&n.selectedProcesses.length>0){const v=t.scope.processes.filter(b=>n.selectedProcesses.includes(b.id));h.scope.processes=v.map(b=>({...b,id:br()}))}return n.additionalInfo&&(h.impacts={business:t.impacts.business.map(v=>({...v,id:br()})),technical:t.impacts.technical.map(v=>({...v,id:br()})),operational:t.impacts.operational.map(v=>({...v,id:br()})),financial:t.impacts.financial.map(v=>({...v,id:br()}))},h.risks=t.risks.map(v=>({...v,id:br()})),h.mitigations=t.mitigations.map(v=>({...v,id:br()})),h.conclusions={summary:t.conclusions.summary,recommendations:[...t.conclusions.recommendations],nextSteps:[...t.conclusions.nextSteps]}),h},g=async()=>{o(!0);try{const h=f();bu(h),e(h)}catch(h){console.error("Erro ao copiar anlise:",h),alert("Erro ao copiar a anlise. Tente novamente.")}finally{o(!1)}},y=()=>!(!n.basicInfo&&!n.scope&&!n.additionalInfo||n.scope&&n.selectedProcesses.length===0);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(or,{className:"w-6 h-6 text-green-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Copiar Anlise"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Copiando de: ",t.title]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Selecione quais sees voc deseja copiar para a nova anlise:"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.basicInfo,onChange:h=>l("basicInfo",h.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Dados Bsicos"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Nmero da PA, projeto, autor, descrio e verso"})]})]})}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("label",{className:"flex items-center mb-4",children:[s.jsx("input",{type:"checkbox",checked:n.scope,onChange:h=>l("scope",h.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Escopo"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Funcionalidades impactadas (",t.scope.processes.length," disponveis)"]})]})]}),n.scope&&t.scope.processes.length>0&&s.jsxs("div",{className:"ml-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selecionar funcionalidades:"}),s.jsx("button",{type:"button",onClick:u,className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:n.selectedProcesses.length===t.scope.processes.length?"Desmarcar todas":"Selecionar todas"})]}),s.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:t.scope.processes.map(h=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.selectedProcesses.includes(h.id),onChange:v=>c(h.id,v.target.checked),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-sm text-gray-900",children:h.name}),s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",h.status.charAt(0).toUpperCase()+h.status.slice(1),")"]})]})]},h.id))})]})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.additionalInfo,onChange:h=>l("additionalInfo",h.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Informaes Adicionais"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Anlise de impactos, matriz de riscos, plano de mitigao e concluses"})]})]})})]}),!y()&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Ateno:"})," Selecione pelo menos uma seo para copiar.",n.scope&&n.selectedProcesses.length===0&&" Se escolher copiar o escopo, selecione pelo menos uma funcionalidade."]})})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:g,disabled:!y()||i,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Copiando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Copiar Anlise"]})})]})]})})},Db=({onLoadAnalysis:t,onNewAnalysis:e,onClose:r})=>{const{hasPermission:n}=ds(),[a,i]=Q.useState([]),[o,l]=Q.useState(""),[c,u]=Q.useState("date"),[f,g]=Q.useState(!1),[y,h]=Q.useState(null),[v,b]=Q.useState(!1),[S,p]=Q.useState("both");Q.useEffect(()=>{x()},[]);const x=async()=>{b(!0);try{const C=Pn();let B=[];try{const D=await Je.getAnalyses();D.success&&D.data&&(B=D.data.map(J=>{const U=J.data||{};return{id:J.id,dbId:J.id,title:J.title||"",description:J.description||"",author:J.author||"",date:U.date||(J.createdAt?new Date(J.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]),version:U.version||J.version||"1.0",project:U.project||"",scope:U.scope||{processes:[]},impacts:U.impacts||{business:[],technical:[],operational:[],financial:[]},risks:U.risks||[],mitigations:U.mitigations||[],conclusions:U.conclusions||{summary:"",recommendations:[],nextSteps:[]},customFieldsValues:U.customFieldsValues||{},fromDatabase:!0}}),console.log(` Carregadas ${B.length} anlises do banco de dados`))}catch(D){console.warn(" No foi possvel carregar anlises do banco:",D)}const q=new Set(B.map(D=>D.id)),F=C.filter(D=>{const J=D.dbId;return J?!q.has(J):!0}),V=[...B,...F];i(V),p(B.length>0?F.length>0?"both":"database":"local")}catch(C){console.error("Erro ao carregar anlises:",C);const B=Pn();i(B),p("local")}finally{b(!1)}},w=async C=>{if(!n("ANALYSIS","DELETE")){alert("Voc no tem permisso para excluir anlises.");return}if(window.confirm("Tem certeza que deseja excluir esta anlise?"))try{tb(C.id);const B=C.dbId;if(B)try{const q=await Je.deleteAnalysis(B);q.success?console.log(" Anlise excluda do banco de dados"):console.warn(" Falha ao excluir do banco:",q.error)}catch(q){console.warn(" Erro ao excluir do banco de dados:",q)}x()}catch(B){console.error("Erro ao excluir anlise:",B),alert("Erro ao excluir a anlise.")}},T=C=>{if(!n("ANALYSIS","COPY")){alert("Voc no tem permisso para copiar anlises.");return}h(C),g(!0)},O=C=>{t(C),r()},G=()=>{e(),r()},z=C=>{if(!n("ANALYSIS","EDIT")&&!n("ANALYSIS","VIEW")){alert("Voc no tem permisso para acessar esta anlise.");return}t(C),r()},K=a.filter(C=>C.title.toLowerCase().includes(o.toLowerCase())||C.project.toLowerCase().includes(o.toLowerCase())||C.author.toLowerCase().includes(o.toLowerCase())).sort((C,B)=>{switch(c){case"date":return new Date(B.date).getTime()-new Date(C.date).getTime();case"title":return C.title.localeCompare(B.title);case"project":return C.project.localeCompare(B.project);default:return 0}}),I=C=>new Date(C).toLocaleDateString("pt-BR"),se=n("ANALYSIS","CREATE"),ae=n("ANALYSIS","COPY"),P=n("ANALYSIS","EDIT")||n("ANALYSIS","VIEW"),H=n("ANALYSIS","DELETE");return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(et,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gerenciar Anlises de Impacto"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[se&&s.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Nova Anlise"]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar por nmero da PA, projeto ou autor...",value:o,onChange:C=>l(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"date",children:"Ordenar por Data"}),s.jsx("option",{value:"title",children:"Ordenar por Nmero da PA"}),s.jsx("option",{value:"project",children:"Ordenar por Projeto"})]})]}),s.jsx("div",{className:"flex items-center gap-2 mb-4 text-xs text-gray-500",children:v?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(_n,{className:"w-3 h-3 animate-spin"}),"Carregando anlises..."]}):s.jsxs("span",{className:"flex items-center gap-1",children:[S==="database"&&s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-3 h-3 text-green-500"}),s.jsx("span",{children:"Dados do banco de dados"})]}),S==="local"&&s.jsxs(s.Fragment,{children:[s.jsx(fm,{className:"w-3 h-3 text-yellow-500"}),s.jsx("span",{children:"Dados locais (localStorage)"})]}),S==="both"&&s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-3 h-3 text-green-500"}),s.jsx("span",{className:"mx-1",children:"+"}),s.jsx(fm,{className:"w-3 h-3 text-yellow-500"}),s.jsx("span",{children:"Banco de dados + Local"})]}),s.jsxs("span",{className:"ml-2",children:["(",a.length," anlise",a.length!==1?"s":"",")"]})]})}),s.jsx("div",{className:"overflow-auto max-h-[60vh]",children:v?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(_n,{className:"w-8 h-8 animate-spin text-blue-500"})}):K.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(et,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o?"Nenhuma anlise encontrada":"Nenhuma anlise salva"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o?"Tente ajustar os termos de busca":"Comece criando sua primeira anlise de impacto"}),!o&&s.jsx("div",{className:"flex items-center justify-center gap-3",children:se&&s.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Criar Nova Anlise"]})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(C=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:C.title||"Sem ttulo"}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:C.project||"Sem projeto"})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[ae&&s.jsx("button",{onClick:()=>T(C),className:"p-1 text-green-600 hover:text-green-800 transition-colors",title:"Copiar anlise",children:s.jsx(or,{className:"w-4 h-4"})}),P&&s.jsx("button",{onClick:()=>z(C),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Editar",children:s.jsx(Ov,{className:"w-4 h-4"})}),H&&s.jsx("button",{onClick:()=>w(C),className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Excluir",children:s.jsx(fs,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zs,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:C.author||"Sem autor"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Z0,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{children:I(C.date)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"w-3 h-3 flex-shrink-0"}),s.jsxs("span",{children:["v",C.version]})]})]}),C.description&&s.jsx("p",{className:"text-xs text-gray-600 mt-2 line-clamp-2 break-words",children:C.description}),s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:[C.scope.processes.length," processo(s)"]}),s.jsxs("span",{children:[C.risks.length," risco(s)"]})]})})]},C.id))})})]})]})}),f&&y&&s.jsx(Ob,{sourceAnalysis:y,onComplete:O,onClose:()=>{g(!1),h(null)}})]})},jt=({children:t,className:e="",variant:r="default",padding:n="md",hover:a=!1,onClick:i})=>{const o={default:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-soft",glass:"glass-card",bordered:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",elevated:"bg-white dark:bg-gray-800 shadow-medium"},l={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},c=a?"cursor-pointer card-hover hover:border-primary-200 dark:hover:border-primary-700":"";return s.jsx("div",{className:`
        rounded-2xl
        ${o[r]}
        ${l[n]}
        ${c}
        ${e}
      `,onClick:i,role:i?"button":void 0,tabIndex:i?0:void 0,children:t})},Es=({children:t,className:e="",action:r})=>s.jsxs("div",{className:`flex items-center justify-between mb-4 ${e}`,children:[s.jsx("div",{children:t}),r&&s.jsx("div",{children:r})]}),Ss=({children:t,className:e="",as:r="h3"})=>s.jsx(r,{className:`text-lg font-semibold text-gray-900 dark:text-gray-100 ${e}`,children:t}),nr=({children:t,className:e=""})=>s.jsx("div",{className:e,children:t}),hi=({title:t,value:e,change:r,icon:n,color:a="primary"})=>{const i={primary:"from-primary-500 to-primary-600",secondary:"from-secondary-500 to-secondary-600",success:"from-success-500 to-success-600",warning:"from-warning-400 to-warning-500",danger:"from-danger-500 to-danger-600"},o={primary:"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400",secondary:"bg-secondary-100 dark:bg-secondary-900/30 text-secondary-600 dark:text-secondary-400",success:"bg-success-100 dark:bg-success-900/30 text-success-600 dark:text-success-400",warning:"bg-warning-100 dark:bg-warning-900/30 text-warning-600 dark:text-warning-400",danger:"bg-danger-100 dark:bg-danger-900/30 text-danger-600 dark:text-danger-400"},l={increase:"text-success-600 bg-success-50 dark:bg-success-900/20",decrease:"text-danger-600 bg-danger-50 dark:bg-danger-900/20",neutral:"text-gray-600 bg-gray-100 dark:bg-gray-800"};return s.jsxs(jt,{className:"relative overflow-hidden card-hover",children:[s.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 -mr-8 -mt-8 rounded-full bg-gradient-to-br ${i[a]} opacity-10`}),s.jsxs("div",{className:"relative flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:e}),r&&s.jsx("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium mt-2 ${l[r.type]}`,children:s.jsxs("span",{children:[r.type==="increase"?"+":r.type==="decrease"?"-":"",Math.abs(r.value),"%"]})})]}),n&&s.jsx("div",{className:`flex-shrink-0 p-3 rounded-xl ${o[a]}`,children:n})]})]})},bo=({children:t,variant:e="primary",size:r="md",dot:n=!1,icon:a,className:i=""})=>{const o={primary:"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 ring-primary-500/20",secondary:"bg-secondary-100 dark:bg-secondary-900/30 text-secondary-700 dark:text-secondary-300 ring-secondary-500/20",success:"bg-success-100 dark:bg-success-900/30 text-success-700 dark:text-success-300 ring-success-500/20",warning:"bg-warning-100 dark:bg-warning-900/30 text-warning-700 dark:text-warning-300 ring-warning-500/20",danger:"bg-danger-100 dark:bg-danger-900/30 text-danger-700 dark:text-danger-300 ring-danger-500/20",info:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 ring-blue-500/20",neutral:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 ring-gray-500/20"},l={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-xs",lg:"px-3 py-1.5 text-sm"},c={primary:"bg-primary-500",secondary:"bg-secondary-500",success:"bg-success-500",warning:"bg-warning-500",danger:"bg-danger-500",info:"bg-blue-500",neutral:"bg-gray-500"};return s.jsxs("span",{className:`
        inline-flex items-center gap-1.5 font-medium rounded-full
        ring-1 ring-inset
        ${o[e]}
        ${l[r]}
        ${i}
      `,children:[n&&s.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c[e]} animate-pulse`}),a&&s.jsx("span",{className:"flex-shrink-0",children:a}),t]})},Nm=({value:t,max:e=100,size:r="md",variant:n="primary",showLabel:a=!1,label:i,animated:o=!1,striped:l=!1})=>{const c=Math.min(Math.max(t/e*100,0),100),u={sm:"h-1.5",md:"h-2.5",lg:"h-4"},f={primary:"bg-primary-500",secondary:"bg-secondary-500",success:"bg-success-500",warning:"bg-warning-500",danger:"bg-danger-500",gradient:"bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500"};return s.jsxs("div",{className:"w-full",children:[(a||i)&&s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i||"Progresso"}),s.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[Math.round(c),"%"]})]}),s.jsx("div",{className:`w-full ${u[r]} bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden`,children:s.jsx("div",{className:`
            ${u[r]} ${f[n]} rounded-full
            transition-all duration-500 ease-out
            ${l?"bg-stripes":""}
            ${o?"animate-progress-stripes":""}
          `,style:{width:`${c}%`},role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":e})})]})},Fb=({value:t,max:e=100,size:r=80,strokeWidth:n=8,variant:a="primary",showValue:i=!0,label:o})=>{const l=Math.min(Math.max(t/e*100,0),100),c=(r-n)/2,u=c*2*Math.PI,f=u-l/100*u,g={primary:"stroke-primary-500",secondary:"stroke-secondary-500",success:"stroke-success-500",warning:"stroke-warning-500",danger:"stroke-danger-500"};return s.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[s.jsxs("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,className:"transform -rotate-90",children:[s.jsx("circle",{cx:r/2,cy:r/2,r:c,strokeWidth:n,className:"stroke-gray-200 dark:stroke-gray-700 fill-none"}),s.jsx("circle",{cx:r/2,cy:r/2,r:c,strokeWidth:n,strokeDasharray:u,strokeDashoffset:f,strokeLinecap:"round",className:`${g[a]} fill-none transition-all duration-500 ease-out`})]}),i&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[Math.round(l),"%"]}),o&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o})]})]})},Lb=({size:t="md",variant:e="primary",text:r,fullScreen:n=!1})=>{const a={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-3",lg:"w-12 h-12 border-4",xl:"w-16 h-16 border-4"},i={default:"border-gray-200 border-t-gray-600",primary:"border-primary-100 border-t-primary-600",white:"border-white/30 border-t-white"},o=s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`
            ${a[t]} ${i[e]}
            rounded-full animate-spin
          `}),s.jsx("div",{className:`
            absolute inset-0 ${a[t]}
            rounded-full animate-ping opacity-20
            ${e==="primary"?"bg-primary-500":e==="white"?"bg-white":"bg-gray-500"}
          `,style:{animationDuration:"2s"}})]}),r&&s.jsx("p",{className:`
          text-sm font-medium animate-pulse
          ${e==="white"?"text-white":"text-gray-600"}
        `,children:r})]});return n?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm",children:o}):o},Gr=({className:t="",variant:e="text",width:r,height:n})=>{const a="skeleton",i={text:"h-4 rounded",circular:"rounded-full",rectangular:"rounded-lg"},o={};return r&&(o.width=typeof r=="number"?`${r}px`:r),n&&(o.height=typeof n=="number"?`${n}px`:n),s.jsx("div",{className:`${a} ${i[e]} ${t}`,style:o})},Mb=({onNavigate:t,onNewAnalysis:e})=>{const{hasPermission:r}=ds(),n=Je.getToken(),[a,i]=Q.useState(null),[o,l]=Q.useState(!0);if(Q.useEffect(()=>{(async()=>{try{const y=await(await fetch("/api/dashboard/stats",{headers:{Authorization:`Bearer ${n}`}})).json();y.success&&i(y.stats)}catch(g){console.error("Error fetching stats:",g)}finally{l(!1)}})()},[n]),o)return s.jsx("div",{className:"space-y-6 animate-fade-in",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((f,g)=>s.jsxs(jt,{children:[s.jsx(Gr,{height:24,width:"60%",className:"mb-2"}),s.jsx(Gr,{height:36,width:"40%",className:"mb-3"}),s.jsx(Gr,{height:16,width:"80%"})]},g))})});const c=[{icon:Yt,label:"Nova Anlise",description:"Criar nova anlise de impacto",color:"primary",onClick:e,permission:r("ANALYSIS","CREATE")},{icon:et,label:"Minhas Anlises",description:"Gerenciar anlises existentes",color:"secondary",onClick:()=>t==null?void 0:t("analyses"),permission:r("ANALYSIS","VIEW")},{icon:yu,label:"Projetos",description:"Ver todos os projetos",color:"success",onClick:()=>t==null?void 0:t("projects"),permission:r("PROJECTS","VIEW")},{icon:Ma,label:"Usurios",description:"Gerenciar usurios",color:"warning",onClick:()=>t==null?void 0:t("users"),permission:r("USERS","MANAGE")}].filter(f=>f.permission),u=[{label:"Anlises criadas",value:75},{label:"Em reviso",value:45},{label:"Aprovadas",value:80},{label:"Pendentes",value:30}];return s.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Viso geral do sistema de anlise de impacto"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Ms,{className:"w-4 h-4"}),s.jsxs("span",{children:["ltima atualizao: ",new Date().toLocaleTimeString("pt-BR")]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"animate-fade-in-up stagger-1",children:s.jsx(hi,{title:"Total de Anlises",value:(a==null?void 0:a.totalAnalyses)||0,icon:s.jsx(et,{className:"w-6 h-6"}),color:"primary",change:{value:12,type:"increase"}})}),s.jsx("div",{className:"animate-fade-in-up stagger-2",children:s.jsx(hi,{title:"Projetos Ativos",value:(a==null?void 0:a.totalProjects)||0,icon:s.jsx(yu,{className:"w-6 h-6"}),color:"success",change:{value:5,type:"increase"}})}),s.jsx("div",{className:"animate-fade-in-up stagger-3",children:s.jsx(hi,{title:"Impactos Identificados",value:(a==null?void 0:a.totalImpacts)||0,icon:s.jsx(is,{className:"w-6 h-6"}),color:"warning"})}),s.jsx("div",{className:"animate-fade-in-up stagger-4",children:s.jsx(hi,{title:"Riscos Mapeados",value:(a==null?void 0:a.totalRisks)||0,icon:s.jsx(os,{className:"w-6 h-6"}),color:"danger"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 animate-fade-in-up stagger-5",children:s.jsxs(jt,{children:[s.jsx(Es,{children:s.jsx(Ss,{children:"Aes Rpidas"})}),s.jsx(nr,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((f,g)=>{const y=f.icon,h={primary:"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-primary-900/30",secondary:"bg-secondary-50 dark:bg-secondary-900/20 text-secondary-600 dark:text-secondary-400 hover:bg-secondary-100 dark:hover:bg-secondary-900/30",success:"bg-success-50 dark:bg-success-900/20 text-success-600 dark:text-success-400 hover:bg-success-100 dark:hover:bg-success-900/30",warning:"bg-warning-50 dark:bg-warning-900/20 text-warning-600 dark:text-warning-400 hover:bg-warning-100 dark:hover:bg-warning-900/30"};return s.jsxs("button",{onClick:f.onClick,className:`
                        flex items-center gap-4 p-4 rounded-xl transition-all duration-200
                        ${h[f.color]}
                        hover:shadow-md hover:-translate-y-0.5
                      `,children:[s.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:s.jsx(y,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:f.label}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.description})]})]},g)})})})]})}),s.jsx("div",{className:"animate-fade-in-up stagger-6",children:s.jsxs(jt,{className:"h-full",children:[s.jsx(Es,{children:s.jsx(Ss,{children:"Progresso do Ms"})}),s.jsxs(nr,{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(Fb,{value:68,size:120,strokeWidth:10,variant:"primary",label:"Concludo"}),s.jsx("div",{className:"mt-6 w-full space-y-3",children:u.map((f,g)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:f.label}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[f.value,"%"]})]}),s.jsx(Nm,{value:f.value,size:"sm",variant:"gradient"})]},g))})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"animate-fade-in-up stagger-7",children:s.jsxs(jt,{children:[s.jsx(Es,{action:s.jsxs("button",{className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:["Ver todas ",s.jsx(Q0,{className:"w-4 h-4"})]}),children:s.jsx(Ss,{children:"Anlises Recentes"})}),s.jsx(nr,{children:a!=null&&a.recentAnalyses&&a.recentAnalyses.length>0?s.jsx("div",{className:"space-y-3",children:a.recentAnalyses.slice(0,5).map((f,g)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center",children:s.jsx(et,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:f.title||`Anlise ${g+1}`}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:f.author||"Autor no definido"})]})]}),s.jsxs(bo,{variant:"primary",size:"sm",children:["v",f.version||"1.0"]})]},f.id||g))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center mx-auto mb-3",children:s.jsx(et,{className:"w-6 h-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma anlise recente"}),r("ANALYSIS","CREATE")&&s.jsx("button",{onClick:e,className:"mt-3 text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Criar primeira anlise"})]})})]})}),s.jsx("div",{className:"animate-fade-in-up stagger-8",children:s.jsxs(jt,{children:[s.jsx(Es,{children:s.jsx(Ss,{children:"Estatsticas do Sistema"})}),s.jsx(nr,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:s.jsx(Ma,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Usurios Ativos"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total cadastrados"})]})]}),s.jsx("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:(a==null?void 0:a.totalUsers)||0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-success-50 dark:bg-success-900/20 rounded-xl text-center",children:[s.jsx(Dv,{className:"w-6 h-6 text-success-600 dark:text-success-400 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:"95%"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Taxa de Sucesso"})]}),s.jsxs("div",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 rounded-xl text-center",children:[s.jsx(yv,{className:"w-6 h-6 text-warning-600 dark:text-warning-400 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-warning-600 dark:text-warning-400",children:"24"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aes Pendentes"})]})]}),s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Capacidade do Sistema"}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"45%"})]}),s.jsx(Nm,{value:45,variant:"gradient",animated:!0})]})]})})]})})]})]})},Bb=({analysisContext:t})=>{const e=Je.getToken(),[r,n]=Q.useState(!1),[a,i]=Q.useState(!1),[o,l]=Q.useState([]),[c,u]=Q.useState(""),[f,g]=Q.useState(!1),[y,h]=Q.useState(null),v=Q.useRef(null),b=Q.useRef(null);Q.useEffect(()=>{var T;(T=v.current)==null||T.scrollIntoView({behavior:"smooth"})},[o]);const S=async()=>{if(!c.trim()||f)return;const T={id:`msg-${Date.now()}`,role:"user",content:c.trim(),timestamp:new Date};l(O=>[...O,T]),u(""),g(!0);try{const G=await(await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({message:T.content,history:o.map(z=>({role:z.role,content:z.content})),analysisContext:t})})).json();if(G.success){const z={id:`msg-${Date.now()}-response`,role:"assistant",content:G.response,timestamp:new Date};l(K=>[...K,z])}else throw new Error(G.error)}catch(O){console.error("Chat error:",O);const G={id:`msg-${Date.now()}-error`,role:"assistant",content:"Desculpe, ocorreu um erro ao processar sua mensagem. Tente novamente.",timestamp:new Date};l(z=>[...z,G])}finally{g(!1)}},p=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),S())},x=async(T,O)=>{await navigator.clipboard.writeText(T),h(O),setTimeout(()=>h(null),2e3)},w=[{label:"Sugerir impactos",prompt:"Sugira impactos potenciais para esta anlise"},{label:"Identificar riscos",prompt:"Quais so os principais riscos desta mudana?"},{label:"Recomendar mitigaes",prompt:"Recomende aes de mitigao"},{label:"Resumir anlise",prompt:"Resuma esta anlise de impacto"}];return r?s.jsxs("div",{className:`
        fixed bottom-6 right-6 z-50
        bg-white dark:bg-gray-800
        rounded-2xl shadow-strong
        border border-gray-200 dark:border-gray-700
        transition-all duration-300 ease-out
        ${a?"w-80 h-14":"w-96 h-[600px]"}
        flex flex-col overflow-hidden
        animate-scale-in
      `,children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-secondary-500 to-primary-500 text-white cursor-pointer",onClick:()=>i(!a),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(kl,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-success-400 rounded-full"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Assistente IA"}),!a&&s.jsx("p",{className:"text-xs opacity-80",children:"Powered by Gemini"})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:T=>{T.stopPropagation(),i(!a)},className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:a?s.jsx(Nv,{className:"w-4 h-4"}):s.jsx(Cd,{className:"w-4 h-4"})}),s.jsx("button",{onClick:T=>{T.stopPropagation(),n(!1)},className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]})]}),!a&&s.jsxs(s.Fragment,{children:[o.length===0?s.jsxs("div",{className:"flex-1 p-4 flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-secondary-100 to-primary-100 dark:from-secondary-900/30 dark:to-primary-900/30 rounded-2xl flex items-center justify-center mb-4",children:s.jsx(po,{className:"w-8 h-8 text-secondary-600 dark:text-secondary-400"})}),s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Como posso ajudar?"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Sou seu assistente de anlise de impacto. Posso sugerir impactos, identificar riscos e recomendar mitigaes."}),s.jsx("div",{className:"w-full space-y-2",children:w.map((T,O)=>s.jsxs("button",{onClick:()=>{var G;u(T.prompt),(G=b.current)==null||G.focus()},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx(Cv,{className:"w-4 h-4 text-warning-500"}),T.label]},O))})]}):s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(T=>s.jsxs("div",{className:`flex gap-3 ${T.role==="user"?"flex-row-reverse":""}`,children:[s.jsx("div",{className:`
                      flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center
                      ${T.role==="user"?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-secondary-100 dark:bg-secondary-900/30 text-secondary-600 dark:text-secondary-400"}
                    `,children:T.role==="user"?s.jsx(zs,{className:"w-4 h-4"}):s.jsx(kl,{className:"w-4 h-4"})}),s.jsxs("div",{className:`
                      group relative max-w-[80%] px-4 py-2.5 rounded-2xl text-sm
                      ${T.role==="user"?"bg-primary-500 text-white rounded-tr-sm":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-tl-sm"}
                    `,children:[s.jsx("p",{className:"whitespace-pre-wrap",children:T.content}),T.role==="assistant"&&s.jsx("button",{onClick:()=>x(T.content,T.id),className:"absolute -top-2 -right-2 p-1.5 bg-white dark:bg-gray-800 rounded-lg shadow-md opacity-0 group-hover:opacity-100 transition-opacity",children:y===T.id?s.jsx(Ls,{className:"w-3 h-3 text-success-500"}):s.jsx(or,{className:"w-3 h-3 text-gray-400"})})]})]},T.id)),f&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-secondary-100 dark:bg-secondary-900/30 flex items-center justify-center",children:s.jsx(kl,{className:"w-4 h-4 text-secondary-600 dark:text-secondary-400"})}),s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-tl-sm px-4 py-3",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),s.jsx("div",{ref:v})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsx("textarea",{ref:b,value:c,onChange:T=>u(T.target.value),onKeyDown:p,placeholder:"Digite sua mensagem...",className:"w-full px-4 py-2.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:1,disabled:f})}),s.jsx("button",{onClick:S,disabled:!c.trim()||f,className:"flex-shrink-0 w-10 h-10 bg-gradient-to-r from-secondary-500 to-primary-500 text-white rounded-xl flex items-center justify-center hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f?s.jsx(Dr,{className:"w-5 h-5 animate-spin"}):s.jsx(Pv,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2 text-center",children:"Pressione Enter para enviar, Shift+Enter para nova linha"})]})]})]}):s.jsxs("button",{onClick:()=>n(!0),className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-secondary-500 to-primary-500 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 group",children:[s.jsx(po,{className:"w-5 h-5 animate-pulse"}),s.jsx("span",{className:"font-medium",children:"Assistente IA"}),s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-success-500 rounded-full animate-ping"}),s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-success-500 rounded-full"})]})},jm=({children:t,variant:e="primary",size:r="md",isLoading:n=!1,loadingText:a,leftIcon:i,rightIcon:o,fullWidth:l=!1,className:c="",disabled:u,...f})=>{const g=`
    relative inline-flex items-center justify-center font-medium
    rounded-xl transition-all duration-200 ease-out
    focus-ring btn-premium
    disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
  `,y={primary:`
      bg-gradient-to-r from-primary-500 to-primary-600 text-white
      hover:from-primary-600 hover:to-primary-700
      active:from-primary-700 active:to-primary-800
      shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/30
    `,secondary:`
      bg-gradient-to-r from-secondary-500 to-secondary-600 text-white
      hover:from-secondary-600 hover:to-secondary-700
      active:from-secondary-700 active:to-secondary-800
      shadow-lg shadow-secondary-500/25 hover:shadow-xl hover:shadow-secondary-500/30
    `,success:`
      bg-gradient-to-r from-success-500 to-success-600 text-white
      hover:from-success-600 hover:to-success-700
      active:from-success-700 active:to-success-800
      shadow-lg shadow-success-500/25 hover:shadow-xl hover:shadow-success-500/30
    `,danger:`
      bg-gradient-to-r from-danger-500 to-danger-600 text-white
      hover:from-danger-600 hover:to-danger-700
      active:from-danger-700 active:to-danger-800
      shadow-lg shadow-danger-500/25 hover:shadow-xl hover:shadow-danger-500/30
    `,warning:`
      bg-gradient-to-r from-warning-400 to-warning-500 text-white
      hover:from-warning-500 hover:to-warning-600
      active:from-warning-600 active:to-warning-700
      shadow-lg shadow-warning-500/25 hover:shadow-xl hover:shadow-warning-500/30
    `,ghost:`
      bg-transparent text-gray-700 dark:text-gray-300
      hover:bg-gray-100 dark:hover:bg-gray-800
      active:bg-gray-200 dark:active:bg-gray-700
    `,outline:`
      bg-transparent border-2 border-gray-300 dark:border-gray-600
      text-gray-700 dark:text-gray-300
      hover:bg-gray-50 dark:hover:bg-gray-800 hover:border-gray-400 dark:hover:border-gray-500
      active:bg-gray-100 dark:active:bg-gray-700
    `},h={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2.5"};return s.jsx("button",{className:`
        ${g}
        ${y[e]}
        ${h[r]}
        ${l?"w-full":""}
        ${c}
      `,disabled:u||n,...f,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Lb,{size:"sm",variant:"white"}),s.jsx("span",{children:a||t})]}):s.jsxs(s.Fragment,{children:[i&&s.jsx("span",{className:"flex-shrink-0",children:i}),s.jsx("span",{children:t}),o&&s.jsx("span",{className:"flex-shrink-0",children:o})]})})},zb=({onComplete:t,onSkip:e})=>{const[r,n]=Q.useState(0),[a,i]=Q.useState(!0),o=[{id:"welcome",title:"Bem-vindo ao NuP-AIM!",description:"Sistema inteligente de Anlise de Impacto. Vamos fazer um tour rpido pelas principais funcionalidades.",icon:s.jsx(Iv,{className:"w-8 h-8"})},{id:"analysis",title:"Criar Anlises de Impacto",description:"Crie anlises detalhadas com impactos, riscos e mitigaes. Nossa IA pode ajudar a gerar sugestes inteligentes.",icon:s.jsx(et,{className:"w-8 h-8"}),target:"form-section"},{id:"ai-assistant",title:"Assistente de IA",description:"Use nosso assistente inteligente para obter sugestes de impactos, riscos e mitigaes baseadas no contexto da sua anlise.",icon:s.jsx(po,{className:"w-8 h-8"})},{id:"export",title:"Exporte para Word",description:"Gere documentos profissionais em Word com um clique. Todas as sees formatadas automaticamente.",icon:s.jsx(Bs,{className:"w-8 h-8"})},{id:"permissions",title:"Gesto de Acessos",description:"Controle permisses de usurios com perfis personalizados. Administradores podem gerenciar usurios e perfis.",icon:s.jsx(os,{className:"w-8 h-8"})},{id:"complete",title:"Tudo Pronto!",description:"Voc est pronto para comear. Explore todas as funcionalidades e crie sua primeira anlise de impacto.",icon:s.jsx(Ls,{className:"w-8 h-8"})}],l=()=>{r<o.length-1?n(r+1):u()},c=()=>{r>0&&n(r-1)},u=()=>{localStorage.setItem("nup-aim-onboarding-complete","true"),i(!1),setTimeout(t,300)},f=()=>{localStorage.setItem("nup-aim-onboarding-complete","true"),i(!1),setTimeout(e,300)};if(!a)return null;const g=o[r],y=(r+1)/o.length*100;return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:f}),s.jsxs("div",{className:`
          relative w-full max-w-md mx-4 bg-white dark:bg-gray-800 rounded-2xl shadow-strong
          animate-scale-in transition-all duration-300
        `,children:[s.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700 rounded-t-2xl overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500 transition-all duration-500 ease-out",style:{width:`${y}%`}})}),s.jsx("button",{onClick:f,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:`
                inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-6
                bg-gradient-to-br from-primary-500 to-secondary-500 text-white
                animate-float
              `,children:g.icon}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:g.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:g.description})]}),s.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:o.map((h,v)=>s.jsx("button",{onClick:()=>n(v),className:`
                  w-2.5 h-2.5 rounded-full transition-all duration-300
                  ${v===r?"w-8 bg-primary-500":v<r?"bg-success-500":"bg-gray-300 dark:bg-gray-600"}
                `},v))}),s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx(jm,{variant:"ghost",onClick:c,disabled:r===0,leftIcon:s.jsx(Cn,{className:"w-4 h-4"}),children:"Anterior"}),s.jsx(jm,{variant:"primary",onClick:l,rightIcon:r===o.length-1?s.jsx(Ls,{className:"w-4 h-4"}):s.jsx(Q0,{className:"w-4 h-4"}),children:r===o.length-1?"Comear":"Prximo"})]}),s.jsx("button",{onClick:f,className:"w-full mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Pular tutorial"})]})]})]})};var Ub=Object.defineProperty,$b=Object.defineProperties,Vb=Object.getOwnPropertyDescriptors,Em=Object.getOwnPropertySymbols,Wb=Object.prototype.hasOwnProperty,Hb=Object.prototype.propertyIsEnumerable,Eu=(t,e,r)=>e in t?Ub(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ce=(t,e)=>{for(var r in e||(e={}))Wb.call(e,r)&&Eu(t,r,e[r]);if(Em)for(var r of Em(e))Hb.call(e,r)&&Eu(t,r,e[r]);return t},Rn=(t,e)=>$b(t,Vb(e)),le=(t,e,r)=>(Eu(t,typeof e!="symbol"?e+"":e,r),r),pi=(t,e,r)=>new Promise((n,a)=>{var i=c=>{try{l(r.next(c))}catch(u){a(u)}},o=c=>{try{l(r.throw(c))}catch(u){a(u)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);l((r=r.apply(t,e)).next())});class No{constructor(e){le(this,"rootKey"),this.rootKey=e}}const Gb=Object.seal({});class oe extends No{constructor(e){super(e),le(this,"root"),this.root=new Array}prepForXml(e){var r;e.stack.push(this);const n=this.root.map(a=>a instanceof No?a.prepForXml(e):a).filter(a=>a!==void 0);return e.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((r=n[0])!=null&&r._attr)?n[0]:n:Gb}}addChildElement(e){return this.root.push(e),this}}class Lr extends oe{prepForXml(e){const r=super.prepForXml(e);if(r&&(typeof r[this.rootKey]!="object"||Object.keys(r[this.rootKey]).length))return r}}class xe extends No{constructor(e){super("_attr"),le(this,"xmlKeys"),this.root=e}prepForXml(e){const r={};return Object.keys(this.root).forEach(n=>{const a=this.root[n];if(a!==void 0){const i=this.xmlKeys&&this.xmlKeys[n]||n;r[i]=a}}),{_attr:r}}}class Mr extends No{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:a,value:i})=>Rn(Ce({},n),{[a]:i}),{})}}}class He extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gg={},Od={exports:{}},gn=typeof Reflect=="object"?Reflect:null,Sm=gn&&typeof gn.apply=="function"?gn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},zi;gn&&typeof gn.ownKeys=="function"?zi=gn.ownKeys:Object.getOwnPropertySymbols?zi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zi=function(e){return Object.getOwnPropertyNames(e)};function qb(t){console&&console.warn&&console.warn(t)}var xg=Number.isNaN||function(e){return e!==e};function Oe(){Oe.init.call(this)}Od.exports=Oe;Od.exports.once=Qb;Oe.EventEmitter=Oe;Oe.prototype._events=void 0;Oe.prototype._eventsCount=0;Oe.prototype._maxListeners=void 0;var km=10;function Wo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return km},set:function(t){if(typeof t!="number"||t<0||xg(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");km=t}});Oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Oe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||xg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function yg(t){return t._maxListeners===void 0?Oe.defaultMaxListeners:t._maxListeners}Oe.prototype.getMaxListeners=function(){return yg(this)};Oe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=e==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")Sm(c,this,r);else for(var u=c.length,f=jg(c,u),n=0;n<u;++n)Sm(f[n],this,r);return!0};function wg(t,e,r,n){var a,i,o;if(Wo(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),a=yg(t),a>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,qb(l)}return t}Oe.prototype.addListener=function(e,r){return wg(this,e,r,!1)};Oe.prototype.on=Oe.prototype.addListener;Oe.prototype.prependListener=function(e,r){return wg(this,e,r,!0)};function Kb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vg(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},a=Kb.bind(n);return a.listener=r,n.wrapFn=a,a}Oe.prototype.once=function(e,r){return Wo(r),this.on(e,vg(this,e,r)),this};Oe.prototype.prependOnceListener=function(e,r){return Wo(r),this.prependListener(e,vg(this,e,r)),this};Oe.prototype.removeListener=function(e,r){var n,a,i,o,l;if(Wo(r),a=this._events,a===void 0)return this;if(n=a[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){l=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():Yb(n,i),n.length===1&&(a[e]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};Oe.prototype.off=Oe.prototype.removeListener;Oe.prototype.removeAllListeners=function(e){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(a=0;a<i.length;++a)o=i[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function bg(t,e,r){var n=t._events;if(n===void 0)return[];var a=n[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?Xb(a):jg(a,a.length)}Oe.prototype.listeners=function(e){return bg(this,e,!0)};Oe.prototype.rawListeners=function(e){return bg(this,e,!1)};Oe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ng.call(t,e)};Oe.prototype.listenerCount=Ng;function Ng(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Oe.prototype.eventNames=function(){return this._eventsCount>0?zi(this._events):[]};function jg(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Yb(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Xb(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Qb(t,e){return new Promise(function(r,n){function a(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",a),r([].slice.call(arguments))}Eg(t,e,i,{once:!0}),e!=="error"&&Jb(t,a,{once:!0})})}function Jb(t,e,r){typeof t.on=="function"&&Eg(t,"error",e,r)}function Eg(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(i){n.once&&t.removeEventListener(e,a),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Dd=Od.exports,Su={exports:{}};typeof Object.create=="function"?Su.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Su.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Ws=Su.exports;function Zb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},Xe=Sg.exports={},fr,mr;function ku(){throw new Error("setTimeout has not been defined")}function Cu(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?fr=setTimeout:fr=ku}catch{fr=ku}try{typeof clearTimeout=="function"?mr=clearTimeout:mr=Cu}catch{mr=Cu}})();function kg(t){if(fr===setTimeout)return setTimeout(t,0);if((fr===ku||!fr)&&setTimeout)return fr=setTimeout,setTimeout(t,0);try{return fr(t,0)}catch{try{return fr.call(null,t,0)}catch{return fr.call(this,t,0)}}}function e1(t){if(mr===clearTimeout)return clearTimeout(t);if((mr===Cu||!mr)&&clearTimeout)return mr=clearTimeout,clearTimeout(t);try{return mr(t)}catch{try{return mr.call(null,t)}catch{return mr.call(this,t)}}}var Cr=[],xn=!1,ks,Ui=-1;function t1(){!xn||!ks||(xn=!1,ks.length?Cr=ks.concat(Cr):Ui=-1,Cr.length&&Cg())}function Cg(){if(!xn){var t=kg(t1);xn=!0;for(var e=Cr.length;e;){for(ks=Cr,Cr=[];++Ui<e;)ks&&ks[Ui].run();Ui=-1,e=Cr.length}ks=null,xn=!1,e1(t)}}Xe.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Cr.push(new _g(t,e)),Cr.length===1&&!xn&&kg(Cg)};function _g(t,e){this.fun=t,this.array=e}_g.prototype.run=function(){this.fun.apply(null,this.array)};Xe.title="browser";Xe.browser=!0;Xe.env={};Xe.argv=[];Xe.version="";Xe.versions={};function Br(){}Xe.on=Br;Xe.addListener=Br;Xe.once=Br;Xe.off=Br;Xe.removeListener=Br;Xe.removeAllListeners=Br;Xe.emit=Br;Xe.prependListener=Br;Xe.prependOnceListener=Br;Xe.listeners=function(t){return[]};Xe.binding=function(t){throw new Error("process.binding is not supported")};Xe.cwd=function(){return"/"};Xe.chdir=function(t){throw new Error("process.chdir is not supported")};Xe.umask=function(){return 0};var r1=Sg.exports;const Se=Zb(r1);var Pl,Cm;function Ag(){return Cm||(Cm=1,Pl=Dd.EventEmitter),Pl}var Rl={},ra={},_m;function s1(){if(_m)return ra;_m=1,ra.byteLength=l,ra.toByteArray=u,ra.fromByteArray=y;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)t[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function o(h){var v=h.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=h.indexOf("=");b===-1&&(b=v);var S=b===v?0:4-b%4;return[b,S]}function l(h){var v=o(h),b=v[0],S=v[1];return(b+S)*3/4-S}function c(h,v,b){return(v+b)*3/4-b}function u(h){var v,b=o(h),S=b[0],p=b[1],x=new r(c(h,S,p)),w=0,T=p>0?S-4:S,O;for(O=0;O<T;O+=4)v=e[h.charCodeAt(O)]<<18|e[h.charCodeAt(O+1)]<<12|e[h.charCodeAt(O+2)]<<6|e[h.charCodeAt(O+3)],x[w++]=v>>16&255,x[w++]=v>>8&255,x[w++]=v&255;return p===2&&(v=e[h.charCodeAt(O)]<<2|e[h.charCodeAt(O+1)]>>4,x[w++]=v&255),p===1&&(v=e[h.charCodeAt(O)]<<10|e[h.charCodeAt(O+1)]<<4|e[h.charCodeAt(O+2)]>>2,x[w++]=v>>8&255,x[w++]=v&255),x}function f(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function g(h,v,b){for(var S,p=[],x=v;x<b;x+=3)S=(h[x]<<16&16711680)+(h[x+1]<<8&65280)+(h[x+2]&255),p.push(f(S));return p.join("")}function y(h){for(var v,b=h.length,S=b%3,p=[],x=16383,w=0,T=b-S;w<T;w+=x)p.push(g(h,w,w+x>T?T:w+x));return S===1?(v=h[b-1],p.push(t[v>>2]+t[v<<4&63]+"==")):S===2&&(v=(h[b-2]<<8)+h[b-1],p.push(t[v>>10]+t[v>>4&63]+t[v<<2&63]+"=")),p.join("")}return ra}var gi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Am;function n1(){return Am||(Am=1,gi.read=function(t,e,r,n,a){var i,o,l=a*8-n-1,c=(1<<l)-1,u=c>>1,f=-7,g=r?a-1:0,y=r?-1:1,h=t[e+g];for(g+=y,i=h&(1<<-f)-1,h>>=-f,f+=l;f>0;i=i*256+t[e+g],g+=y,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=n;f>0;o=o*256+t[e+g],g+=y,f-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(h?-1:1)*o*Math.pow(2,i-n)},gi.write=function(t,e,r,n,a,i){var o,l,c,u=i*8-a-1,f=(1<<u)-1,g=f>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,v=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+g>=1?e+=y/c:e+=y*Math.pow(2,1-g),e*c>=2&&(o++,c/=2),o+g>=f?(l=0,o=f):o+g>=1?(l=(e*c-1)*Math.pow(2,a),o=o+g):(l=e*Math.pow(2,g-1)*Math.pow(2,a),o=0));a>=8;t[r+h]=l&255,h+=v,l/=256,a-=8);for(o=o<<a|l,u+=a;u>0;t[r+h]=o&255,h+=v,o/=256,u-=8);t[r+h-v]|=b*128}),gi}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Tm;function Ho(){return Tm||(Tm=1,function(t){var e=s1(),r=n1(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;var a=2147483647;t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var _=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(_,d),_.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(_){if(_>a)throw new RangeError('The value "'+_+'" is invalid for option "size"');var d=new Uint8Array(_);return Object.setPrototypeOf(d,l.prototype),d}function l(_,d,m){if(typeof _=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(_)}return c(_,d,m)}l.poolSize=8192;function c(_,d,m){if(typeof _=="string")return y(_,d);if(ArrayBuffer.isView(_))return v(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(ne(_,ArrayBuffer)||_&&ne(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(_,SharedArrayBuffer)||_&&ne(_.buffer,SharedArrayBuffer)))return b(_,d,m);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=_.valueOf&&_.valueOf();if(j!=null&&j!==_)return l.from(j,d,m);var $=S(_);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return l.from(_[Symbol.toPrimitive]("string"),d,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}l.from=function(_,d,m){return c(_,d,m)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function f(_,d,m){return u(_),_<=0?o(_):d!==void 0?typeof m=="string"?o(_).fill(d,m):o(_).fill(d):o(_)}l.alloc=function(_,d,m){return f(_,d,m)};function g(_){return u(_),o(_<0?0:p(_)|0)}l.allocUnsafe=function(_){return g(_)},l.allocUnsafeSlow=function(_){return g(_)};function y(_,d){if((typeof d!="string"||d==="")&&(d="utf8"),!l.isEncoding(d))throw new TypeError("Unknown encoding: "+d);var m=w(_,d)|0,j=o(m),$=j.write(_,d);return $!==m&&(j=j.slice(0,$)),j}function h(_){for(var d=_.length<0?0:p(_.length)|0,m=o(d),j=0;j<d;j+=1)m[j]=_[j]&255;return m}function v(_){if(ne(_,Uint8Array)){var d=new Uint8Array(_);return b(d.buffer,d.byteOffset,d.byteLength)}return h(_)}function b(_,d,m){if(d<0||_.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<d+(m||0))throw new RangeError('"length" is outside of buffer bounds');var j;return d===void 0&&m===void 0?j=new Uint8Array(_):m===void 0?j=new Uint8Array(_,d):j=new Uint8Array(_,d,m),Object.setPrototypeOf(j,l.prototype),j}function S(_){if(l.isBuffer(_)){var d=p(_.length)|0,m=o(d);return m.length===0||_.copy(m,0,0,d),m}if(_.length!==void 0)return typeof _.length!="number"||N(_.length)?o(0):h(_);if(_.type==="Buffer"&&Array.isArray(_.data))return h(_.data)}function p(_){if(_>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return _|0}function x(_){return+_!=_&&(_=0),l.alloc(+_)}l.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==l.prototype},l.compare=function(d,m){if(ne(d,Uint8Array)&&(d=l.from(d,d.offset,d.byteLength)),ne(m,Uint8Array)&&(m=l.from(m,m.offset,m.byteLength)),!l.isBuffer(d)||!l.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===m)return 0;for(var j=d.length,$=m.length,te=0,W=Math.min(j,$);te<W;++te)if(d[te]!==m[te]){j=d[te],$=m[te];break}return j<$?-1:$<j?1:0},l.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(d,m){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return l.alloc(0);var j;if(m===void 0)for(m=0,j=0;j<d.length;++j)m+=d[j].length;var $=l.allocUnsafe(m),te=0;for(j=0;j<d.length;++j){var W=d[j];if(ne(W,Uint8Array))te+W.length>$.length?l.from(W).copy($,te):Uint8Array.prototype.set.call($,W,te);else if(l.isBuffer(W))W.copy($,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=W.length}return $};function w(_,d){if(l.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||ne(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);var m=_.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&m===0)return 0;for(var $=!1;;)switch(d){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return E(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return R(_).length;default:if($)return j?-1:E(_).length;d=(""+d).toLowerCase(),$=!0}}l.byteLength=w;function T(_,d,m){var j=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,d>>>=0,m<=d))return"";for(_||(_="utf8");;)switch(_){case"hex":return D(this,d,m);case"utf8":case"utf-8":return C(this,d,m);case"ascii":return F(this,d,m);case"latin1":case"binary":return V(this,d,m);case"base64":return H(this,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,d,m);default:if(j)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),j=!0}}l.prototype._isBuffer=!0;function O(_,d,m){var j=_[d];_[d]=_[m],_[m]=j}l.prototype.swap16=function(){var d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<d;m+=2)O(this,m,m+1);return this},l.prototype.swap32=function(){var d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<d;m+=4)O(this,m,m+3),O(this,m+1,m+2);return this},l.prototype.swap64=function(){var d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<d;m+=8)O(this,m,m+7),O(this,m+1,m+6),O(this,m+2,m+5),O(this,m+3,m+4);return this},l.prototype.toString=function(){var d=this.length;return d===0?"":arguments.length===0?C(this,0,d):T.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(d){if(!l.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:l.compare(this,d)===0},l.prototype.inspect=function(){var d="",m=t.INSPECT_MAX_BYTES;return d=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(d+=" ... "),"<Buffer "+d+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(d,m,j,$,te){if(ne(d,Uint8Array)&&(d=l.from(d,d.offset,d.byteLength)),!l.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(m===void 0&&(m=0),j===void 0&&(j=d?d.length:0),$===void 0&&($=0),te===void 0&&(te=this.length),m<0||j>d.length||$<0||te>this.length)throw new RangeError("out of range index");if($>=te&&m>=j)return 0;if($>=te)return-1;if(m>=j)return 1;if(m>>>=0,j>>>=0,$>>>=0,te>>>=0,this===d)return 0;for(var W=te-$,ce=j-m,fe=Math.min(W,ce),de=this.slice($,te),pe=d.slice(m,j),ve=0;ve<fe;++ve)if(de[ve]!==pe[ve]){W=de[ve],ce=pe[ve];break}return W<ce?-1:ce<W?1:0};function G(_,d,m,j,$){if(_.length===0)return-1;if(typeof m=="string"?(j=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,N(m)&&(m=$?0:_.length-1),m<0&&(m=_.length+m),m>=_.length){if($)return-1;m=_.length-1}else if(m<0)if($)m=0;else return-1;if(typeof d=="string"&&(d=l.from(d,j)),l.isBuffer(d))return d.length===0?-1:z(_,d,m,j,$);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(_,d,m):Uint8Array.prototype.lastIndexOf.call(_,d,m):z(_,[d],m,j,$);throw new TypeError("val must be string, number or Buffer")}function z(_,d,m,j,$){var te=1,W=_.length,ce=d.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(_.length<2||d.length<2)return-1;te=2,W/=2,ce/=2,m/=2}function fe(je,dt){return te===1?je[dt]:je.readUInt16BE(dt*te)}var de;if($){var pe=-1;for(de=m;de<W;de++)if(fe(_,de)===fe(d,pe===-1?0:de-pe)){if(pe===-1&&(pe=de),de-pe+1===ce)return pe*te}else pe!==-1&&(de-=de-pe),pe=-1}else for(m+ce>W&&(m=W-ce),de=m;de>=0;de--){for(var ve=!0,be=0;be<ce;be++)if(fe(_,de+be)!==fe(d,be)){ve=!1;break}if(ve)return de}return-1}l.prototype.includes=function(d,m,j){return this.indexOf(d,m,j)!==-1},l.prototype.indexOf=function(d,m,j){return G(this,d,m,j,!0)},l.prototype.lastIndexOf=function(d,m,j){return G(this,d,m,j,!1)};function K(_,d,m,j){m=Number(m)||0;var $=_.length-m;j?(j=Number(j),j>$&&(j=$)):j=$;var te=d.length;j>te/2&&(j=te/2);for(var W=0;W<j;++W){var ce=parseInt(d.substr(W*2,2),16);if(N(ce))return W;_[m+W]=ce}return W}function I(_,d,m,j){return L(E(d,_.length-m),_,m,j)}function se(_,d,m,j){return L(Z(d),_,m,j)}function ae(_,d,m,j){return L(R(d),_,m,j)}function P(_,d,m,j){return L(M(d,_.length-m),_,m,j)}l.prototype.write=function(d,m,j,$){if(m===void 0)$="utf8",j=this.length,m=0;else if(j===void 0&&typeof m=="string")$=m,j=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(j)?(j=j>>>0,$===void 0&&($="utf8")):($=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var te=this.length-m;if((j===void 0||j>te)&&(j=te),d.length>0&&(j<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var W=!1;;)switch($){case"hex":return K(this,d,m,j);case"utf8":case"utf-8":return I(this,d,m,j);case"ascii":case"latin1":case"binary":return se(this,d,m,j);case"base64":return ae(this,d,m,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,d,m,j);default:if(W)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),W=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(_,d,m){return d===0&&m===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(d,m))}function C(_,d,m){m=Math.min(_.length,m);for(var j=[],$=d;$<m;){var te=_[$],W=null,ce=te>239?4:te>223?3:te>191?2:1;if($+ce<=m){var fe,de,pe,ve;switch(ce){case 1:te<128&&(W=te);break;case 2:fe=_[$+1],(fe&192)===128&&(ve=(te&31)<<6|fe&63,ve>127&&(W=ve));break;case 3:fe=_[$+1],de=_[$+2],(fe&192)===128&&(de&192)===128&&(ve=(te&15)<<12|(fe&63)<<6|de&63,ve>2047&&(ve<55296||ve>57343)&&(W=ve));break;case 4:fe=_[$+1],de=_[$+2],pe=_[$+3],(fe&192)===128&&(de&192)===128&&(pe&192)===128&&(ve=(te&15)<<18|(fe&63)<<12|(de&63)<<6|pe&63,ve>65535&&ve<1114112&&(W=ve))}}W===null?(W=65533,ce=1):W>65535&&(W-=65536,j.push(W>>>10&1023|55296),W=56320|W&1023),j.push(W),$+=ce}return q(j)}var B=4096;function q(_){var d=_.length;if(d<=B)return String.fromCharCode.apply(String,_);for(var m="",j=0;j<d;)m+=String.fromCharCode.apply(String,_.slice(j,j+=B));return m}function F(_,d,m){var j="";m=Math.min(_.length,m);for(var $=d;$<m;++$)j+=String.fromCharCode(_[$]&127);return j}function V(_,d,m){var j="";m=Math.min(_.length,m);for(var $=d;$<m;++$)j+=String.fromCharCode(_[$]);return j}function D(_,d,m){var j=_.length;(!d||d<0)&&(d=0),(!m||m<0||m>j)&&(m=j);for(var $="",te=d;te<m;++te)$+=ie[_[te]];return $}function J(_,d,m){for(var j=_.slice(d,m),$="",te=0;te<j.length-1;te+=2)$+=String.fromCharCode(j[te]+j[te+1]*256);return $}l.prototype.slice=function(d,m){var j=this.length;d=~~d,m=m===void 0?j:~~m,d<0?(d+=j,d<0&&(d=0)):d>j&&(d=j),m<0?(m+=j,m<0&&(m=0)):m>j&&(m=j),m<d&&(m=d);var $=this.subarray(d,m);return Object.setPrototypeOf($,l.prototype),$};function U(_,d,m){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+d>m)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(d,m,j){d=d>>>0,m=m>>>0,j||U(d,m,this.length);for(var $=this[d],te=1,W=0;++W<m&&(te*=256);)$+=this[d+W]*te;return $},l.prototype.readUintBE=l.prototype.readUIntBE=function(d,m,j){d=d>>>0,m=m>>>0,j||U(d,m,this.length);for(var $=this[d+--m],te=1;m>0&&(te*=256);)$+=this[d+--m]*te;return $},l.prototype.readUint8=l.prototype.readUInt8=function(d,m){return d=d>>>0,m||U(d,1,this.length),this[d]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(d,m){return d=d>>>0,m||U(d,2,this.length),this[d]|this[d+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(d,m){return d=d>>>0,m||U(d,2,this.length),this[d]<<8|this[d+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(d,m){return d=d>>>0,m||U(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(d,m){return d=d>>>0,m||U(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},l.prototype.readIntLE=function(d,m,j){d=d>>>0,m=m>>>0,j||U(d,m,this.length);for(var $=this[d],te=1,W=0;++W<m&&(te*=256);)$+=this[d+W]*te;return te*=128,$>=te&&($-=Math.pow(2,8*m)),$},l.prototype.readIntBE=function(d,m,j){d=d>>>0,m=m>>>0,j||U(d,m,this.length);for(var $=m,te=1,W=this[d+--$];$>0&&(te*=256);)W+=this[d+--$]*te;return te*=128,W>=te&&(W-=Math.pow(2,8*m)),W},l.prototype.readInt8=function(d,m){return d=d>>>0,m||U(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},l.prototype.readInt16LE=function(d,m){d=d>>>0,m||U(d,2,this.length);var j=this[d]|this[d+1]<<8;return j&32768?j|4294901760:j},l.prototype.readInt16BE=function(d,m){d=d>>>0,m||U(d,2,this.length);var j=this[d+1]|this[d]<<8;return j&32768?j|4294901760:j},l.prototype.readInt32LE=function(d,m){return d=d>>>0,m||U(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},l.prototype.readInt32BE=function(d,m){return d=d>>>0,m||U(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},l.prototype.readFloatLE=function(d,m){return d=d>>>0,m||U(d,4,this.length),r.read(this,d,!0,23,4)},l.prototype.readFloatBE=function(d,m){return d=d>>>0,m||U(d,4,this.length),r.read(this,d,!1,23,4)},l.prototype.readDoubleLE=function(d,m){return d=d>>>0,m||U(d,8,this.length),r.read(this,d,!0,52,8)},l.prototype.readDoubleBE=function(d,m){return d=d>>>0,m||U(d,8,this.length),r.read(this,d,!1,52,8)};function A(_,d,m,j,$,te){if(!l.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>$||d<te)throw new RangeError('"value" argument is out of bounds');if(m+j>_.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(d,m,j,$){if(d=+d,m=m>>>0,j=j>>>0,!$){var te=Math.pow(2,8*j)-1;A(this,d,m,j,te,0)}var W=1,ce=0;for(this[m]=d&255;++ce<j&&(W*=256);)this[m+ce]=d/W&255;return m+j},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(d,m,j,$){if(d=+d,m=m>>>0,j=j>>>0,!$){var te=Math.pow(2,8*j)-1;A(this,d,m,j,te,0)}var W=j-1,ce=1;for(this[m+W]=d&255;--W>=0&&(ce*=256);)this[m+W]=d/ce&255;return m+j},l.prototype.writeUint8=l.prototype.writeUInt8=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,1,255,0),this[m]=d&255,m+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,2,65535,0),this[m]=d&255,this[m+1]=d>>>8,m+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,2,65535,0),this[m]=d>>>8,this[m+1]=d&255,m+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,4,4294967295,0),this[m+3]=d>>>24,this[m+2]=d>>>16,this[m+1]=d>>>8,this[m]=d&255,m+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,4,4294967295,0),this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=d&255,m+4},l.prototype.writeIntLE=function(d,m,j,$){if(d=+d,m=m>>>0,!$){var te=Math.pow(2,8*j-1);A(this,d,m,j,te-1,-te)}var W=0,ce=1,fe=0;for(this[m]=d&255;++W<j&&(ce*=256);)d<0&&fe===0&&this[m+W-1]!==0&&(fe=1),this[m+W]=(d/ce>>0)-fe&255;return m+j},l.prototype.writeIntBE=function(d,m,j,$){if(d=+d,m=m>>>0,!$){var te=Math.pow(2,8*j-1);A(this,d,m,j,te-1,-te)}var W=j-1,ce=1,fe=0;for(this[m+W]=d&255;--W>=0&&(ce*=256);)d<0&&fe===0&&this[m+W+1]!==0&&(fe=1),this[m+W]=(d/ce>>0)-fe&255;return m+j},l.prototype.writeInt8=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,1,127,-128),d<0&&(d=255+d+1),this[m]=d&255,m+1},l.prototype.writeInt16LE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,2,32767,-32768),this[m]=d&255,this[m+1]=d>>>8,m+2},l.prototype.writeInt16BE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,2,32767,-32768),this[m]=d>>>8,this[m+1]=d&255,m+2},l.prototype.writeInt32LE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,4,2147483647,-2147483648),this[m]=d&255,this[m+1]=d>>>8,this[m+2]=d>>>16,this[m+3]=d>>>24,m+4},l.prototype.writeInt32BE=function(d,m,j){return d=+d,m=m>>>0,j||A(this,d,m,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=d&255,m+4};function Y(_,d,m,j,$,te){if(m+j>_.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function X(_,d,m,j,$){return d=+d,m=m>>>0,$||Y(_,d,m,4),r.write(_,d,m,j,23,4),m+4}l.prototype.writeFloatLE=function(d,m,j){return X(this,d,m,!0,j)},l.prototype.writeFloatBE=function(d,m,j){return X(this,d,m,!1,j)};function re(_,d,m,j,$){return d=+d,m=m>>>0,$||Y(_,d,m,8),r.write(_,d,m,j,52,8),m+8}l.prototype.writeDoubleLE=function(d,m,j){return re(this,d,m,!0,j)},l.prototype.writeDoubleBE=function(d,m,j){return re(this,d,m,!1,j)},l.prototype.copy=function(d,m,j,$){if(!l.isBuffer(d))throw new TypeError("argument should be a Buffer");if(j||(j=0),!$&&$!==0&&($=this.length),m>=d.length&&(m=d.length),m||(m=0),$>0&&$<j&&($=j),$===j||d.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),d.length-m<$-j&&($=d.length-m+j);var te=$-j;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,j,$):Uint8Array.prototype.set.call(d,this.subarray(j,$),m),te},l.prototype.fill=function(d,m,j,$){if(typeof d=="string"){if(typeof m=="string"?($=m,m=0,j=this.length):typeof j=="string"&&($=j,j=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!l.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(d.length===1){var te=d.charCodeAt(0);($==="utf8"&&te<128||$==="latin1")&&(d=te)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(m<0||this.length<m||this.length<j)throw new RangeError("Out of range index");if(j<=m)return this;m=m>>>0,j=j===void 0?this.length:j>>>0,d||(d=0);var W;if(typeof d=="number")for(W=m;W<j;++W)this[W]=d;else{var ce=l.isBuffer(d)?d:l.from(d,$),fe=ce.length;if(fe===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(W=0;W<j-m;++W)this[W+m]=ce[W%fe]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function k(_){if(_=_.split("=")[0],_=_.trim().replace(ee,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function E(_,d){d=d||1/0;for(var m,j=_.length,$=null,te=[],W=0;W<j;++W){if(m=_.charCodeAt(W),m>55295&&m<57344){if(!$){if(m>56319){(d-=3)>-1&&te.push(239,191,189);continue}else if(W+1===j){(d-=3)>-1&&te.push(239,191,189);continue}$=m;continue}if(m<56320){(d-=3)>-1&&te.push(239,191,189),$=m;continue}m=($-55296<<10|m-56320)+65536}else $&&(d-=3)>-1&&te.push(239,191,189);if($=null,m<128){if((d-=1)<0)break;te.push(m)}else if(m<2048){if((d-=2)<0)break;te.push(m>>6|192,m&63|128)}else if(m<65536){if((d-=3)<0)break;te.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((d-=4)<0)break;te.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return te}function Z(_){for(var d=[],m=0;m<_.length;++m)d.push(_.charCodeAt(m)&255);return d}function M(_,d){for(var m,j,$,te=[],W=0;W<_.length&&!((d-=2)<0);++W)m=_.charCodeAt(W),j=m>>8,$=m%256,te.push($),te.push(j);return te}function R(_){return e.toByteArray(k(_))}function L(_,d,m,j){for(var $=0;$<j&&!($+m>=d.length||$>=_.length);++$)d[$+m]=_[$];return $}function ne(_,d){return _ instanceof d||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===d.name}function N(_){return _!==_}var ie=function(){for(var _="0123456789abcdef",d=new Array(256),m=0;m<16;++m)for(var j=m*16,$=0;$<16;++$)d[j+$]=_[m]+_[$];return d}()}(Rl)),Rl}var Ol={},Dl={},Fl,Im;function Tg(){return Im||(Im=1,Fl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==a||o.enumerable!==!0)return!1}return!0}),Fl}var Ll,Pm;function Fd(){if(Pm)return Ll;Pm=1;var t=Tg();return Ll=function(){return t()&&!!Symbol.toStringTag},Ll}var Ml,Rm;function a1(){if(Rm)return Ml;Rm=1;var t=typeof Symbol<"u"&&Symbol,e=Tg();return Ml=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Ml}var Bl,Om;function i1(){if(Om)return Bl;Om=1;var t={foo:{}},e=Object;return Bl=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof e)},Bl}var zl,Dm;function o1(){if(Dm)return zl;Dm=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",a=function(c,u){for(var f=[],g=0;g<c.length;g+=1)f[g]=c[g];for(var y=0;y<u.length;y+=1)f[y+c.length]=u[y];return f},i=function(c,u){for(var f=[],g=u,y=0;g<c.length;g+=1,y+=1)f[y]=c[g];return f},o=function(l,c){for(var u="",f=0;f<l.length;f+=1)u+=l[f],f+1<l.length&&(u+=c);return u};return zl=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(t+u);for(var f=i(arguments,1),g,y=function(){if(this instanceof g){var p=u.apply(this,a(f,arguments));return Object(p)===p?p:this}return u.apply(c,a(f,arguments))},h=r(0,u.length-f.length),v=[],b=0;b<h;b++)v[b]="$"+b;if(g=Function("binder","return function ("+o(v,",")+"){ return binder.apply(this,arguments); }")(y),u.prototype){var S=function(){};S.prototype=u.prototype,g.prototype=new S,S.prototype=null}return g},zl}var Ul,Fm;function Ld(){if(Fm)return Ul;Fm=1;var t=o1();return Ul=Function.prototype.bind||t,Ul}var $l,Lm;function l1(){if(Lm)return $l;Lm=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Ld();return $l=r.call(t,e),$l}var Vl,Mm;function Vn(){if(Mm)return Vl;Mm=1;var t,e=SyntaxError,r=Function,n=TypeError,a=function(P){try{return r('"use strict"; return ('+P+").constructor;")()}catch{}},i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch{i=null}var o=function(){throw new n},l=i?function(){try{return arguments.callee,o}catch{try{return i(arguments,"callee").get}catch{return o}}}():o,c=a1()(),u=i1()(),f=Object.getPrototypeOf||(u?function(P){return P.__proto__}:null),g={},y=typeof Uint8Array>"u"||!f?t:f(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":c&&f?f([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":g,"%AsyncGenerator%":g,"%AsyncGeneratorFunction%":g,"%AsyncIteratorPrototype%":g,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":g,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c&&f?f(f([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!c||!f?t:f(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!c||!f?t:f(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c&&f?f(""[Symbol.iterator]()):t,"%Symbol%":c?Symbol:t,"%SyntaxError%":e,"%ThrowTypeError%":l,"%TypedArray%":y,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(f)try{null.error}catch(P){var v=f(f(P));h["%Error.prototype%"]=v}var b=function P(H){var C;if(H==="%AsyncFunction%")C=a("async function () {}");else if(H==="%GeneratorFunction%")C=a("function* () {}");else if(H==="%AsyncGeneratorFunction%")C=a("async function* () {}");else if(H==="%AsyncGenerator%"){var B=P("%AsyncGeneratorFunction%");B&&(C=B.prototype)}else if(H==="%AsyncIteratorPrototype%"){var q=P("%AsyncGenerator%");q&&f&&(C=f(q.prototype))}return h[H]=C,C},S={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=Ld(),x=l1(),w=p.call(Function.call,Array.prototype.concat),T=p.call(Function.apply,Array.prototype.splice),O=p.call(Function.call,String.prototype.replace),G=p.call(Function.call,String.prototype.slice),z=p.call(Function.call,RegExp.prototype.exec),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,se=function(H){var C=G(H,0,1),B=G(H,-1);if(C==="%"&&B!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(B==="%"&&C!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var q=[];return O(H,K,function(F,V,D,J){q[q.length]=D?O(J,I,"$1"):V||F}),q},ae=function(H,C){var B=H,q;if(x(S,B)&&(q=S[B],B="%"+q[0]+"%"),x(h,B)){var F=h[B];if(F===g&&(F=b(B)),typeof F>"u"&&!C)throw new n("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:q,name:B,value:F}}throw new e("intrinsic "+H+" does not exist!")};return Vl=function(H,C){if(typeof H!="string"||H.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new n('"allowMissing" argument must be a boolean');if(z(/^%?[^%]*%?$/,H)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var B=se(H),q=B.length>0?B[0]:"",F=ae("%"+q+"%",C),V=F.name,D=F.value,J=!1,U=F.alias;U&&(q=U[0],T(B,w([0,1],U)));for(var A=1,Y=!0;A<B.length;A+=1){var X=B[A],re=G(X,0,1),ee=G(X,-1);if((re==='"'||re==="'"||re==="`"||ee==='"'||ee==="'"||ee==="`")&&re!==ee)throw new e("property names with quotes must have matching quotes");if((X==="constructor"||!Y)&&(J=!0),q+="."+X,V="%"+q+"%",x(h,V))D=h[V];else if(D!=null){if(!(X in D)){if(!C)throw new n("base intrinsic for "+H+" exists, but the property is not available.");return}if(i&&A+1>=B.length){var k=i(D,X);Y=!!k,Y&&"get"in k&&!("originalValue"in k.get)?D=k.get:D=D[X]}else Y=x(D,X),D=D[X];Y&&!J&&(h[V]=D)}}return D},Vl}var Wl={exports:{}},Hl,Bm;function Ig(){if(Bm)return Hl;Bm=1;var t=Vn(),e=t("%Object.defineProperty%",!0),r=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return r.hasArrayLengthDefineBug=function(){if(!r())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},Hl=r,Hl}var Gl,zm;function Md(){if(zm)return Gl;zm=1;var t=Vn(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return Gl=e,Gl}var ql,Um;function c1(){if(Um)return ql;Um=1;var t=Ig()(),e=Vn(),r=t&&e("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1})}catch{r=!1}var n=e("%SyntaxError%"),a=e("%TypeError%"),i=Md();return ql=function(l,c,u){if(!l||typeof l!="object"&&typeof l!="function")throw new a("`obj` must be an object or a function`");if(typeof c!="string"&&typeof c!="symbol")throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new a("`loose`, if provided, must be a boolean");var f=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,v=!!i&&i(l,c);if(r)r(l,c,{configurable:y===null&&v?v.configurable:!y,enumerable:f===null&&v?v.enumerable:!f,value:u,writable:g===null&&v?v.writable:!g});else if(h||!f&&!g&&!y)l[c]=u;else throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ql}var Kl,$m;function u1(){if($m)return Kl;$m=1;var t=Vn(),e=c1(),r=Ig()(),n=Md(),a=t("%TypeError%"),i=t("%Math.floor%");return Kl=function(l,c){if(typeof l!="function")throw new a("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||i(c)!==c)throw new a("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,g=!0;if("length"in l&&n){var y=n(l,"length");y&&!y.configurable&&(f=!1),y&&!y.writable&&(g=!1)}return(f||g||!u)&&(r?e(l,"length",c,!0,!0):e(l,"length",c)),l},Kl}var Vm;function Pg(){return Vm||(Vm=1,function(t){var e=Ld(),r=Vn(),n=u1(),a=r("%TypeError%"),i=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),l=r("%Reflect.apply%",!0)||e.call(o,i),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}t.exports=function(y){if(typeof y!="function")throw new a("a function is required");var h=l(e,o,arguments);return n(h,1+u(0,y.length-(arguments.length-1)),!0)};var f=function(){return l(e,i,arguments)};c?c(t.exports,"apply",{value:f}):t.exports.apply=f}(Wl)),Wl.exports}var Yl,Wm;function Rg(){if(Wm)return Yl;Wm=1;var t=Vn(),e=Pg(),r=e(t("String.prototype.indexOf"));return Yl=function(a,i){var o=t(a,!!i);return typeof o=="function"&&r(a,".prototype.")>-1?e(o):o},Yl}var Xl,Hm;function d1(){if(Hm)return Xl;Hm=1;var t=Fd()(),e=Rg(),r=e("Object.prototype.toString"),n=function(l){return t&&l&&typeof l=="object"&&Symbol.toStringTag in l?!1:r(l)==="[object Arguments]"},a=function(l){return n(l)?!0:l!==null&&typeof l=="object"&&typeof l.length=="number"&&l.length>=0&&r(l)!=="[object Array]"&&r(l.callee)==="[object Function]"},i=function(){return n(arguments)}();return n.isLegacyArguments=a,Xl=i?n:a,Xl}var Ql,Gm;function f1(){if(Gm)return Ql;Gm=1;var t=Object.prototype.toString,e=Function.prototype.toString,r=/^\s*(?:function)?\*/,n=Fd()(),a=Object.getPrototypeOf,i=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},o;return Ql=function(c){if(typeof c!="function")return!1;if(r.test(e.call(c)))return!0;if(!n){var u=t.call(c);return u==="[object GeneratorFunction]"}if(!a)return!1;if(typeof o>"u"){var f=i();o=f?a(f):!1}return a(c)===o},Ql}var Jl,qm;function m1(){if(qm)return Jl;qm=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(x){x!==n&&(e=null)}else e=null;var a=/^\s*class\b/,i=function(w){try{var T=t.call(w);return a.test(T)}catch{return!1}},o=function(w){try{return i(w)?!1:(t.call(w),!0)}catch{return!1}},l=Object.prototype.toString,c="[object Object]",u="[object Function]",f="[object GeneratorFunction]",g="[object HTMLAllCollection]",y="[object HTML document.all class]",h="[object HTMLCollection]",v=typeof Symbol=="function"&&!!Symbol.toStringTag,b=!(0 in[,]),S=function(){return!1};if(typeof document=="object"){var p=document.all;l.call(p)===l.call(document.all)&&(S=function(w){if((b||!w)&&(typeof w>"u"||typeof w=="object"))try{var T=l.call(w);return(T===g||T===y||T===h||T===c)&&w("")==null}catch{}return!1})}return Jl=e?function(w){if(S(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{e(w,null,r)}catch(T){if(T!==n)return!1}return!i(w)&&o(w)}:function(w){if(S(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(v)return o(w);if(i(w))return!1;var T=l.call(w);return T!==u&&T!==f&&!/^\[object HTML/.test(T)?!1:o(w)},Jl}var Zl,Km;function h1(){if(Km)return Zl;Km=1;var t=m1(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(c,u,f){for(var g=0,y=c.length;g<y;g++)r.call(c,g)&&(f==null?u(c[g],g,c):u.call(f,c[g],g,c))},a=function(c,u,f){for(var g=0,y=c.length;g<y;g++)f==null?u(c.charAt(g),g,c):u.call(f,c.charAt(g),g,c)},i=function(c,u,f){for(var g in c)r.call(c,g)&&(f==null?u(c[g],g,c):u.call(f,c[g],g,c))},o=function(c,u,f){if(!t(u))throw new TypeError("iterator must be a function");var g;arguments.length>=3&&(g=f),e.call(c)==="[object Array]"?n(c,u,g):typeof c=="string"?a(c,u,g):i(c,u,g)};return Zl=o,Zl}var ec,Ym;function p1(){if(Ym)return ec;Ym=1;var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?gr:globalThis;return ec=function(){for(var n=[],a=0;a<t.length;a++)typeof e[t[a]]=="function"&&(n[n.length]=t[a]);return n},ec}var tc,Xm;function Og(){if(Xm)return tc;Xm=1;var t=h1(),e=p1(),r=Pg(),n=Rg(),a=Md(),i=n("Object.prototype.toString"),o=Fd()(),l=typeof globalThis>"u"?gr:globalThis,c=e(),u=n("String.prototype.slice"),f=Object.getPrototypeOf,g=n("Array.prototype.indexOf",!0)||function(S,p){for(var x=0;x<S.length;x+=1)if(S[x]===p)return x;return-1},y={__proto__:null};o&&a&&f?t(c,function(b){var S=new l[b];if(Symbol.toStringTag in S){var p=f(S),x=a(p,Symbol.toStringTag);if(!x){var w=f(p);x=a(w,Symbol.toStringTag)}y["$"+b]=r(x.get)}}):t(c,function(b){var S=new l[b],p=S.slice||S.set;p&&(y["$"+b]=r(p))});var h=function(S){var p=!1;return t(y,function(x,w){if(!p)try{"$"+x(S)===w&&(p=u(w,1))}catch{}}),p},v=function(S){var p=!1;return t(y,function(x,w){if(!p)try{x(S),p=u(w,1)}catch{}}),p};return tc=function(S){if(!S||typeof S!="object")return!1;if(!o){var p=u(i(S),8,-1);return g(c,p)>-1?p:p!=="Object"?!1:v(S)}return a?h(S):null},tc}var rc,Qm;function g1(){if(Qm)return rc;Qm=1;var t=Og();return rc=function(r){return!!t(r)},rc}var Jm;function x1(){return Jm||(Jm=1,function(t){var e=d1(),r=f1(),n=Og(),a=g1();function i(j){return j.call.bind(j)}var o=typeof BigInt<"u",l=typeof Symbol<"u",c=i(Object.prototype.toString),u=i(Number.prototype.valueOf),f=i(String.prototype.valueOf),g=i(Boolean.prototype.valueOf);if(o)var y=i(BigInt.prototype.valueOf);if(l)var h=i(Symbol.prototype.valueOf);function v(j,$){if(typeof j!="object")return!1;try{return $(j),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=a;function b(j){return typeof Promise<"u"&&j instanceof Promise||j!==null&&typeof j=="object"&&typeof j.then=="function"&&typeof j.catch=="function"}t.isPromise=b;function S(j){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(j):a(j)||Y(j)}t.isArrayBufferView=S;function p(j){return n(j)==="Uint8Array"}t.isUint8Array=p;function x(j){return n(j)==="Uint8ClampedArray"}t.isUint8ClampedArray=x;function w(j){return n(j)==="Uint16Array"}t.isUint16Array=w;function T(j){return n(j)==="Uint32Array"}t.isUint32Array=T;function O(j){return n(j)==="Int8Array"}t.isInt8Array=O;function G(j){return n(j)==="Int16Array"}t.isInt16Array=G;function z(j){return n(j)==="Int32Array"}t.isInt32Array=z;function K(j){return n(j)==="Float32Array"}t.isFloat32Array=K;function I(j){return n(j)==="Float64Array"}t.isFloat64Array=I;function se(j){return n(j)==="BigInt64Array"}t.isBigInt64Array=se;function ae(j){return n(j)==="BigUint64Array"}t.isBigUint64Array=ae;function P(j){return c(j)==="[object Map]"}P.working=typeof Map<"u"&&P(new Map);function H(j){return typeof Map>"u"?!1:P.working?P(j):j instanceof Map}t.isMap=H;function C(j){return c(j)==="[object Set]"}C.working=typeof Set<"u"&&C(new Set);function B(j){return typeof Set>"u"?!1:C.working?C(j):j instanceof Set}t.isSet=B;function q(j){return c(j)==="[object WeakMap]"}q.working=typeof WeakMap<"u"&&q(new WeakMap);function F(j){return typeof WeakMap>"u"?!1:q.working?q(j):j instanceof WeakMap}t.isWeakMap=F;function V(j){return c(j)==="[object WeakSet]"}V.working=typeof WeakSet<"u"&&V(new WeakSet);function D(j){return V(j)}t.isWeakSet=D;function J(j){return c(j)==="[object ArrayBuffer]"}J.working=typeof ArrayBuffer<"u"&&J(new ArrayBuffer);function U(j){return typeof ArrayBuffer>"u"?!1:J.working?J(j):j instanceof ArrayBuffer}t.isArrayBuffer=U;function A(j){return c(j)==="[object DataView]"}A.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&A(new DataView(new ArrayBuffer(1),0,1));function Y(j){return typeof DataView>"u"?!1:A.working?A(j):j instanceof DataView}t.isDataView=Y;var X=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function re(j){return c(j)==="[object SharedArrayBuffer]"}function ee(j){return typeof X>"u"?!1:(typeof re.working>"u"&&(re.working=re(new X)),re.working?re(j):j instanceof X)}t.isSharedArrayBuffer=ee;function k(j){return c(j)==="[object AsyncFunction]"}t.isAsyncFunction=k;function E(j){return c(j)==="[object Map Iterator]"}t.isMapIterator=E;function Z(j){return c(j)==="[object Set Iterator]"}t.isSetIterator=Z;function M(j){return c(j)==="[object Generator]"}t.isGeneratorObject=M;function R(j){return c(j)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=R;function L(j){return v(j,u)}t.isNumberObject=L;function ne(j){return v(j,f)}t.isStringObject=ne;function N(j){return v(j,g)}t.isBooleanObject=N;function ie(j){return o&&v(j,y)}t.isBigIntObject=ie;function _(j){return l&&v(j,h)}t.isSymbolObject=_;function d(j){return L(j)||ne(j)||N(j)||ie(j)||_(j)}t.isBoxedPrimitive=d;function m(j){return typeof Uint8Array<"u"&&(U(j)||ee(j))}t.isAnyArrayBuffer=m,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(j){Object.defineProperty(t,j,{enumerable:!1,value:function(){throw new Error(j+" is not supported in userland")}})})}(Dl)),Dl}var sc,Zm;function y1(){return Zm||(Zm=1,sc=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),sc}var eh;function Dg(){return eh||(eh=1,function(t){var e=Object.getOwnPropertyDescriptors||function(Y){for(var X=Object.keys(Y),re={},ee=0;ee<X.length;ee++)re[X[ee]]=Object.getOwnPropertyDescriptor(Y,X[ee]);return re},r=/%[sdj%]/g;t.format=function(A){if(!O(A)){for(var Y=[],X=0;X<arguments.length;X++)Y.push(o(arguments[X]));return Y.join(" ")}for(var X=1,re=arguments,ee=re.length,k=String(A).replace(r,function(Z){if(Z==="%%")return"%";if(X>=ee)return Z;switch(Z){case"%s":return String(re[X++]);case"%d":return Number(re[X++]);case"%j":try{return JSON.stringify(re[X++])}catch{return"[Circular]"}default:return Z}}),E=re[X];X<ee;E=re[++X])x(E)||!I(E)?k+=" "+E:k+=" "+o(E);return k},t.deprecate=function(A,Y){if(typeof Se<"u"&&Se.noDeprecation===!0)return A;if(typeof Se>"u")return function(){return t.deprecate(A,Y).apply(this,arguments)};var X=!1;function re(){if(!X){if(Se.throwDeprecation)throw new Error(Y);Se.traceDeprecation?console.trace(Y):console.error(Y),X=!0}return A.apply(this,arguments)}return re};var n={},a=/^$/;if(Se.env.NODE_DEBUG){var i=Se.env.NODE_DEBUG;i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+i+"$","i")}t.debuglog=function(A){if(A=A.toUpperCase(),!n[A])if(a.test(A)){var Y=Se.pid;n[A]=function(){var X=t.format.apply(t,arguments);console.error("%s %d: %s",A,Y,X)}}else n[A]=function(){};return n[A]};function o(A,Y){var X={seen:[],stylize:c};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),p(Y)?X.showHidden=Y:Y&&t._extend(X,Y),z(X.showHidden)&&(X.showHidden=!1),z(X.depth)&&(X.depth=2),z(X.colors)&&(X.colors=!1),z(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=l),f(X,A,X.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(A,Y){var X=o.styles[Y];return X?"\x1B["+o.colors[X][0]+"m"+A+"\x1B["+o.colors[X][1]+"m":A}function c(A,Y){return A}function u(A){var Y={};return A.forEach(function(X,re){Y[X]=!0}),Y}function f(A,Y,X){if(A.customInspect&&Y&&P(Y.inspect)&&Y.inspect!==t.inspect&&!(Y.constructor&&Y.constructor.prototype===Y)){var re=Y.inspect(X,A);return O(re)||(re=f(A,re,X)),re}var ee=g(A,Y);if(ee)return ee;var k=Object.keys(Y),E=u(k);if(A.showHidden&&(k=Object.getOwnPropertyNames(Y)),ae(Y)&&(k.indexOf("message")>=0||k.indexOf("description")>=0))return y(Y);if(k.length===0){if(P(Y)){var Z=Y.name?": "+Y.name:"";return A.stylize("[Function"+Z+"]","special")}if(K(Y))return A.stylize(RegExp.prototype.toString.call(Y),"regexp");if(se(Y))return A.stylize(Date.prototype.toString.call(Y),"date");if(ae(Y))return y(Y)}var M="",R=!1,L=["{","}"];if(S(Y)&&(R=!0,L=["[","]"]),P(Y)){var ne=Y.name?": "+Y.name:"";M=" [Function"+ne+"]"}if(K(Y)&&(M=" "+RegExp.prototype.toString.call(Y)),se(Y)&&(M=" "+Date.prototype.toUTCString.call(Y)),ae(Y)&&(M=" "+y(Y)),k.length===0&&(!R||Y.length==0))return L[0]+M+L[1];if(X<0)return K(Y)?A.stylize(RegExp.prototype.toString.call(Y),"regexp"):A.stylize("[Object]","special");A.seen.push(Y);var N;return R?N=h(A,Y,X,E,k):N=k.map(function(ie){return v(A,Y,X,E,ie,R)}),A.seen.pop(),b(N,M,L)}function g(A,Y){if(z(Y))return A.stylize("undefined","undefined");if(O(Y)){var X="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return A.stylize(X,"string")}if(T(Y))return A.stylize(""+Y,"number");if(p(Y))return A.stylize(""+Y,"boolean");if(x(Y))return A.stylize("null","null")}function y(A){return"["+Error.prototype.toString.call(A)+"]"}function h(A,Y,X,re,ee){for(var k=[],E=0,Z=Y.length;E<Z;++E)V(Y,String(E))?k.push(v(A,Y,X,re,String(E),!0)):k.push("");return ee.forEach(function(M){M.match(/^\d+$/)||k.push(v(A,Y,X,re,M,!0))}),k}function v(A,Y,X,re,ee,k){var E,Z,M;if(M=Object.getOwnPropertyDescriptor(Y,ee)||{value:Y[ee]},M.get?M.set?Z=A.stylize("[Getter/Setter]","special"):Z=A.stylize("[Getter]","special"):M.set&&(Z=A.stylize("[Setter]","special")),V(re,ee)||(E="["+ee+"]"),Z||(A.seen.indexOf(M.value)<0?(x(X)?Z=f(A,M.value,null):Z=f(A,M.value,X-1),Z.indexOf(`
`)>-1&&(k?Z=Z.split(`
`).map(function(R){return"  "+R}).join(`
`).slice(2):Z=`
`+Z.split(`
`).map(function(R){return"   "+R}).join(`
`))):Z=A.stylize("[Circular]","special")),z(E)){if(k&&ee.match(/^\d+$/))return Z;E=JSON.stringify(""+ee),E.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(E=E.slice(1,-1),E=A.stylize(E,"name")):(E=E.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),E=A.stylize(E,"string"))}return E+": "+Z}function b(A,Y,X){var re=A.reduce(function(ee,k){return k.indexOf(`
`)>=0,ee+k.replace(/\u001b\[\d\d?m/g,"").length+1},0);return re>60?X[0]+(Y===""?"":Y+`
 `)+" "+A.join(`,
  `)+" "+X[1]:X[0]+Y+" "+A.join(", ")+" "+X[1]}t.types=x1();function S(A){return Array.isArray(A)}t.isArray=S;function p(A){return typeof A=="boolean"}t.isBoolean=p;function x(A){return A===null}t.isNull=x;function w(A){return A==null}t.isNullOrUndefined=w;function T(A){return typeof A=="number"}t.isNumber=T;function O(A){return typeof A=="string"}t.isString=O;function G(A){return typeof A=="symbol"}t.isSymbol=G;function z(A){return A===void 0}t.isUndefined=z;function K(A){return I(A)&&C(A)==="[object RegExp]"}t.isRegExp=K,t.types.isRegExp=K;function I(A){return typeof A=="object"&&A!==null}t.isObject=I;function se(A){return I(A)&&C(A)==="[object Date]"}t.isDate=se,t.types.isDate=se;function ae(A){return I(A)&&(C(A)==="[object Error]"||A instanceof Error)}t.isError=ae,t.types.isNativeError=ae;function P(A){return typeof A=="function"}t.isFunction=P;function H(A){return A===null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||typeof A=="symbol"||typeof A>"u"}t.isPrimitive=H,t.isBuffer=y1();function C(A){return Object.prototype.toString.call(A)}function B(A){return A<10?"0"+A.toString(10):A.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function F(){var A=new Date,Y=[B(A.getHours()),B(A.getMinutes()),B(A.getSeconds())].join(":");return[A.getDate(),q[A.getMonth()],Y].join(" ")}t.log=function(){console.log("%s - %s",F(),t.format.apply(t,arguments))},t.inherits=Ws,t._extend=function(A,Y){if(!Y||!I(Y))return A;for(var X=Object.keys(Y),re=X.length;re--;)A[X[re]]=Y[X[re]];return A};function V(A,Y){return Object.prototype.hasOwnProperty.call(A,Y)}var D=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(Y){if(typeof Y!="function")throw new TypeError('The "original" argument must be of type Function');if(D&&Y[D]){var X=Y[D];if(typeof X!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(X,D,{value:X,enumerable:!1,writable:!1,configurable:!0}),X}function X(){for(var re,ee,k=new Promise(function(M,R){re=M,ee=R}),E=[],Z=0;Z<arguments.length;Z++)E.push(arguments[Z]);E.push(function(M,R){M?ee(M):re(R)});try{Y.apply(this,E)}catch(M){ee(M)}return k}return Object.setPrototypeOf(X,Object.getPrototypeOf(Y)),D&&Object.defineProperty(X,D,{value:X,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(X,e(Y))},t.promisify.custom=D;function J(A,Y){if(!A){var X=new Error("Promise was rejected with a falsy value");X.reason=A,A=X}return Y(A)}function U(A){if(typeof A!="function")throw new TypeError('The "original" argument must be of type Function');function Y(){for(var X=[],re=0;re<arguments.length;re++)X.push(arguments[re]);var ee=X.pop();if(typeof ee!="function")throw new TypeError("The last argument must be of type Function");var k=this,E=function(){return ee.apply(k,arguments)};A.apply(this,X).then(function(Z){Se.nextTick(E.bind(null,null,Z))},function(Z){Se.nextTick(J.bind(null,Z,E))})}return Object.setPrototypeOf(Y,Object.getPrototypeOf(A)),Object.defineProperties(Y,e(A)),Y}t.callbackify=U}(Ol)),Ol}var nc,th;function w1(){if(th)return nc;th=1;function t(y,h){var v=Object.keys(y);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(y);h&&(b=b.filter(function(S){return Object.getOwnPropertyDescriptor(y,S).enumerable})),v.push.apply(v,b)}return v}function e(y){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?t(Object(v),!0).forEach(function(b){r(y,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):t(Object(v)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(v,b))})}return y}function r(y,h,v){return h in y?Object.defineProperty(y,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[h]=v,y}function n(y,h){if(!(y instanceof h))throw new TypeError("Cannot call a class as a function")}function a(y,h){for(var v=0;v<h.length;v++){var b=h[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function i(y,h,v){return h&&a(y.prototype,h),y}var o=Ho(),l=o.Buffer,c=Dg(),u=c.inspect,f=u&&u.custom||"inspect";function g(y,h,v){l.prototype.copy.call(y,h,v)}return nc=function(){function y(){n(this,y),this.head=null,this.tail=null,this.length=0}return i(y,[{key:"push",value:function(v){var b={data:v,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(v){var b={data:v,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var b=this.head,S=""+b.data;b=b.next;)S+=v+b.data;return S}},{key:"concat",value:function(v){if(this.length===0)return l.alloc(0);for(var b=l.allocUnsafe(v>>>0),S=this.head,p=0;S;)g(S.data,b,p),p+=S.data.length,S=S.next;return b}},{key:"consume",value:function(v,b){var S;return v<this.head.data.length?(S=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?S=this.shift():S=b?this._getString(v):this._getBuffer(v),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var b=this.head,S=1,p=b.data;for(v-=p.length;b=b.next;){var x=b.data,w=v>x.length?x.length:v;if(w===x.length?p+=x:p+=x.slice(0,v),v-=w,v===0){w===x.length?(++S,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=x.slice(w));break}++S}return this.length-=S,p}},{key:"_getBuffer",value:function(v){var b=l.allocUnsafe(v),S=this.head,p=1;for(S.data.copy(b),v-=S.data.length;S=S.next;){var x=S.data,w=v>x.length?x.length:v;if(x.copy(b,b.length-v,0,w),v-=w,v===0){w===x.length?(++p,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=x.slice(w));break}++p}return this.length-=p,b}},{key:f,value:function(v,b){return u(this,e({},b,{depth:0,customInspect:!1}))}}]),y}(),nc}var ac,rh;function Fg(){if(rh)return ac;rh=1;function t(o,l){var c=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(l?l(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Se.nextTick(a,this,o)):Se.nextTick(a,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(g){!l&&g?c._writableState?c._writableState.errorEmitted?Se.nextTick(r,c):(c._writableState.errorEmitted=!0,Se.nextTick(e,c,g)):Se.nextTick(e,c,g):l?(Se.nextTick(r,c),l(g)):Se.nextTick(r,c)}),this)}function e(o,l){a(o,l),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(o,l){o.emit("error",l)}function i(o,l){var c=o._readableState,u=o._writableState;c&&c.autoDestroy||u&&u.autoDestroy?o.destroy(l):o.emit("error",l)}return ac={destroy:t,undestroy:n,errorOrDestroy:i},ac}var ic={},sh;function Wn(){if(sh)return ic;sh=1;function t(l,c){l.prototype=Object.create(c.prototype),l.prototype.constructor=l,l.__proto__=c}var e={};function r(l,c,u){u||(u=Error);function f(y,h,v){return typeof c=="string"?c:c(y,h,v)}var g=function(y){t(h,y);function h(v,b,S){return y.call(this,f(v,b,S))||this}return h}(u);g.prototype.name=u.name,g.prototype.code=l,e[l]=g}function n(l,c){if(Array.isArray(l)){var u=l.length;return l=l.map(function(f){return String(f)}),u>2?"one of ".concat(c," ").concat(l.slice(0,u-1).join(", "),", or ")+l[u-1]:u===2?"one of ".concat(c," ").concat(l[0]," or ").concat(l[1]):"of ".concat(c," ").concat(l[0])}else return"of ".concat(c," ").concat(String(l))}function a(l,c,u){return l.substr(0,c.length)===c}function i(l,c,u){return(u===void 0||u>l.length)&&(u=l.length),l.substring(u-c.length,u)===c}function o(l,c,u){return typeof u!="number"&&(u=0),u+c.length>l.length?!1:l.indexOf(c,u)!==-1}return r("ERR_INVALID_OPT_VALUE",function(l,c){return'The value "'+c+'" is invalid for option "'+l+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(l,c,u){var f;typeof c=="string"&&a(c,"not ")?(f="must not be",c=c.replace(/^not /,"")):f="must be";var g;if(i(l," argument"))g="The ".concat(l," ").concat(f," ").concat(n(c,"type"));else{var y=o(l,".")?"property":"argument";g='The "'.concat(l,'" ').concat(y," ").concat(f," ").concat(n(c,"type"))}return g+=". Received type ".concat(typeof u),g},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ic.codes=e,ic}var oc,nh;function Lg(){if(nh)return oc;nh=1;var t=Wn().codes.ERR_INVALID_OPT_VALUE;function e(n,a,i){return n.highWaterMark!=null?n.highWaterMark:a?n[i]:null}function r(n,a,i,o){var l=e(a,o,i);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var c=o?i:"highWaterMark";throw new t(c,l)}return Math.floor(l)}return n.objectMode?16:16*1024}return oc={getHighWaterMark:r},oc}var lc,ah;function v1(){if(ah)return lc;ah=1,lc=t;function t(r,n){if(e("noDeprecation"))return r;var a=!1;function i(){if(!a){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),a=!0}return r.apply(this,arguments)}return i}function e(r){try{if(!gr.localStorage)return!1}catch{return!1}var n=gr.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return lc}var cc,ih;function Mg(){if(ih)return cc;ih=1,cc=K;function t(ee){var k=this;this.next=null,this.entry=null,this.finish=function(){re(k,ee)}}var e;K.WritableState=G;var r={deprecate:v1()},n=Ag(),a=Ho().Buffer,i=gr.Uint8Array||function(){};function o(ee){return a.from(ee)}function l(ee){return a.isBuffer(ee)||ee instanceof i}var c=Fg(),u=Lg(),f=u.getHighWaterMark,g=Wn().codes,y=g.ERR_INVALID_ARG_TYPE,h=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_MULTIPLE_CALLBACK,b=g.ERR_STREAM_CANNOT_PIPE,S=g.ERR_STREAM_DESTROYED,p=g.ERR_STREAM_NULL_VALUES,x=g.ERR_STREAM_WRITE_AFTER_END,w=g.ERR_UNKNOWN_ENCODING,T=c.errorOrDestroy;Ws(K,n);function O(){}function G(ee,k,E){e=e||On(),ee=ee||{},typeof E!="boolean"&&(E=k instanceof e),this.objectMode=!!ee.objectMode,E&&(this.objectMode=this.objectMode||!!ee.writableObjectMode),this.highWaterMark=f(this,ee,"writableHighWaterMark",E),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Z=ee.decodeStrings===!1;this.decodeStrings=!Z,this.defaultEncoding=ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(M){q(k,M)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}G.prototype.getBuffer=function(){for(var k=this.bufferedRequest,E=[];k;)E.push(k),k=k.next;return E},function(){try{Object.defineProperty(G.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(k){return z.call(this,k)?!0:this!==K?!1:k&&k._writableState instanceof G}})):z=function(k){return k instanceof this};function K(ee){e=e||On();var k=this instanceof e;if(!k&&!z.call(K,this))return new K(ee);this._writableState=new G(ee,this,k),this.writable=!0,ee&&(typeof ee.write=="function"&&(this._write=ee.write),typeof ee.writev=="function"&&(this._writev=ee.writev),typeof ee.destroy=="function"&&(this._destroy=ee.destroy),typeof ee.final=="function"&&(this._final=ee.final)),n.call(this)}K.prototype.pipe=function(){T(this,new b)};function I(ee,k){var E=new x;T(ee,E),Se.nextTick(k,E)}function se(ee,k,E,Z){var M;return E===null?M=new p:typeof E!="string"&&!k.objectMode&&(M=new y("chunk",["string","Buffer"],E)),M?(T(ee,M),Se.nextTick(Z,M),!1):!0}K.prototype.write=function(ee,k,E){var Z=this._writableState,M=!1,R=!Z.objectMode&&l(ee);return R&&!a.isBuffer(ee)&&(ee=o(ee)),typeof k=="function"&&(E=k,k=null),R?k="buffer":k||(k=Z.defaultEncoding),typeof E!="function"&&(E=O),Z.ending?I(this,E):(R||se(this,Z,ee,E))&&(Z.pendingcb++,M=P(this,Z,R,ee,k,E)),M},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var ee=this._writableState;ee.corked&&(ee.corked--,!ee.writing&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&D(this,ee))},K.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=k.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((k+"").toLowerCase())>-1))throw new w(k);return this._writableState.defaultEncoding=k,this},Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ae(ee,k,E){return!ee.objectMode&&ee.decodeStrings!==!1&&typeof k=="string"&&(k=a.from(k,E)),k}Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function P(ee,k,E,Z,M,R){if(!E){var L=ae(k,Z,M);Z!==L&&(E=!0,M="buffer",Z=L)}var ne=k.objectMode?1:Z.length;k.length+=ne;var N=k.length<k.highWaterMark;if(N||(k.needDrain=!0),k.writing||k.corked){var ie=k.lastBufferedRequest;k.lastBufferedRequest={chunk:Z,encoding:M,isBuf:E,callback:R,next:null},ie?ie.next=k.lastBufferedRequest:k.bufferedRequest=k.lastBufferedRequest,k.bufferedRequestCount+=1}else H(ee,k,!1,ne,Z,M,R);return N}function H(ee,k,E,Z,M,R,L){k.writelen=Z,k.writecb=L,k.writing=!0,k.sync=!0,k.destroyed?k.onwrite(new S("write")):E?ee._writev(M,k.onwrite):ee._write(M,R,k.onwrite),k.sync=!1}function C(ee,k,E,Z,M){--k.pendingcb,E?(Se.nextTick(M,Z),Se.nextTick(Y,ee,k),ee._writableState.errorEmitted=!0,T(ee,Z)):(M(Z),ee._writableState.errorEmitted=!0,T(ee,Z),Y(ee,k))}function B(ee){ee.writing=!1,ee.writecb=null,ee.length-=ee.writelen,ee.writelen=0}function q(ee,k){var E=ee._writableState,Z=E.sync,M=E.writecb;if(typeof M!="function")throw new v;if(B(E),k)C(ee,E,Z,k,M);else{var R=J(E)||ee.destroyed;!R&&!E.corked&&!E.bufferProcessing&&E.bufferedRequest&&D(ee,E),Z?Se.nextTick(F,ee,E,R,M):F(ee,E,R,M)}}function F(ee,k,E,Z){E||V(ee,k),k.pendingcb--,Z(),Y(ee,k)}function V(ee,k){k.length===0&&k.needDrain&&(k.needDrain=!1,ee.emit("drain"))}function D(ee,k){k.bufferProcessing=!0;var E=k.bufferedRequest;if(ee._writev&&E&&E.next){var Z=k.bufferedRequestCount,M=new Array(Z),R=k.corkedRequestsFree;R.entry=E;for(var L=0,ne=!0;E;)M[L]=E,E.isBuf||(ne=!1),E=E.next,L+=1;M.allBuffers=ne,H(ee,k,!0,k.length,M,"",R.finish),k.pendingcb++,k.lastBufferedRequest=null,R.next?(k.corkedRequestsFree=R.next,R.next=null):k.corkedRequestsFree=new t(k),k.bufferedRequestCount=0}else{for(;E;){var N=E.chunk,ie=E.encoding,_=E.callback,d=k.objectMode?1:N.length;if(H(ee,k,!1,d,N,ie,_),E=E.next,k.bufferedRequestCount--,k.writing)break}E===null&&(k.lastBufferedRequest=null)}k.bufferedRequest=E,k.bufferProcessing=!1}K.prototype._write=function(ee,k,E){E(new h("_write()"))},K.prototype._writev=null,K.prototype.end=function(ee,k,E){var Z=this._writableState;return typeof ee=="function"?(E=ee,ee=null,k=null):typeof k=="function"&&(E=k,k=null),ee!=null&&this.write(ee,k),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||X(this,Z,E),this},Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J(ee){return ee.ending&&ee.length===0&&ee.bufferedRequest===null&&!ee.finished&&!ee.writing}function U(ee,k){ee._final(function(E){k.pendingcb--,E&&T(ee,E),k.prefinished=!0,ee.emit("prefinish"),Y(ee,k)})}function A(ee,k){!k.prefinished&&!k.finalCalled&&(typeof ee._final=="function"&&!k.destroyed?(k.pendingcb++,k.finalCalled=!0,Se.nextTick(U,ee,k)):(k.prefinished=!0,ee.emit("prefinish")))}function Y(ee,k){var E=J(k);if(E&&(A(ee,k),k.pendingcb===0&&(k.finished=!0,ee.emit("finish"),k.autoDestroy))){var Z=ee._readableState;(!Z||Z.autoDestroy&&Z.endEmitted)&&ee.destroy()}return E}function X(ee,k,E){k.ending=!0,Y(ee,k),E&&(k.finished?Se.nextTick(E):ee.once("finish",E)),k.ended=!0,ee.writable=!1}function re(ee,k,E){var Z=ee.entry;for(ee.entry=null;Z;){var M=Z.callback;k.pendingcb--,M(E),Z=Z.next}k.corkedRequestsFree.next=ee}return Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(k){this._writableState&&(this._writableState.destroyed=k)}}),K.prototype.destroy=c.destroy,K.prototype._undestroy=c.undestroy,K.prototype._destroy=function(ee,k){k(ee)},cc}var uc,oh;function On(){if(oh)return uc;oh=1;var t=Object.keys||function(u){var f=[];for(var g in u)f.push(g);return f};uc=o;var e=Bg(),r=Mg();Ws(o,e);for(var n=t(r.prototype),a=0;a<n.length;a++){var i=n[a];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(u){if(!(this instanceof o))return new o(u);e.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||Se.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),uc}var dc={},xi={exports:{}},lh;function b1(){return lh||(lh=1,function(t,e){var r=Ho(),n=r.Buffer;function a(o,l){for(var c in o)l[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=i);function i(o,l,c){return n(o,l,c)}a(n,i),i.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,l,c)},i.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return l!==void 0?typeof c=="string"?u.fill(l,c):u.fill(l):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(xi,xi.exports)),xi.exports}var ch;function _u(){if(ch)return dc;ch=1;var t=b1().Buffer,e=t.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(p){if(!p)return"utf8";for(var x;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(x)return;p=(""+p).toLowerCase(),x=!0}}function n(p){var x=r(p);if(typeof x!="string"&&(t.isEncoding===e||!e(p)))throw new Error("Unknown encoding: "+p);return x||p}dc.StringDecoder=a;function a(p){this.encoding=n(p);var x;switch(this.encoding){case"utf16le":this.text=g,this.end=y,x=4;break;case"utf8":this.fillLast=c,x=4;break;case"base64":this.text=h,this.end=v,x=3;break;default:this.write=b,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(x)}a.prototype.write=function(p){if(p.length===0)return"";var x,w;if(this.lastNeed){if(x=this.fillLast(p),x===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<p.length?x?x+this.text(p,w):this.text(p,w):x||""},a.prototype.end=f,a.prototype.text=u,a.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function i(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function o(p,x,w){var T=x.length-1;if(T<w)return 0;var O=i(x[T]);return O>=0?(O>0&&(p.lastNeed=O-1),O):--T<w||O===-2?0:(O=i(x[T]),O>=0?(O>0&&(p.lastNeed=O-2),O):--T<w||O===-2?0:(O=i(x[T]),O>=0?(O>0&&(O===2?O=0:p.lastNeed=O-3),O):0))}function l(p,x,w){if((x[0]&192)!==128)return p.lastNeed=0,"";if(p.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return p.lastNeed=1,"";if(p.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return p.lastNeed=2,""}}function c(p){var x=this.lastTotal-this.lastNeed,w=l(this,p);if(w!==void 0)return w;if(this.lastNeed<=p.length)return p.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,x,0,p.length),this.lastNeed-=p.length}function u(p,x){var w=o(this,p,x);if(!this.lastNeed)return p.toString("utf8",x);this.lastTotal=w;var T=p.length-(w-this.lastNeed);return p.copy(this.lastChar,0,T),p.toString("utf8",x,T)}function f(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+"":x}function g(p,x){if((p.length-x)%2===0){var w=p.toString("utf16le",x);if(w){var T=w.charCodeAt(w.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",x,p.length-1)}function y(p){var x=p&&p.length?this.write(p):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,w)}return x}function h(p,x){var w=(p.length-x)%3;return w===0?p.toString("base64",x):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",x,p.length-w))}function v(p){var x=p&&p.length?this.write(p):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function b(p){return p.toString(this.encoding)}function S(p){return p&&p.length?this.write(p):""}return dc}var fc,uh;function Bd(){if(uh)return fc;uh=1;var t=Wn().codes.ERR_STREAM_PREMATURE_CLOSE;function e(i){var o=!1;return function(){if(!o){o=!0;for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];i.apply(this,c)}}}function r(){}function n(i){return i.setHeader&&typeof i.abort=="function"}function a(i,o,l){if(typeof o=="function")return a(i,null,o);o||(o={}),l=e(l||r);var c=o.readable||o.readable!==!1&&i.readable,u=o.writable||o.writable!==!1&&i.writable,f=function(){i.writable||y()},g=i._writableState&&i._writableState.finished,y=function(){u=!1,g=!0,c||l.call(i)},h=i._readableState&&i._readableState.endEmitted,v=function(){c=!1,h=!0,u||l.call(i)},b=function(w){l.call(i,w)},S=function(){var w;if(c&&!h)return(!i._readableState||!i._readableState.ended)&&(w=new t),l.call(i,w);if(u&&!g)return(!i._writableState||!i._writableState.ended)&&(w=new t),l.call(i,w)},p=function(){i.req.on("finish",y)};return n(i)?(i.on("complete",y),i.on("abort",S),i.req?p():i.on("request",p)):u&&!i._writableState&&(i.on("end",f),i.on("close",f)),i.on("end",v),i.on("finish",y),o.error!==!1&&i.on("error",b),i.on("close",S),function(){i.removeListener("complete",y),i.removeListener("abort",S),i.removeListener("request",p),i.req&&i.req.removeListener("finish",y),i.removeListener("end",f),i.removeListener("close",f),i.removeListener("finish",y),i.removeListener("end",v),i.removeListener("error",b),i.removeListener("close",S)}}return fc=a,fc}var mc,dh;function N1(){if(dh)return mc;dh=1;var t;function e(p,x,w){return x in p?Object.defineProperty(p,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[x]=w,p}var r=Bd(),n=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),o=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function f(p,x){return{value:p,done:x}}function g(p){var x=p[n];if(x!==null){var w=p[u].read();w!==null&&(p[l]=null,p[n]=null,p[a]=null,x(f(w,!1)))}}function y(p){Se.nextTick(g,p)}function h(p,x){return function(w,T){p.then(function(){if(x[o]){w(f(void 0,!0));return}x[c](w,T)},T)}}var v=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((t={get stream(){return this[u]},next:function(){var x=this,w=this[i];if(w!==null)return Promise.reject(w);if(this[o])return Promise.resolve(f(void 0,!0));if(this[u].destroyed)return new Promise(function(z,K){Se.nextTick(function(){x[i]?K(x[i]):z(f(void 0,!0))})});var T=this[l],O;if(T)O=new Promise(h(T,this));else{var G=this[u].read();if(G!==null)return Promise.resolve(f(G,!1));O=new Promise(this[c])}return this[l]=O,O}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var x=this;return new Promise(function(w,T){x[u].destroy(null,function(O){if(O){T(O);return}w(f(void 0,!0))})})}),t),v),S=function(x){var w,T=Object.create(b,(w={},e(w,u,{value:x,writable:!0}),e(w,n,{value:null,writable:!0}),e(w,a,{value:null,writable:!0}),e(w,i,{value:null,writable:!0}),e(w,o,{value:x._readableState.endEmitted,writable:!0}),e(w,c,{value:function(G,z){var K=T[u].read();K?(T[l]=null,T[n]=null,T[a]=null,G(f(K,!1))):(T[n]=G,T[a]=z)},writable:!0}),w));return T[l]=null,r(x,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var G=T[a];G!==null&&(T[l]=null,T[n]=null,T[a]=null,G(O)),T[i]=O;return}var z=T[n];z!==null&&(T[l]=null,T[n]=null,T[a]=null,z(f(void 0,!0))),T[o]=!0}),x.on("readable",y.bind(null,T)),T};return mc=S,mc}var hc,fh;function j1(){return fh||(fh=1,hc=function(){throw new Error("Readable.from is not available in the browser")}),hc}var pc,mh;function Bg(){if(mh)return pc;mh=1,pc=I;var t;I.ReadableState=K,Dd.EventEmitter;var e=function(L,ne){return L.listeners(ne).length},r=Ag(),n=Ho().Buffer,a=gr.Uint8Array||function(){};function i(R){return n.from(R)}function o(R){return n.isBuffer(R)||R instanceof a}var l=Dg(),c;l&&l.debuglog?c=l.debuglog("stream"):c=function(){};var u=w1(),f=Fg(),g=Lg(),y=g.getHighWaterMark,h=Wn().codes,v=h.ERR_INVALID_ARG_TYPE,b=h.ERR_STREAM_PUSH_AFTER_EOF,S=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x,w,T;Ws(I,r);var O=f.errorOrDestroy,G=["error","close","destroy","pause","resume"];function z(R,L,ne){if(typeof R.prependListener=="function")return R.prependListener(L,ne);!R._events||!R._events[L]?R.on(L,ne):Array.isArray(R._events[L])?R._events[L].unshift(ne):R._events[L]=[ne,R._events[L]]}function K(R,L,ne){t=t||On(),R=R||{},typeof ne!="boolean"&&(ne=L instanceof t),this.objectMode=!!R.objectMode,ne&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=y(this,R,"readableHighWaterMark",ne),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(x||(x=_u().StringDecoder),this.decoder=new x(R.encoding),this.encoding=R.encoding)}function I(R){if(t=t||On(),!(this instanceof I))return new I(R);var L=this instanceof t;this._readableState=new K(R,this,L),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),I.prototype.destroy=f.destroy,I.prototype._undestroy=f.undestroy,I.prototype._destroy=function(R,L){L(R)},I.prototype.push=function(R,L){var ne=this._readableState,N;return ne.objectMode?N=!0:typeof R=="string"&&(L=L||ne.defaultEncoding,L!==ne.encoding&&(R=n.from(R,L),L=""),N=!0),se(this,R,L,!1,N)},I.prototype.unshift=function(R){return se(this,R,null,!0,!1)};function se(R,L,ne,N,ie){c("readableAddChunk",L);var _=R._readableState;if(L===null)_.reading=!1,q(R,_);else{var d;if(ie||(d=P(_,L)),d)O(R,d);else if(_.objectMode||L&&L.length>0)if(typeof L!="string"&&!_.objectMode&&Object.getPrototypeOf(L)!==n.prototype&&(L=i(L)),N)_.endEmitted?O(R,new p):ae(R,_,L,!0);else if(_.ended)O(R,new b);else{if(_.destroyed)return!1;_.reading=!1,_.decoder&&!ne?(L=_.decoder.write(L),_.objectMode||L.length!==0?ae(R,_,L,!1):D(R,_)):ae(R,_,L,!1)}else N||(_.reading=!1,D(R,_))}return!_.ended&&(_.length<_.highWaterMark||_.length===0)}function ae(R,L,ne,N){L.flowing&&L.length===0&&!L.sync?(L.awaitDrain=0,R.emit("data",ne)):(L.length+=L.objectMode?1:ne.length,N?L.buffer.unshift(ne):L.buffer.push(ne),L.needReadable&&F(R)),D(R,L)}function P(R,L){var ne;return!o(L)&&typeof L!="string"&&L!==void 0&&!R.objectMode&&(ne=new v("chunk",["string","Buffer","Uint8Array"],L)),ne}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(R){x||(x=_u().StringDecoder);var L=new x(R);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,N="";ne!==null;)N+=L.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),N!==""&&this._readableState.buffer.push(N),this._readableState.length=N.length,this};var H=1073741824;function C(R){return R>=H?R=H:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function B(R,L){return R<=0||L.length===0&&L.ended?0:L.objectMode?1:R!==R?L.flowing&&L.length?L.buffer.head.data.length:L.length:(R>L.highWaterMark&&(L.highWaterMark=C(R)),R<=L.length?R:L.ended?L.length:(L.needReadable=!0,0))}I.prototype.read=function(R){c("read",R),R=parseInt(R,10);var L=this._readableState,ne=R;if(R!==0&&(L.emittedReadable=!1),R===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return c("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?E(this):F(this),null;if(R=B(R,L),R===0&&L.ended)return L.length===0&&E(this),null;var N=L.needReadable;c("need readable",N),(L.length===0||L.length-R<L.highWaterMark)&&(N=!0,c("length less than watermark",N)),L.ended||L.reading?(N=!1,c("reading or ended",N)):N&&(c("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(R=B(ne,L)));var ie;return R>0?ie=k(R,L):ie=null,ie===null?(L.needReadable=L.length<=L.highWaterMark,R=0):(L.length-=R,L.awaitDrain=0),L.length===0&&(L.ended||(L.needReadable=!0),ne!==R&&L.ended&&E(this)),ie!==null&&this.emit("data",ie),ie};function q(R,L){if(c("onEofChunk"),!L.ended){if(L.decoder){var ne=L.decoder.end();ne&&ne.length&&(L.buffer.push(ne),L.length+=L.objectMode?1:ne.length)}L.ended=!0,L.sync?F(R):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,V(R)))}}function F(R){var L=R._readableState;c("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(c("emitReadable",L.flowing),L.emittedReadable=!0,Se.nextTick(V,R))}function V(R){var L=R._readableState;c("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&(L.length||L.ended)&&(R.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,ee(R)}function D(R,L){L.readingMore||(L.readingMore=!0,Se.nextTick(J,R,L))}function J(R,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){var ne=L.length;if(c("maybeReadMore read 0"),R.read(0),ne===L.length)break}L.readingMore=!1}I.prototype._read=function(R){O(this,new S("_read()"))},I.prototype.pipe=function(R,L){var ne=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=R;break;case 1:N.pipes=[N.pipes,R];break;default:N.pipes.push(R);break}N.pipesCount+=1,c("pipe count=%d opts=%j",N.pipesCount,L);var ie=(!L||L.end!==!1)&&R!==Se.stdout&&R!==Se.stderr,_=ie?m:pe;N.endEmitted?Se.nextTick(_):ne.once("end",_),R.on("unpipe",d);function d(ve,be){c("onunpipe"),ve===ne&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,te())}function m(){c("onend"),R.end()}var j=U(ne);R.on("drain",j);var $=!1;function te(){c("cleanup"),R.removeListener("close",fe),R.removeListener("finish",de),R.removeListener("drain",j),R.removeListener("error",ce),R.removeListener("unpipe",d),ne.removeListener("end",m),ne.removeListener("end",pe),ne.removeListener("data",W),$=!0,N.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&j()}ne.on("data",W);function W(ve){c("ondata");var be=R.write(ve);c("dest.write",be),be===!1&&((N.pipesCount===1&&N.pipes===R||N.pipesCount>1&&M(N.pipes,R)!==-1)&&!$&&(c("false write response, pause",N.awaitDrain),N.awaitDrain++),ne.pause())}function ce(ve){c("onerror",ve),pe(),R.removeListener("error",ce),e(R,"error")===0&&O(R,ve)}z(R,"error",ce);function fe(){R.removeListener("finish",de),pe()}R.once("close",fe);function de(){c("onfinish"),R.removeListener("close",fe),pe()}R.once("finish",de);function pe(){c("unpipe"),ne.unpipe(R)}return R.emit("pipe",ne),N.flowing||(c("pipe resume"),ne.resume()),R};function U(R){return function(){var ne=R._readableState;c("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&e(R,"data")&&(ne.flowing=!0,ee(R))}}I.prototype.unpipe=function(R){var L=this._readableState,ne={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return R&&R!==L.pipes?this:(R||(R=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,R&&R.emit("unpipe",this,ne),this);if(!R){var N=L.pipes,ie=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var _=0;_<ie;_++)N[_].emit("unpipe",this,{hasUnpiped:!1});return this}var d=M(L.pipes,R);return d===-1?this:(L.pipes.splice(d,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),R.emit("unpipe",this,ne),this)},I.prototype.on=function(R,L){var ne=r.prototype.on.call(this,R,L),N=this._readableState;return R==="data"?(N.readableListening=this.listenerCount("readable")>0,N.flowing!==!1&&this.resume()):R==="readable"&&!N.endEmitted&&!N.readableListening&&(N.readableListening=N.needReadable=!0,N.flowing=!1,N.emittedReadable=!1,c("on readable",N.length,N.reading),N.length?F(this):N.reading||Se.nextTick(Y,this)),ne},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(R,L){var ne=r.prototype.removeListener.call(this,R,L);return R==="readable"&&Se.nextTick(A,this),ne},I.prototype.removeAllListeners=function(R){var L=r.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&Se.nextTick(A,this),L};function A(R){var L=R._readableState;L.readableListening=R.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:R.listenerCount("data")>0&&R.resume()}function Y(R){c("readable nexttick read 0"),R.read(0)}I.prototype.resume=function(){var R=this._readableState;return R.flowing||(c("resume"),R.flowing=!R.readableListening,X(this,R)),R.paused=!1,this};function X(R,L){L.resumeScheduled||(L.resumeScheduled=!0,Se.nextTick(re,R,L))}function re(R,L){c("resume",L.reading),L.reading||R.read(0),L.resumeScheduled=!1,R.emit("resume"),ee(R),L.flowing&&!L.reading&&R.read(0)}I.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ee(R){var L=R._readableState;for(c("flow",L.flowing);L.flowing&&R.read()!==null;);}I.prototype.wrap=function(R){var L=this,ne=this._readableState,N=!1;R.on("end",function(){if(c("wrapped end"),ne.decoder&&!ne.ended){var d=ne.decoder.end();d&&d.length&&L.push(d)}L.push(null)}),R.on("data",function(d){if(c("wrapped data"),ne.decoder&&(d=ne.decoder.write(d)),!(ne.objectMode&&d==null)&&!(!ne.objectMode&&(!d||!d.length))){var m=L.push(d);m||(N=!0,R.pause())}});for(var ie in R)this[ie]===void 0&&typeof R[ie]=="function"&&(this[ie]=function(m){return function(){return R[m].apply(R,arguments)}}(ie));for(var _=0;_<G.length;_++)R.on(G[_],this.emit.bind(this,G[_]));return this._read=function(d){c("wrapped _read",d),N&&(N=!1,R.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=N1()),w(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),I._fromList=k,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function k(R,L){if(L.length===0)return null;var ne;return L.objectMode?ne=L.buffer.shift():!R||R>=L.length?(L.decoder?ne=L.buffer.join(""):L.buffer.length===1?ne=L.buffer.first():ne=L.buffer.concat(L.length),L.buffer.clear()):ne=L.buffer.consume(R,L.decoder),ne}function E(R){var L=R._readableState;c("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,Se.nextTick(Z,L,R))}function Z(R,L){if(c("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,L.readable=!1,L.emit("end"),R.autoDestroy)){var ne=L._writableState;(!ne||ne.autoDestroy&&ne.finished)&&L.destroy()}}typeof Symbol=="function"&&(I.from=function(R,L){return T===void 0&&(T=j1()),T(I,R,L)});function M(R,L){for(var ne=0,N=R.length;ne<N;ne++)if(R[ne]===L)return ne;return-1}return pc}var gc,hh;function zg(){if(hh)return gc;hh=1,gc=l;var t=Wn().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=t.ERR_TRANSFORM_WITH_LENGTH_0,i=On();Ws(l,i);function o(f,g){var y=this._transformState;y.transforming=!1;var h=y.writecb;if(h===null)return this.emit("error",new r);y.writechunk=null,y.writecb=null,g!=null&&this.push(g),h(f);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function l(f){if(!(this instanceof l))return new l(f);i.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",c)}function c(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,y){u(f,g,y)}):u(this,null,null)}l.prototype.push=function(f,g){return this._transformState.needTransform=!1,i.prototype.push.call(this,f,g)},l.prototype._transform=function(f,g,y){y(new e("_transform()"))},l.prototype._write=function(f,g,y){var h=this._transformState;if(h.writecb=y,h.writechunk=f,h.writeencoding=g,!h.transforming){var v=this._readableState;(h.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},l.prototype._read=function(f){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},l.prototype._destroy=function(f,g){i.prototype._destroy.call(this,f,function(y){g(y)})};function u(f,g,y){if(g)return f.emit("error",g);if(y!=null&&f.push(y),f._writableState.length)throw new a;if(f._transformState.transforming)throw new n;return f.push(null)}return gc}var xc,ph;function E1(){if(ph)return xc;ph=1,xc=e;var t=zg();Ws(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,n,a){a(null,r)},xc}var yc,gh;function S1(){if(gh)return yc;gh=1;var t;function e(y){var h=!1;return function(){h||(h=!0,y.apply(void 0,arguments))}}var r=Wn().codes,n=r.ERR_MISSING_ARGS,a=r.ERR_STREAM_DESTROYED;function i(y){if(y)throw y}function o(y){return y.setHeader&&typeof y.abort=="function"}function l(y,h,v,b){b=e(b);var S=!1;y.on("close",function(){S=!0}),t===void 0&&(t=Bd()),t(y,{readable:h,writable:v},function(x){if(x)return b(x);S=!0,b()});var p=!1;return function(x){if(!S&&!p){if(p=!0,o(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();b(x||new a("pipe"))}}}function c(y){y()}function u(y,h){return y.pipe(h)}function f(y){return!y.length||typeof y[y.length-1]!="function"?i:y.pop()}function g(){for(var y=arguments.length,h=new Array(y),v=0;v<y;v++)h[v]=arguments[v];var b=f(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new n("streams");var S,p=h.map(function(x,w){var T=w<h.length-1,O=w>0;return l(x,T,O,function(G){S||(S=G),G&&p.forEach(c),!T&&(p.forEach(c),b(S))})});return h.reduce(u)}return yc=g,yc}var zd=Xt,Ud=Dd.EventEmitter,k1=Ws;k1(Xt,Ud);Xt.Readable=Bg();Xt.Writable=Mg();Xt.Duplex=On();Xt.Transform=zg();Xt.PassThrough=E1();Xt.finished=Bd();Xt.pipeline=S1();Xt.Stream=Xt;function Xt(){Ud.call(this)}Xt.prototype.pipe=function(t,e){var r=this;function n(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function a(){r.readable&&r.resume&&r.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",l));var i=!1;function o(){i||(i=!0,t.end())}function l(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function c(f){if(u(),Ud.listenerCount(this,"error")===0)throw f}r.on("error",c),t.on("error",c);function u(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",l),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};(function(t){(function(e){e.parser=function(k,E){return new n(k,E)},e.SAXParser=n,e.SAXStream=f,e.createStream=u,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(k,E){if(!(this instanceof n))return new n(k,E);var Z=this;i(Z),Z.q=Z.c="",Z.bufferCheckPosition=e.MAX_BUFFER_LENGTH,Z.opt=E||{},Z.opt.lowercase=Z.opt.lowercase||Z.opt.lowercasetags,Z.looseCase=Z.opt.lowercase?"toLowerCase":"toUpperCase",Z.tags=[],Z.closed=Z.closedRoot=Z.sawRoot=!1,Z.tag=Z.error=null,Z.strict=!!k,Z.noscript=!!(k||Z.opt.noscript),Z.state=I.BEGIN,Z.strictEntities=Z.opt.strictEntities,Z.ENTITIES=Z.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),Z.attribList=[],Z.opt.xmlns&&(Z.ns=Object.create(b)),Z.trackPosition=Z.opt.position!==!1,Z.trackPosition&&(Z.position=Z.line=Z.column=0),ae(Z,"onready")}Object.create||(Object.create=function(k){function E(){}E.prototype=k;var Z=new E;return Z}),Object.keys||(Object.keys=function(k){var E=[];for(var Z in k)k.hasOwnProperty(Z)&&E.push(Z);return E});function a(k){for(var E=Math.max(e.MAX_BUFFER_LENGTH,10),Z=0,M=0,R=r.length;M<R;M++){var L=k[r[M]].length;if(L>E)switch(r[M]){case"textNode":H(k);break;case"cdata":P(k,"oncdata",k.cdata),k.cdata="";break;case"script":P(k,"onscript",k.script),k.script="";break;default:B(k,"Max buffer length exceeded: "+r[M])}Z=Math.max(Z,L)}var ne=e.MAX_BUFFER_LENGTH-Z;k.bufferCheckPosition=ne+k.position}function i(k){for(var E=0,Z=r.length;E<Z;E++)k[r[E]]=""}function o(k){H(k),k.cdata!==""&&(P(k,"oncdata",k.cdata),k.cdata=""),k.script!==""&&(P(k,"onscript",k.script),k.script="")}n.prototype={end:function(){q(this)},write:ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var l;try{l=zd.Stream}catch{l=function(){}}var c=e.EVENTS.filter(function(k){return k!=="error"&&k!=="end"});function u(k,E){return new f(k,E)}function f(k,E){if(!(this instanceof f))return new f(k,E);l.apply(this),this._parser=new n(k,E),this.writable=!0,this.readable=!0;var Z=this;this._parser.onend=function(){Z.emit("end")},this._parser.onerror=function(M){Z.emit("error",M),Z._parser.error=null},this._decoder=null,c.forEach(function(M){Object.defineProperty(Z,"on"+M,{get:function(){return Z._parser["on"+M]},set:function(R){if(!R)return Z.removeAllListeners(M),Z._parser["on"+M]=R,R;Z.on(M,R)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(l.prototype,{constructor:{value:f}}),f.prototype.write=function(k){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(k)){if(!this._decoder){var E=_u().StringDecoder;this._decoder=new E("utf8")}k=this._decoder.write(k)}return this._parser.write(k.toString()),this.emit("data",k),!0},f.prototype.end=function(k){return k&&k.length&&this.write(k),this._parser.end(),!0},f.prototype.on=function(k,E){var Z=this;return!Z._parser["on"+k]&&c.indexOf(k)!==-1&&(Z._parser["on"+k]=function(){var M=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);M.splice(0,0,k),Z.emit.apply(Z,M)}),l.prototype.on.call(Z,k,E)};var g="[CDATA[",y="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",b={xml:h,xmlns:v},S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(k){return k===" "||k===`
`||k==="\r"||k==="	"}function O(k){return k==='"'||k==="'"}function G(k){return k===">"||T(k)}function z(k,E){return k.test(E)}function K(k,E){return!z(k,E)}var I=0;e.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(k){var E=e.ENTITIES[k],Z=typeof E=="number"?String.fromCharCode(E):E;e.ENTITIES[k]=Z});for(var se in e.STATE)e.STATE[e.STATE[se]]=se;I=e.STATE;function ae(k,E,Z){k[E]&&k[E](Z)}function P(k,E,Z){k.textNode&&H(k),ae(k,E,Z)}function H(k){k.textNode=C(k.opt,k.textNode),k.textNode&&ae(k,"ontext",k.textNode),k.textNode=""}function C(k,E){return k.trim&&(E=E.trim()),k.normalize&&(E=E.replace(/\s+/g," ")),E}function B(k,E){return H(k),k.trackPosition&&(E+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c),E=new Error(E),k.error=E,ae(k,"onerror",E),k}function q(k){return k.sawRoot&&!k.closedRoot&&F(k,"Unclosed root tag"),k.state!==I.BEGIN&&k.state!==I.BEGIN_WHITESPACE&&k.state!==I.TEXT&&B(k,"Unexpected end"),H(k),k.c="",k.closed=!0,ae(k,"onend"),n.call(k,k.strict,k.opt),k}function F(k,E){if(typeof k!="object"||!(k instanceof n))throw new Error("bad call to strictFail");k.strict&&B(k,E)}function V(k){k.strict||(k.tagName=k.tagName[k.looseCase]());var E=k.tags[k.tags.length-1]||k,Z=k.tag={name:k.tagName,attributes:{}};k.opt.xmlns&&(Z.ns=E.ns),k.attribList.length=0,P(k,"onopentagstart",Z)}function D(k,E){var Z=k.indexOf(":"),M=Z<0?["",k]:k.split(":"),R=M[0],L=M[1];return E&&k==="xmlns"&&(R="xmlns",L=""),{prefix:R,local:L}}function J(k){if(k.strict||(k.attribName=k.attribName[k.looseCase]()),k.attribList.indexOf(k.attribName)!==-1||k.tag.attributes.hasOwnProperty(k.attribName)){k.attribName=k.attribValue="";return}if(k.opt.xmlns){var E=D(k.attribName,!0),Z=E.prefix,M=E.local;if(Z==="xmlns")if(M==="xml"&&k.attribValue!==h)F(k,"xml: prefix must be bound to "+h+`
Actual: `+k.attribValue);else if(M==="xmlns"&&k.attribValue!==v)F(k,"xmlns: prefix must be bound to "+v+`
Actual: `+k.attribValue);else{var R=k.tag,L=k.tags[k.tags.length-1]||k;R.ns===L.ns&&(R.ns=Object.create(L.ns)),R.ns[M]=k.attribValue}k.attribList.push([k.attribName,k.attribValue])}else k.tag.attributes[k.attribName]=k.attribValue,P(k,"onattribute",{name:k.attribName,value:k.attribValue});k.attribName=k.attribValue=""}function U(k,E){if(k.opt.xmlns){var Z=k.tag,M=D(k.tagName);Z.prefix=M.prefix,Z.local=M.local,Z.uri=Z.ns[M.prefix]||"",Z.prefix&&!Z.uri&&(F(k,"Unbound namespace prefix: "+JSON.stringify(k.tagName)),Z.uri=M.prefix);var R=k.tags[k.tags.length-1]||k;Z.ns&&R.ns!==Z.ns&&Object.keys(Z.ns).forEach(function(W){P(k,"onopennamespace",{prefix:W,uri:Z.ns[W]})});for(var L=0,ne=k.attribList.length;L<ne;L++){var N=k.attribList[L],ie=N[0],_=N[1],d=D(ie,!0),m=d.prefix,j=d.local,$=m===""?"":Z.ns[m]||"",te={name:ie,value:_,prefix:m,local:j,uri:$};m&&m!=="xmlns"&&!$&&(F(k,"Unbound namespace prefix: "+JSON.stringify(m)),te.uri=m),k.tag.attributes[ie]=te,P(k,"onattribute",te)}k.attribList.length=0}k.tag.isSelfClosing=!!E,k.sawRoot=!0,k.tags.push(k.tag),P(k,"onopentag",k.tag),E||(!k.noscript&&k.tagName.toLowerCase()==="script"?k.state=I.SCRIPT:k.state=I.TEXT,k.tag=null,k.tagName=""),k.attribName=k.attribValue="",k.attribList.length=0}function A(k){if(!k.tagName){F(k,"Weird empty close tag."),k.textNode+="</>",k.state=I.TEXT;return}if(k.script){if(k.tagName!=="script"){k.script+="</"+k.tagName+">",k.tagName="",k.state=I.SCRIPT;return}P(k,"onscript",k.script),k.script=""}var E=k.tags.length,Z=k.tagName;k.strict||(Z=Z[k.looseCase]());for(var M=Z;E--;){var R=k.tags[E];if(R.name!==M)F(k,"Unexpected close tag");else break}if(E<0){F(k,"Unmatched closing tag: "+k.tagName),k.textNode+="</"+k.tagName+">",k.state=I.TEXT;return}k.tagName=Z;for(var L=k.tags.length;L-- >E;){var ne=k.tag=k.tags.pop();k.tagName=k.tag.name,P(k,"onclosetag",k.tagName);var N={};for(var ie in ne.ns)N[ie]=ne.ns[ie];var _=k.tags[k.tags.length-1]||k;k.opt.xmlns&&ne.ns!==_.ns&&Object.keys(ne.ns).forEach(function(d){var m=ne.ns[d];P(k,"onclosenamespace",{prefix:d,uri:m})})}E===0&&(k.closedRoot=!0),k.tagName=k.attribValue=k.attribName="",k.attribList.length=0,k.state=I.TEXT}function Y(k){var E=k.entity,Z=E.toLowerCase(),M,R="";return k.ENTITIES[E]?k.ENTITIES[E]:k.ENTITIES[Z]?k.ENTITIES[Z]:(E=Z,E.charAt(0)==="#"&&(E.charAt(1)==="x"?(E=E.slice(2),M=parseInt(E,16),R=M.toString(16)):(E=E.slice(1),M=parseInt(E,10),R=M.toString(10))),E=E.replace(/^0+/,""),isNaN(M)||R.toLowerCase()!==E?(F(k,"Invalid character entity"),"&"+k.entity+";"):String.fromCodePoint(M))}function X(k,E){E==="<"?(k.state=I.OPEN_WAKA,k.startTagPosition=k.position):T(E)||(F(k,"Non-whitespace before first tag."),k.textNode=E,k.state=I.TEXT)}function re(k,E){var Z="";return E<k.length&&(Z=k.charAt(E)),Z}function ee(k){var E=this;if(this.error)throw this.error;if(E.closed)return B(E,"Cannot write after close. Assign an onready handler.");if(k===null)return q(E);typeof k=="object"&&(k=k.toString());for(var Z=0,M="";M=re(k,Z++),E.c=M,!!M;)switch(E.trackPosition&&(E.position++,M===`
`?(E.line++,E.column=0):E.column++),E.state){case I.BEGIN:if(E.state=I.BEGIN_WHITESPACE,M==="\uFEFF")continue;X(E,M);continue;case I.BEGIN_WHITESPACE:X(E,M);continue;case I.TEXT:if(E.sawRoot&&!E.closedRoot){for(var R=Z-1;M&&M!=="<"&&M!=="&";)M=re(k,Z++),M&&E.trackPosition&&(E.position++,M===`
`?(E.line++,E.column=0):E.column++);E.textNode+=k.substring(R,Z-1)}M==="<"&&!(E.sawRoot&&E.closedRoot&&!E.strict)?(E.state=I.OPEN_WAKA,E.startTagPosition=E.position):(!T(M)&&(!E.sawRoot||E.closedRoot)&&F(E,"Text data outside of root node."),M==="&"?E.state=I.TEXT_ENTITY:E.textNode+=M);continue;case I.SCRIPT:M==="<"?E.state=I.SCRIPT_ENDING:E.script+=M;continue;case I.SCRIPT_ENDING:M==="/"?E.state=I.CLOSE_TAG:(E.script+="<"+M,E.state=I.SCRIPT);continue;case I.OPEN_WAKA:if(M==="!")E.state=I.SGML_DECL,E.sgmlDecl="";else if(!T(M))if(z(S,M))E.state=I.OPEN_TAG,E.tagName=M;else if(M==="/")E.state=I.CLOSE_TAG,E.tagName="";else if(M==="?")E.state=I.PROC_INST,E.procInstName=E.procInstBody="";else{if(F(E,"Unencoded <"),E.startTagPosition+1<E.position){var L=E.position-E.startTagPosition;M=new Array(L).join(" ")+M}E.textNode+="<"+M,E.state=I.TEXT}continue;case I.SGML_DECL:(E.sgmlDecl+M).toUpperCase()===g?(P(E,"onopencdata"),E.state=I.CDATA,E.sgmlDecl="",E.cdata=""):E.sgmlDecl+M==="--"?(E.state=I.COMMENT,E.comment="",E.sgmlDecl=""):(E.sgmlDecl+M).toUpperCase()===y?(E.state=I.DOCTYPE,(E.doctype||E.sawRoot)&&F(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):M===">"?(P(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=I.TEXT):(O(M)&&(E.state=I.SGML_DECL_QUOTED),E.sgmlDecl+=M);continue;case I.SGML_DECL_QUOTED:M===E.q&&(E.state=I.SGML_DECL,E.q=""),E.sgmlDecl+=M;continue;case I.DOCTYPE:M===">"?(E.state=I.TEXT,P(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=M,M==="["?E.state=I.DOCTYPE_DTD:O(M)&&(E.state=I.DOCTYPE_QUOTED,E.q=M));continue;case I.DOCTYPE_QUOTED:E.doctype+=M,M===E.q&&(E.q="",E.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:E.doctype+=M,M==="]"?E.state=I.DOCTYPE:O(M)&&(E.state=I.DOCTYPE_DTD_QUOTED,E.q=M);continue;case I.DOCTYPE_DTD_QUOTED:E.doctype+=M,M===E.q&&(E.state=I.DOCTYPE_DTD,E.q="");continue;case I.COMMENT:M==="-"?E.state=I.COMMENT_ENDING:E.comment+=M;continue;case I.COMMENT_ENDING:M==="-"?(E.state=I.COMMENT_ENDED,E.comment=C(E.opt,E.comment),E.comment&&P(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+M,E.state=I.COMMENT);continue;case I.COMMENT_ENDED:M!==">"?(F(E,"Malformed comment"),E.comment+="--"+M,E.state=I.COMMENT):E.state=I.TEXT;continue;case I.CDATA:M==="]"?E.state=I.CDATA_ENDING:E.cdata+=M;continue;case I.CDATA_ENDING:M==="]"?E.state=I.CDATA_ENDING_2:(E.cdata+="]"+M,E.state=I.CDATA);continue;case I.CDATA_ENDING_2:M===">"?(E.cdata&&P(E,"oncdata",E.cdata),P(E,"onclosecdata"),E.cdata="",E.state=I.TEXT):M==="]"?E.cdata+="]":(E.cdata+="]]"+M,E.state=I.CDATA);continue;case I.PROC_INST:M==="?"?E.state=I.PROC_INST_ENDING:T(M)?E.state=I.PROC_INST_BODY:E.procInstName+=M;continue;case I.PROC_INST_BODY:if(!E.procInstBody&&T(M))continue;M==="?"?E.state=I.PROC_INST_ENDING:E.procInstBody+=M;continue;case I.PROC_INST_ENDING:M===">"?(P(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=I.TEXT):(E.procInstBody+="?"+M,E.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:z(p,M)?E.tagName+=M:(V(E),M===">"?U(E):M==="/"?E.state=I.OPEN_TAG_SLASH:(T(M)||F(E,"Invalid character in tag name"),E.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:M===">"?(U(E,!0),A(E)):(F(E,"Forward-slash in opening tag not followed by >"),E.state=I.ATTRIB);continue;case I.ATTRIB:if(T(M))continue;M===">"?U(E):M==="/"?E.state=I.OPEN_TAG_SLASH:z(S,M)?(E.attribName=M,E.attribValue="",E.state=I.ATTRIB_NAME):F(E,"Invalid attribute name");continue;case I.ATTRIB_NAME:M==="="?E.state=I.ATTRIB_VALUE:M===">"?(F(E,"Attribute without value"),E.attribValue=E.attribName,J(E),U(E)):T(M)?E.state=I.ATTRIB_NAME_SAW_WHITE:z(p,M)?E.attribName+=M:F(E,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if(M==="=")E.state=I.ATTRIB_VALUE;else{if(T(M))continue;F(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",P(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",M===">"?U(E):z(S,M)?(E.attribName=M,E.state=I.ATTRIB_NAME):(F(E,"Invalid attribute name"),E.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(T(M))continue;O(M)?(E.q=M,E.state=I.ATTRIB_VALUE_QUOTED):(F(E,"Unquoted attribute value"),E.state=I.ATTRIB_VALUE_UNQUOTED,E.attribValue=M);continue;case I.ATTRIB_VALUE_QUOTED:if(M!==E.q){M==="&"?E.state=I.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=M;continue}J(E),E.q="",E.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:T(M)?E.state=I.ATTRIB:M===">"?U(E):M==="/"?E.state=I.OPEN_TAG_SLASH:z(S,M)?(F(E,"No whitespace between attributes"),E.attribName=M,E.attribValue="",E.state=I.ATTRIB_NAME):F(E,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!G(M)){M==="&"?E.state=I.ATTRIB_VALUE_ENTITY_U:E.attribValue+=M;continue}J(E),M===">"?U(E):E.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(E.tagName)M===">"?A(E):z(p,M)?E.tagName+=M:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=I.SCRIPT):(T(M)||F(E,"Invalid tagname in closing tag"),E.state=I.CLOSE_TAG_SAW_WHITE);else{if(T(M))continue;K(S,M)?E.script?(E.script+="</"+M,E.state=I.SCRIPT):F(E,"Invalid tagname in closing tag."):E.tagName=M}continue;case I.CLOSE_TAG_SAW_WHITE:if(T(M))continue;M===">"?A(E):F(E,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var ne,N;switch(E.state){case I.TEXT_ENTITY:ne=I.TEXT,N="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:ne=I.ATTRIB_VALUE_QUOTED,N="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:ne=I.ATTRIB_VALUE_UNQUOTED,N="attribValue";break}M===";"?(E[N]+=Y(E),E.entity="",E.state=ne):z(E.entity.length?w:x,M)?E.entity+=M:(F(E,"Invalid character in entity name"),E[N]+="&"+E.entity+M,E.entity="",E.state=ne);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&a(E),E}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var k=String.fromCharCode,E=Math.floor,Z=function(){var M=16384,R=[],L,ne,N=-1,ie=arguments.length;if(!ie)return"";for(var _="";++N<ie;){var d=Number(arguments[N]);if(!isFinite(d)||d<0||d>1114111||E(d)!==d)throw RangeError("Invalid code point: "+d);d<=65535?R.push(d):(d-=65536,L=(d>>10)+55296,ne=d%1024+56320,R.push(L,ne)),(N+1===ie||R.length>M)&&(_+=k.apply(null,R),R.length=0)}return _};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Z,configurable:!0,writable:!0}):String.fromCodePoint=Z}()})(t)})(gg);var $d={isArray:function(t){return Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}},C1=$d.isArray,Vd={copyOptions:function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r},ensureFlagExists:function(t,e){(!(t in e)||typeof e[t]!="boolean")&&(e[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!C1(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,e){(!(t+"Key"in e)||typeof e[t+"Key"]!="string")&&(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}},_1=gg,Te=Vd,yn=$d.isArray,ue,Ne;function A1(t){return ue=Te.copyOptions(t),Te.ensureFlagExists("ignoreDeclaration",ue),Te.ensureFlagExists("ignoreInstruction",ue),Te.ensureFlagExists("ignoreAttributes",ue),Te.ensureFlagExists("ignoreText",ue),Te.ensureFlagExists("ignoreComment",ue),Te.ensureFlagExists("ignoreCdata",ue),Te.ensureFlagExists("ignoreDoctype",ue),Te.ensureFlagExists("compact",ue),Te.ensureFlagExists("alwaysChildren",ue),Te.ensureFlagExists("addParent",ue),Te.ensureFlagExists("trim",ue),Te.ensureFlagExists("nativeType",ue),Te.ensureFlagExists("nativeTypeAttributes",ue),Te.ensureFlagExists("sanitize",ue),Te.ensureFlagExists("instructionHasAttributes",ue),Te.ensureFlagExists("captureSpacesBetweenElements",ue),Te.ensureAlwaysArrayExists(ue),Te.ensureKeyExists("declaration",ue),Te.ensureKeyExists("instruction",ue),Te.ensureKeyExists("attributes",ue),Te.ensureKeyExists("text",ue),Te.ensureKeyExists("comment",ue),Te.ensureKeyExists("cdata",ue),Te.ensureKeyExists("doctype",ue),Te.ensureKeyExists("type",ue),Te.ensureKeyExists("name",ue),Te.ensureKeyExists("elements",ue),Te.ensureKeyExists("parent",ue),ue}function Ug(t){var e=Number(t);if(!isNaN(e))return e;var r=t.toLowerCase();return r==="true"?!0:r==="false"?!1:t}function Ha(t,e){var r;if(ue.compact){if(!Ne[ue[t+"Key"]]&&(yn(ue.alwaysArray)?ue.alwaysArray.indexOf(ue[t+"Key"])!==-1:ue.alwaysArray)&&(Ne[ue[t+"Key"]]=[]),Ne[ue[t+"Key"]]&&!yn(Ne[ue[t+"Key"]])&&(Ne[ue[t+"Key"]]=[Ne[ue[t+"Key"]]]),t+"Fn"in ue&&typeof e=="string"&&(e=ue[t+"Fn"](e,Ne)),t==="instruction"&&("instructionFn"in ue||"instructionNameFn"in ue)){for(r in e)if(e.hasOwnProperty(r))if("instructionFn"in ue)e[r]=ue.instructionFn(e[r],r,Ne);else{var n=e[r];delete e[r],e[ue.instructionNameFn(r,n,Ne)]=n}}yn(Ne[ue[t+"Key"]])?Ne[ue[t+"Key"]].push(e):Ne[ue[t+"Key"]]=e}else{Ne[ue.elementsKey]||(Ne[ue.elementsKey]=[]);var a={};if(a[ue.typeKey]=t,t==="instruction"){for(r in e)if(e.hasOwnProperty(r))break;a[ue.nameKey]="instructionNameFn"in ue?ue.instructionNameFn(r,e,Ne):r,ue.instructionHasAttributes?(a[ue.attributesKey]=e[r][ue.attributesKey],"instructionFn"in ue&&(a[ue.attributesKey]=ue.instructionFn(a[ue.attributesKey],r,Ne))):("instructionFn"in ue&&(e[r]=ue.instructionFn(e[r],r,Ne)),a[ue.instructionKey]=e[r])}else t+"Fn"in ue&&(e=ue[t+"Fn"](e,Ne)),a[ue[t+"Key"]]=e;ue.addParent&&(a[ue.parentKey]=Ne),Ne[ue.elementsKey].push(a)}}function $g(t){if("attributesFn"in ue&&t&&(t=ue.attributesFn(t,Ne)),(ue.trim||"attributeValueFn"in ue||"attributeNameFn"in ue||ue.nativeTypeAttributes)&&t){var e;for(e in t)if(t.hasOwnProperty(e)&&(ue.trim&&(t[e]=t[e].trim()),ue.nativeTypeAttributes&&(t[e]=Ug(t[e])),"attributeValueFn"in ue&&(t[e]=ue.attributeValueFn(t[e],e,Ne)),"attributeNameFn"in ue)){var r=t[e];delete t[e],t[ue.attributeNameFn(e,t[e],Ne)]=r}}return t}function T1(t){var e={};if(t.body&&(t.name.toLowerCase()==="xml"||ue.instructionHasAttributes)){for(var r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,n;(n=r.exec(t.body))!==null;)e[n[1]]=n[2]||n[3]||n[4];e=$g(e)}if(t.name.toLowerCase()==="xml"){if(ue.ignoreDeclaration)return;Ne[ue.declarationKey]={},Object.keys(e).length&&(Ne[ue.declarationKey][ue.attributesKey]=e),ue.addParent&&(Ne[ue.declarationKey][ue.parentKey]=Ne)}else{if(ue.ignoreInstruction)return;ue.trim&&(t.body=t.body.trim());var a={};ue.instructionHasAttributes&&Object.keys(e).length?(a[t.name]={},a[t.name][ue.attributesKey]=e):a[t.name]=t.body,Ha("instruction",a)}}function I1(t,e){var r;if(typeof t=="object"&&(e=t.attributes,t=t.name),e=$g(e),"elementNameFn"in ue&&(t=ue.elementNameFn(t,Ne)),ue.compact){if(r={},!ue.ignoreAttributes&&e&&Object.keys(e).length){r[ue.attributesKey]={};var n;for(n in e)e.hasOwnProperty(n)&&(r[ue.attributesKey][n]=e[n])}!(t in Ne)&&(yn(ue.alwaysArray)?ue.alwaysArray.indexOf(t)!==-1:ue.alwaysArray)&&(Ne[t]=[]),Ne[t]&&!yn(Ne[t])&&(Ne[t]=[Ne[t]]),yn(Ne[t])?Ne[t].push(r):Ne[t]=r}else Ne[ue.elementsKey]||(Ne[ue.elementsKey]=[]),r={},r[ue.typeKey]="element",r[ue.nameKey]=t,!ue.ignoreAttributes&&e&&Object.keys(e).length&&(r[ue.attributesKey]=e),ue.alwaysChildren&&(r[ue.elementsKey]=[]),Ne[ue.elementsKey].push(r);r[ue.parentKey]=Ne,Ne=r}function P1(t){ue.ignoreText||!t.trim()&&!ue.captureSpacesBetweenElements||(ue.trim&&(t=t.trim()),ue.nativeType&&(t=Ug(t)),ue.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),Ha("text",t))}function R1(t){ue.ignoreComment||(ue.trim&&(t=t.trim()),Ha("comment",t))}function O1(t){var e=Ne[ue.parentKey];ue.addParent||delete Ne[ue.parentKey],Ne=e}function D1(t){ue.ignoreCdata||(ue.trim&&(t=t.trim()),Ha("cdata",t))}function F1(t){ue.ignoreDoctype||(t=t.replace(/^ /,""),ue.trim&&(t=t.trim()),Ha("doctype",t))}function L1(t){t.note=t}var Vg=function(t,e){var r=_1.parser(!0,{}),n={};if(Ne=n,ue=A1(e),r.opt={strictEntities:!0},r.onopentag=I1,r.ontext=P1,r.oncomment=R1,r.onclosetag=O1,r.onerror=L1,r.oncdata=D1,r.ondoctype=F1,r.onprocessinginstruction=T1,r.write(t).close(),n[ue.elementsKey]){var a=n[ue.elementsKey];delete n[ue.elementsKey],n[ue.elementsKey]=a,delete n.text}return n},xh=Vd,M1=Vg;function B1(t){var e=xh.copyOptions(t);return xh.ensureSpacesExists(e),e}var z1=function(t,e){var r,n,a,i;return r=B1(e),n=M1(t,r),i="compact"in r&&r.compact?"_parent":"parent","addParent"in r&&r.addParent?a=JSON.stringify(n,function(o,l){return o===i?"_":l},r.spaces):a=JSON.stringify(n,null,r.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},Fe=Vd,U1=$d.isArray,xt,yt;function $1(t){var e=Fe.copyOptions(t);return Fe.ensureFlagExists("ignoreDeclaration",e),Fe.ensureFlagExists("ignoreInstruction",e),Fe.ensureFlagExists("ignoreAttributes",e),Fe.ensureFlagExists("ignoreText",e),Fe.ensureFlagExists("ignoreComment",e),Fe.ensureFlagExists("ignoreCdata",e),Fe.ensureFlagExists("ignoreDoctype",e),Fe.ensureFlagExists("compact",e),Fe.ensureFlagExists("indentText",e),Fe.ensureFlagExists("indentCdata",e),Fe.ensureFlagExists("indentAttributes",e),Fe.ensureFlagExists("indentInstruction",e),Fe.ensureFlagExists("fullTagEmptyElement",e),Fe.ensureFlagExists("noQuotesForNativeAttributes",e),Fe.ensureSpacesExists(e),typeof e.spaces=="number"&&(e.spaces=Array(e.spaces+1).join(" ")),Fe.ensureKeyExists("declaration",e),Fe.ensureKeyExists("instruction",e),Fe.ensureKeyExists("attributes",e),Fe.ensureKeyExists("text",e),Fe.ensureKeyExists("comment",e),Fe.ensureKeyExists("cdata",e),Fe.ensureKeyExists("doctype",e),Fe.ensureKeyExists("type",e),Fe.ensureKeyExists("name",e),Fe.ensureKeyExists("elements",e),e}function hr(t,e,r){return(!r&&t.spaces?`
`:"")+Array(e+1).join(t.spaces)}function Go(t,e,r){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,yt,xt));var n,a,i,o,l=[];for(n in t)t.hasOwnProperty(n)&&t[n]!==null&&t[n]!==void 0&&(o=e.noQuotesForNativeAttributes&&typeof t[n]!="string"?"":'"',a=""+t[n],a=a.replace(/"/g,"&quot;"),i="attributeNameFn"in e?e.attributeNameFn(n,a,yt,xt):n,l.push(e.spaces&&e.indentAttributes?hr(e,r+1,!1):" "),l.push(i+"="+o+("attributeValueFn"in e?e.attributeValueFn(a,n,yt,xt):a)+o));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&l.push(hr(e,r,!1)),l.join("")}function Wg(t,e,r){return xt=t,yt="xml",e.ignoreDeclaration?"":"<?xml"+Go(t[e.attributesKey],e,r)+"?>"}function Hg(t,e,r){if(e.ignoreInstruction)return"";var n;for(n in t)if(t.hasOwnProperty(n))break;var a="instructionNameFn"in e?e.instructionNameFn(n,t[n],yt,xt):n;if(typeof t[n]=="object")return xt=t,yt=a,"<?"+a+Go(t[n][e.attributesKey],e,r)+"?>";var i=t[n]?t[n]:"";return"instructionFn"in e&&(i=e.instructionFn(i,n,yt,xt)),"<?"+a+(i?" "+i:"")+"?>"}function Gg(t,e){return e.ignoreComment?"":"<!--"+("commentFn"in e?e.commentFn(t,yt,xt):t)+"-->"}function qg(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,yt,xt):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Kg(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,yt,xt):t)+">"}function Wd(t,e){return e.ignoreText?"":(t=""+t,t=t.replace(/&amp;/g,"&"),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,yt,xt):t)}function V1(t,e){var r;if(t.elements&&t.elements.length)for(r=0;r<t.elements.length;++r)switch(t.elements[r][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function W1(t,e,r){xt=t,yt=t.name;var n=[],a="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;n.push("<"+a),t[e.attributesKey]&&n.push(Go(t[e.attributesKey],e,r));var i=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&t[e.attributesKey]["xml:space"]==="preserve";return i||("fullTagEmptyElementFn"in e?i=e.fullTagEmptyElementFn(t.name,t):i=e.fullTagEmptyElement),i?(n.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(n.push(Yg(t[e.elementsKey],e,r+1)),xt=t,yt=t.name),n.push(e.spaces&&V1(t,e)?`
`+Array(r+1).join(e.spaces):""),n.push("</"+a+">")):n.push("/>"),n.join("")}function Yg(t,e,r,n){return t.reduce(function(a,i){var o=hr(e,r,n&&!a);switch(i.type){case"element":return a+o+W1(i,e,r);case"comment":return a+o+Gg(i[e.commentKey],e);case"doctype":return a+o+Kg(i[e.doctypeKey],e);case"cdata":return a+(e.indentCdata?o:"")+qg(i[e.cdataKey],e);case"text":return a+(e.indentText?o:"")+Wd(i[e.textKey],e);case"instruction":var l={};return l[i[e.nameKey]]=i[e.attributesKey]?i:i[e.instructionKey],a+(e.indentInstruction?o:"")+Hg(l,e,r)}},"")}function Xg(t,e,r){var n;for(n in t)if(t.hasOwnProperty(n))switch(n){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||r)return!0;break;case e.cdataKey:if(e.indentCdata||r)return!0;break;case e.instructionKey:if(e.indentInstruction||r)return!0;break;case e.doctypeKey:case e.commentKey:return!0;default:return!0}return!1}function H1(t,e,r,n,a){xt=t,yt=e;var i="elementNameFn"in r?r.elementNameFn(e,t):e;if(typeof t>"u"||t===null||t==="")return"fullTagEmptyElementFn"in r&&r.fullTagEmptyElementFn(e,t)||r.fullTagEmptyElement?"<"+i+"></"+i+">":"<"+i+"/>";var o=[];if(e){if(o.push("<"+i),typeof t!="object")return o.push(">"+Wd(t,r)+"</"+i+">"),o.join("");t[r.attributesKey]&&o.push(Go(t[r.attributesKey],r,n));var l=Xg(t,r,!0)||t[r.attributesKey]&&t[r.attributesKey]["xml:space"]==="preserve";if(l||("fullTagEmptyElementFn"in r?l=r.fullTagEmptyElementFn(e,t):l=r.fullTagEmptyElement),l)o.push(">");else return o.push("/>"),o.join("")}return o.push(Qg(t,r,n+1,!1)),xt=t,yt=e,e&&o.push((a?hr(r,n,!1):"")+"</"+i+">"),o.join("")}function Qg(t,e,r,n){var a,i,o,l=[];for(i in t)if(t.hasOwnProperty(i))for(o=U1(t[i])?t[i]:[t[i]],a=0;a<o.length;++a){switch(i){case e.declarationKey:l.push(Wg(o[a],e,r));break;case e.instructionKey:l.push((e.indentInstruction?hr(e,r,n):"")+Hg(o[a],e,r));break;case e.attributesKey:case e.parentKey:break;case e.textKey:l.push((e.indentText?hr(e,r,n):"")+Wd(o[a],e));break;case e.cdataKey:l.push((e.indentCdata?hr(e,r,n):"")+qg(o[a],e));break;case e.doctypeKey:l.push(hr(e,r,n)+Kg(o[a],e));break;case e.commentKey:l.push(hr(e,r,n)+Gg(o[a],e));break;default:l.push(hr(e,r,n)+H1(o[a],i,e,r,Xg(o[a],e)))}n=n&&!l.length}return l.join("")}var Jg=function(t,e){e=$1(e);var r=[];return xt=t,yt="_root_",e.compact?r.push(Qg(t,e,0,!0)):(t[e.declarationKey]&&r.push(Wg(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&r.push(Yg(t[e.elementsKey],e,0,!r.length))),r.join("")},G1=Jg,q1=function(t,e){t instanceof Buffer&&(t=t.toString());var r=null;if(typeof t=="string")try{r=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else r=t;return G1(r,e)},K1=Vg,Y1=z1,X1=Jg,Q1=q1,Zg={xml2js:K1,xml2json:Y1,js2xml:X1,json2xml:Q1};const Hd=t=>{switch(t.type){case void 0:case"element":const e=new Z1(t.name,t.attributes),r=t.elements||[];for(const n of r){const a=Hd(n);a!==void 0&&e.push(a)}return e;case"text":return t.text;default:return}};class J1 extends xe{}class Z1 extends oe{static fromXmlString(e){const r=Zg.xml2js(e,{compact:!1});return Hd(r)}constructor(e,r){super(e),r&&this.root.push(new J1(r))}push(e){this.root.push(e)}}class eN extends oe{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class ex extends oe{constructor(e,r){super(e),r&&(this.root=r.root)}}const vt=t=>{if(isNaN(t))throw new Error(`Invalid value '${t}' specified. Must be an integer.`);return Math.floor(t)},qo=t=>{const e=vt(t);if(e<0)throw new Error(`Invalid value '${t}' specified. Must be a positive integer.`);return e},tx=(t,e)=>{const r=e*2;if(t.length!==r||isNaN(+`0x${t}`))throw new Error(`Invalid hex value '${t}'. Expected ${r} digit hex value`);return t},yh=t=>tx(t,1),Gd=t=>{const e=t.slice(-2),r=t.substring(0,t.length-2);return`${Number(r)}${e}`},rx=t=>{const e=Gd(t);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},Dn=t=>{if(t==="auto")return t;const e=t.charAt(0)==="#"?t.substring(1):t;return tx(e,3)},_r=t=>typeof t=="string"?Gd(t):vt(t),tN=t=>typeof t=="string"?rx(t):qo(t),lt=t=>typeof t=="string"?rx(t):qo(t),rN=t=>{const e=t.substring(0,t.length-1);return`${Number(e)}%`},sN=t=>typeof t=="number"?vt(t):t.slice(-1)==="%"?rN(t):Gd(t),nN=qo,aN=qo,iN=t=>t.toISOString();class me extends oe{constructor(e,r=!0){super(e),r!==!0&&this.root.push(new He({val:r}))}}class wc extends oe{constructor(e,r){super(e),this.root.push(new He({val:tN(r)}))}}class Is extends oe{constructor(e,r){super(e),this.root.push(new He({val:r}))}}const sa=(t,e)=>new bt({name:t,attributes:{value:{key:"w:val",value:e}}});class qd extends oe{constructor(e,r){super(e),this.root.push(new He({val:r}))}}class oN extends oe{constructor(e,r){super(e),this.root.push(new He({val:r}))}}class hs extends oe{constructor(e,r){super(e),this.root.push(r)}}class bt extends oe{constructor({name:e,attributes:r,children:n}){super(e),r&&this.root.push(new Mr(r)),n&&this.root.push(...n)}}const ht={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"};class lN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class sx extends oe{constructor(e){super("w:jc"),this.root.push(new lN({val:e}))}}class Re extends oe{constructor(e,{color:r,size:n,space:a,style:i}){super(e),this.root.push(new cN({style:i,color:r===void 0?void 0:Dn(r),size:n===void 0?void 0:nN(n),space:a===void 0?void 0:aN(a)}))}}class cN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const De={SINGLE:"single",NONE:"none"};class uN extends Lr{constructor(e){super("w:pBdr"),e.top&&this.root.push(new Re("w:top",e.top)),e.bottom&&this.root.push(new Re("w:bottom",e.bottom)),e.left&&this.root.push(new Re("w:left",e.left)),e.right&&this.root.push(new Re("w:right",e.right))}}class dN extends oe{constructor(){super("w:pBdr");const e=new Re("w:bottom",{color:"auto",space:1,style:De.SINGLE,size:6});this.root.push(e)}}class fN extends oe{constructor({start:e,end:r,left:n,right:a,hanging:i,firstLine:o}){super("w:ind"),this.root.push(new Mr({start:{key:"w:start",value:e===void 0?void 0:_r(e)},end:{key:"w:end",value:r===void 0?void 0:_r(r)},left:{key:"w:left",value:n===void 0?void 0:_r(n)},right:{key:"w:right",value:a===void 0?void 0:_r(a)},hanging:{key:"w:hanging",value:i===void 0?void 0:lt(i)},firstLine:{key:"w:firstLine",value:o===void 0?void 0:lt(o)}}))}}let mN=class extends oe{constructor(){super("w:br")}};const Kd={BEGIN:"begin",END:"end",SEPARATE:"separate"};class Yd extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class yi extends oe{constructor(e){super("w:fldChar"),this.root.push(new Yd({type:Kd.BEGIN,dirty:e}))}}class wi extends oe{constructor(e){super("w:fldChar"),this.root.push(new Yd({type:Kd.SEPARATE,dirty:e}))}}class vi extends oe{constructor(e){super("w:fldChar"),this.root.push(new Yd({type:Kd.END,dirty:e}))}}const Fn={DEFAULT:"default",PRESERVE:"preserve"};class Ln extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{space:"xml:space"})}}class hN extends oe{constructor(){super("w:instrText"),this.root.push(new Ln({space:Fn.PRESERVE})),this.root.push("PAGE")}}class pN extends oe{constructor(){super("w:instrText"),this.root.push(new Ln({space:Fn.PRESERVE})),this.root.push("NUMPAGES")}}class gN extends oe{constructor(){super("w:instrText"),this.root.push(new Ln({space:Fn.PRESERVE})),this.root.push("SECTIONPAGES")}}class xN extends oe{constructor(){super("w:instrText"),this.root.push(new Ln({space:Fn.PRESERVE})),this.root.push("SECTION")}}class yN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class Ko extends oe{constructor({fill:e,color:r,type:n}){super("w:shd"),this.root.push(new yN({fill:e===void 0?void 0:Dn(e),color:r===void 0?void 0:Dn(r),type:n}))}}class wN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const vN={DOT:"dot"};class bN extends oe{constructor(e){super("w:em"),this.root.push(new He({val:e}))}}class NN extends bN{constructor(e=vN.DOT){super(e)}}class jN extends oe{constructor(e){super("w:spacing"),this.root.push(new He({val:_r(e)}))}}class EN extends oe{constructor(e){super("w:color"),this.root.push(new He({val:Dn(e)}))}}class SN extends oe{constructor(e){super("w:highlight"),this.root.push(new He({val:e}))}}class kN extends oe{constructor(e){super("w:highlightCs"),this.root.push(new He({val:e}))}}const CN=t=>new bt({name:"w:lang",attributes:{value:{key:"w:val",value:t.value},eastAsia:{key:"w:eastAsia",value:t.eastAsia},bidirectional:{key:"w:bidi",value:t.bidirectional}}});class wh extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class vc extends oe{constructor(e,r){if(super("w:rFonts"),typeof e=="string"){const n=e;this.root.push(new wh({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:r}))}else{const n=e;this.root.push(new wh(n))}}}let nx=class extends oe{constructor(e){super("w:vertAlign"),this.root.push(new He({val:e}))}};class _N extends nx{constructor(){super("superscript")}}class AN extends nx{constructor(){super("subscript")}}const ax={SINGLE:"single"};class TN extends oe{constructor(e=ax.SINGLE,r){super("w:u"),this.root.push(new He({val:e,color:r===void 0?void 0:Dn(r)}))}}class Hs extends Lr{constructor(e){var r,n;if(super("w:rPr"),!e)return;e.noProof!==void 0&&this.push(new me("w:noProof",e.noProof)),e.bold!==void 0&&this.push(new me("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new me("w:bCs",(r=e.boldComplexScript)!=null?r:e.bold)),e.italics!==void 0&&this.push(new me("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new me("w:iCs",(n=e.italicsComplexScript)!=null?n:e.italics)),e.underline&&this.push(new TN(e.underline.type,e.underline.color)),e.effect&&this.push(new Is("w:effect",e.effect)),e.emphasisMark&&this.push(new NN(e.emphasisMark.type)),e.color&&this.push(new EN(e.color)),e.kern&&this.push(new wc("w:kern",e.kern)),e.position&&this.push(new Is("w:position",e.position)),e.size!==void 0&&this.push(new wc("w:sz",e.size));const a=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;a&&this.push(new wc("w:szCs",a)),e.rightToLeft!==void 0&&this.push(new me("w:rtl",e.rightToLeft)),e.smallCaps!==void 0?this.push(new me("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new me("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new me("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new me("w:dstrike",e.doubleStrike)),e.subScript&&this.push(new AN),e.superScript&&this.push(new _N),e.style&&this.push(new Is("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new vc(e.font)):"name"in e.font?this.push(new vc(e.font.name,e.font.hint)):this.push(new vc(e.font))),e.highlight&&this.push(new SN(e.highlight));const i=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;i&&this.push(new kN(i)),e.characterSpacing&&this.push(new jN(e.characterSpacing)),e.emboss!==void 0&&this.push(new me("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new me("w:imprint",e.imprint)),e.shading&&this.push(new Ko(e.shading)),e.revision&&this.push(new IN(e.revision)),e.border&&this.push(new Re("w:bdr",e.border)),e.snapToGrid!==void 0&&this.push(new me("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new me("w:vanish",e.vanish)),e.specVanish&&this.push(new me("w:specVanish",e.vanish)),e.scale!==void 0&&this.push(new qd("w:w",e.scale)),e.language&&this.push(CN(e.language)),e.math&&this.push(new me("w:oMath",e.math))}push(e){this.root.push(e)}}class IN extends oe{constructor(e){super("w:rPrChange"),this.root.push(new wN({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Hs(e))}}class Au extends oe{constructor(e){var r;return super("w:t"),typeof e=="string"?(this.root.push(new Ln({space:Fn.PRESERVE})),this.root.push(e),this):(this.root.push(new Ln({space:(r=e.space)!=null?r:Fn.DEFAULT})),this.root.push(e.text),this)}}const bi={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Ga extends oe{constructor(e){if(super("w:r"),le(this,"properties"),this.properties=new Hs(e),this.root.push(this.properties),e.break)for(let r=0;r<e.break;r++)this.root.push(new mN);if(e.children)for(const r of e.children){if(typeof r=="string"){switch(r){case bi.CURRENT:this.root.push(new yi),this.root.push(new hN),this.root.push(new wi),this.root.push(new vi);break;case bi.TOTAL_PAGES:this.root.push(new yi),this.root.push(new pN),this.root.push(new wi),this.root.push(new vi);break;case bi.TOTAL_PAGES_IN_SECTION:this.root.push(new yi),this.root.push(new gN),this.root.push(new wi),this.root.push(new vi);break;case bi.CURRENT_SECTION:this.root.push(new yi),this.root.push(new xN),this.root.push(new wi),this.root.push(new vi);break;default:this.root.push(new Au(r));break}continue}this.root.push(r)}else e.text&&this.root.push(new Au(e.text))}}class Ae extends Ga{constructor(e){if(typeof e=="string")return super({}),this.root.push(new Au(e)),this;super(e)}}let PN="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",RN=(t,e=21)=>(r=e)=>{let n="",a=r;for(;a--;)n+=t[Math.random()*t.length|0];return n},ON=(t=21)=>{let e="",r=t;for(;r--;)e+=PN[Math.random()*64|0];return e};const Jt=t=>Math.floor(t*72*20),Yo=(t=0)=>{let e=t;return()=>++e},DN=()=>Yo(),FN=()=>Yo(1),LN=()=>Yo(),MN=()=>Yo(),ix=()=>ON().toLowerCase(),na=t=>RN("1234567890abcdef",t)(),BN=()=>`${na(8)}-${na(4)}-${na(4)}-${na(4)}-${na(12)}`,zN={PAGE:"page"},UN={PAGE:"page"};class $N extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{x:"x",y:"y"})}}class VN extends oe{constructor(){super("wp:simplePos"),this.root.push(new $N({x:0,y:0}))}}class ox extends oe{constructor(e){super("wp:align"),this.root.push(e)}}class lx extends oe{constructor(e){super("wp:posOffset"),this.root.push(e.toString())}}class WN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{relativeFrom:"relativeFrom"})}}class HN extends oe{constructor(e){if(super("wp:positionH"),this.root.push(new WN({relativeFrom:e.relative||zN.PAGE})),e.align)this.root.push(new ox(e.align));else if(e.offset!==void 0)this.root.push(new lx(e.offset));else throw new Error("There is no configuration provided for floating position (Align or offset)")}}class GN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{relativeFrom:"relativeFrom"})}}class qN extends oe{constructor(e){if(super("wp:positionV"),this.root.push(new GN({relativeFrom:e.relative||UN.PAGE})),e.align)this.root.push(new ox(e.align));else if(e.offset!==void 0)this.root.push(new lx(e.offset));else throw new Error("There is no configuration provided for floating position (Align or offset)")}}class KN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{uri:"uri"})}}class YN extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{embed:"r:embed",cstate:"cstate"})}}class XN extends oe{constructor(e){super("a:blip"),this.root.push(new YN({embed:`rId{${e.fileName}}`,cstate:"none"}))}}class QN extends oe{constructor(){super("a:srcRect")}}class JN extends oe{constructor(){super("a:fillRect")}}class ZN extends oe{constructor(){super("a:stretch"),this.root.push(new JN)}}class ej extends oe{constructor(e){super("pic:blipFill"),this.root.push(new XN(e)),this.root.push(new QN),this.root.push(new ZN)}}class tj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"})}}class rj extends oe{constructor(){super("a:picLocks"),this.root.push(new tj({noChangeAspect:1,noChangeArrowheads:1}))}}class sj extends oe{constructor(){super("pic:cNvPicPr"),this.root.push(new rj)}}const cx=(t,e)=>new bt({name:"a:hlinkClick",attributes:Rn(Ce({},e?{xmlns:{key:"xmlns:a",value:"http://schemas.openxmlformats.org/drawingml/2006/main"}}:{}),{id:{key:"r:id",value:`rId${t}`}})});class nj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"id",name:"name",descr:"descr"})}}class aj extends oe{constructor(){super("pic:cNvPr"),this.root.push(new nj({id:0,name:"",descr:""}))}prepForXml(e){for(let r=e.stack.length-1;r>=0;r--){const n=e.stack[r];if(n instanceof Xd){this.root.push(cx(n.linkId,!1));break}}return super.prepForXml(e)}}class ij extends oe{constructor(){super("pic:nvPicPr"),this.root.push(new aj),this.root.push(new sj)}}class oj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns:pic"})}}class lj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{cx:"cx",cy:"cy"})}}class cj extends oe{constructor(e,r){super("a:ext"),le(this,"attributes"),this.attributes=new lj({cx:e,cy:r}),this.root.push(this.attributes)}}class uj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{x:"x",y:"y"})}}class dj extends oe{constructor(){super("a:off"),this.root.push(new uj({x:0,y:0}))}}class fj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"})}}class mj extends oe{constructor(e){var r,n;super("a:xfrm"),le(this,"extents"),this.root.push(new fj({flipVertical:(r=e.flip)==null?void 0:r.vertical,flipHorizontal:(n=e.flip)==null?void 0:n.horizontal,rotation:e.rotation})),this.extents=new cj(e.emus.x,e.emus.y),this.root.push(new dj),this.root.push(this.extents)}}const ux=()=>new bt({name:"a:noFill"}),hj=t=>new bt({name:"a:schemeClr",attributes:{value:{key:"val",value:t.value}}}),pj=t=>new bt({name:"a:srgbClr",attributes:{value:{key:"val",value:t.value}}}),vh=t=>new bt({name:"a:solidFill",children:[t.type==="rgb"?pj(t):hj(t)]}),gj=t=>new bt({name:"a:ln",attributes:{width:{key:"w",value:t.width},cap:{key:"cap",value:t.cap},compoundLine:{key:"cmpd",value:t.compoundLine},align:{key:"algn",value:t.align}},children:[t.type==="noFill"?ux():t.solidFillType==="rgb"?vh({type:"rgb",value:t.value}):vh({type:"scheme",value:t.value})]});class xj extends oe{constructor(){super("a:avLst")}}class yj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{prst:"prst"})}}class wj extends oe{constructor(){super("a:prstGeom"),this.root.push(new yj({prst:"rect"})),this.root.push(new xj)}}class vj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{bwMode:"bwMode"})}}class bj extends oe{constructor({outline:e,transform:r}){super("pic:spPr"),le(this,"form"),this.root.push(new vj({bwMode:"auto"})),this.form=new mj(r),this.root.push(this.form),this.root.push(new wj),e&&(this.root.push(ux()),this.root.push(gj(e)))}}class Nj extends oe{constructor({mediaData:e,transform:r,outline:n}){super("pic:pic"),this.root.push(new oj({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new ij),this.root.push(new ej(e)),this.root.push(new bj({transform:r,outline:n}))}}class jj extends oe{constructor({mediaData:e,transform:r,outline:n}){super("a:graphicData"),le(this,"pic"),this.root.push(new KN({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new Nj({mediaData:e,transform:r,outline:n}),this.root.push(this.pic)}}class Ej extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{a:"xmlns:a"})}}class dx extends oe{constructor({mediaData:e,transform:r,outline:n}){super("a:graphic"),le(this,"data"),this.root.push(new Ej({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new jj({mediaData:e,transform:r,outline:n}),this.root.push(this.data)}}const Ni={NONE:0,SQUARE:1,TIGHT:2,TOP_AND_BOTTOM:3},Sj={BOTH_SIDES:"bothSides"};class bh extends oe{constructor(){super("wp:wrapNone")}}class kj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"})}}class Cj extends oe{constructor(e,r={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new kj({wrapText:e.side||Sj.BOTH_SIDES,distT:r.top,distB:r.bottom,distL:r.left,distR:r.right}))}}class _j extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class Aj extends oe{constructor(e={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new _j({distT:e.top,distB:e.bottom}))}}class Tj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class Ij extends oe{constructor(e={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new Tj({distT:e.top,distB:e.bottom}))}}class fx extends oe{constructor({name:e,description:r,title:n}={name:"",description:"",title:""}){super("wp:docPr"),le(this,"docPropertiesUniqueNumericId",LN()),this.root.push(new Mr({id:{key:"id",value:this.docPropertiesUniqueNumericId()},name:{key:"name",value:e},description:{key:"descr",value:r},title:{key:"title",value:n}}))}prepForXml(e){for(let r=e.stack.length-1;r>=0;r--){const n=e.stack[r];if(n instanceof Xd){this.root.push(cx(n.linkId,!0));break}}return super.prepForXml(e)}}const mx=({top:t,right:e,bottom:r,left:n})=>new bt({name:"wp:effectExtent",attributes:{top:{key:"t",value:t},right:{key:"r",value:e},bottom:{key:"b",value:r},left:{key:"l",value:n}}});class Pj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{cx:"cx",cy:"cy"})}}class hx extends oe{constructor(e,r){super("wp:extent"),le(this,"attributes"),this.attributes=new Pj({cx:e,cy:r}),this.root.push(this.attributes)}}class Rj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"})}}class Oj extends oe{constructor(){super("a:graphicFrameLocks"),this.root.push(new Rj({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}class px extends oe{constructor(){super("wp:cNvGraphicFramePr"),this.root.push(new Oj)}}class Dj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"})}}class Fj extends oe{constructor({mediaData:e,transform:r,drawingOptions:n}){super("wp:anchor");const a=Ce({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},n.floating);if(this.root.push(new Dj({distT:a.margins&&a.margins.top||0,distB:a.margins&&a.margins.bottom||0,distL:a.margins&&a.margins.left||0,distR:a.margins&&a.margins.right||0,simplePos:"0",allowOverlap:a.allowOverlap===!0?"1":"0",behindDoc:a.behindDocument===!0?"1":"0",locked:a.lockAnchor===!0?"1":"0",layoutInCell:a.layoutInCell===!0?"1":"0",relativeHeight:a.zIndex?a.zIndex:r.emus.y})),this.root.push(new VN),this.root.push(new HN(a.horizontalPosition)),this.root.push(new qN(a.verticalPosition)),this.root.push(new hx(r.emus.x,r.emus.y)),this.root.push(mx({top:0,right:0,bottom:0,left:0})),n.floating!==void 0&&n.floating.wrap!==void 0)switch(n.floating.wrap.type){case Ni.SQUARE:this.root.push(new Cj(n.floating.wrap,n.floating.margins));break;case Ni.TIGHT:this.root.push(new Aj(n.floating.margins));break;case Ni.TOP_AND_BOTTOM:this.root.push(new Ij(n.floating.margins));break;case Ni.NONE:default:this.root.push(new bh)}else this.root.push(new bh);this.root.push(new fx(n.docProperties)),this.root.push(new px),this.root.push(new dx({mediaData:e,transform:r,outline:n.outline}))}}const Lj=({mediaData:t,transform:e,docProperties:r,outline:n})=>{var a,i,o,l;return new bt({name:"wp:inline",attributes:{distanceTop:{key:"distT",value:0},distanceBottom:{key:"distB",value:0},distanceLeft:{key:"distL",value:0},distanceRight:{key:"distR",value:0}},children:[new hx(e.emus.x,e.emus.y),mx(n?{top:((a=n.width)!=null?a:9525)*2,right:((i=n.width)!=null?i:9525)*2,bottom:((o=n.width)!=null?o:9525)*2,left:((l=n.width)!=null?l:9525)*2}:{top:0,right:0,bottom:0,left:0}),new fx(r),new px,new dx({mediaData:t,transform:e,outline:n})]})};class Mj extends oe{constructor(e,r={}){super("w:drawing"),r.floating?this.root.push(new Fj({mediaData:e,transform:e.transformation,drawingOptions:r})):this.root.push(Lj({mediaData:e,transform:e.transformation,docProperties:r.docProperties,outline:r.outline}))}}class Bj extends Ga{constructor(e){super({}),le(this,"key",`${ix()}.png`),le(this,"imageData");const r=typeof e.data=="string"?this.convertDataURIToBinary(e.data):e.data;this.imageData={stream:r,fileName:this.key,transformation:{pixels:{x:Math.round(e.transformation.width),y:Math.round(e.transformation.height)},emus:{x:Math.round(e.transformation.width*9525),y:Math.round(e.transformation.height*9525)},flip:e.transformation.flip,rotation:e.transformation.rotation?e.transformation.rotation*6e4:void 0}};const n=new Mj(this.imageData,{floating:e.floating,docProperties:e.altText,outline:e.outline});this.root.push(n)}prepForXml(e){return e.file.Media.addImage(this.key,this.imageData),super.prepForXml(e)}convertDataURIToBinary(e){if(typeof atob=="function"){const r=";base64,",n=e.indexOf(r),a=n===-1?0:n+r.length;return new Uint8Array(atob(e.substring(a)).split("").map(i=>i.charCodeAt(0)))}else{const r=require("buffer");return new r.Buffer(e,"base64")}}}class zj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class Uj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class $j extends oe{constructor({id:e,initials:r,author:n,date:a=new Date,children:i}){super("w:comment"),this.root.push(new zj({id:e,initials:r,author:n,date:a.toISOString()}));for(const o of i)this.root.push(o)}}class Vj extends oe{constructor({children:e}){super("w:comments"),this.root.push(new Uj({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const r of e)this.root.push(new $j(r))}}class Wj extends oe{constructor(){super("w:pageBreakBefore")}}const Tu={AUTO:"auto"};class Hj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"})}}class Gj extends oe{constructor(e){super("w:spacing"),this.root.push(new Hj(e))}}let ji=class extends oe{constructor(e){super("w:pStyle"),this.root.push(new He({val:e}))}};class qj extends oe{constructor(e){super("w:tabs");for(const r of e)this.root.push(new Yj(r))}}const Nh={LEFT:"left",RIGHT:"right"};class Kj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class Yj extends oe{constructor({type:e,position:r,leader:n}){super("w:tab"),this.root.push(new Kj({val:e,pos:r,leader:n}))}}class jh extends oe{constructor(e,r){super("w:numPr"),this.root.push(new Xj(r)),this.root.push(new Qj(e))}}class Xj extends oe{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new He({val:e}))}}class Qj extends oe{constructor(e){super("w:numId"),this.root.push(new He({val:typeof e=="string"?`{${e}}`:e}))}}class gx extends oe{constructor(){super(...arguments),le(this,"fileChild",Symbol())}}class Jj extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const Zj={EXTERNAL:"External"};class eE extends oe{constructor(e,r,n,a){super("Relationship"),this.root.push(new Jj({id:e,type:r,target:n,targetMode:a}))}}class tE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Xd extends oe{constructor(e,r,n){super("w:hyperlink"),le(this,"linkId"),this.linkId=r;const a={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},i=new tE(a);this.root.push(i),e.forEach(o=>{this.root.push(o)})}}class rE extends oe{constructor(e){super("w:externalHyperlink"),this.options=e}}class sE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class nE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{id:"w:id"})}}class aE{constructor(e){le(this,"bookmarkUniqueNumericId",MN()),le(this,"start"),le(this,"children"),le(this,"end");const r=this.bookmarkUniqueNumericId();this.start=new iE(e.id,r),this.children=e.children,this.end=new oE(r)}}class iE extends oe{constructor(e,r){super("w:bookmarkStart");const n=new sE({name:e,id:r});this.root.push(n)}}class oE extends oe{constructor(e){super("w:bookmarkEnd");const r=new nE({id:e});this.root.push(r)}}class lE extends oe{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new He({val:e}))}}class cE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{verticalAlign:"w:val"})}}class xx extends oe{constructor(e){super("w:vAlign"),this.root.push(new cE({verticalAlign:e}))}}const wn={DEFAULT:"default",FIRST:"first",EVEN:"even"};class uE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const Eh={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class bc extends oe{constructor(e,r){super(e),this.root.push(new uE({type:r.type||wn.DEFAULT,id:`rId${r.id}`}))}}class dE extends oe{constructor({space:e,count:r,separate:n,equalWidth:a,children:i}){super("w:cols"),this.root.push(new Mr({space:{key:"w:space",value:e===void 0?void 0:lt(e)},count:{key:"w:num",value:r===void 0?void 0:vt(r)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:a}})),!a&&i&&i.forEach(o=>this.addChildElement(o))}}class fE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"})}}class mE extends oe{constructor(e,r,n){super("w:docGrid"),this.root.push(new fE({type:n,linePitch:vt(e),charSpace:r?vt(r):void 0}))}}const hE=({countBy:t,start:e,restart:r,distance:n})=>new bt({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:t===void 0?void 0:vt(t)},start:{key:"w:start",value:e===void 0?void 0:vt(e)},restart:{key:"w:restart",value:r},distance:{key:"w:distance",value:n===void 0?void 0:lt(n)}}});class Sh extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class pE extends Lr{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new Sh({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new Sh({})),e.pageBorderTop&&this.root.push(new Re("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new Re("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new Re("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new Re("w:right",e.pageBorderRight))}}class gE extends oe{constructor(e,r,n,a,i,o,l){super("w:pgMar"),this.root.push(new Mr({top:{key:"w:top",value:_r(e)},right:{key:"w:right",value:lt(r)},bottom:{key:"w:bottom",value:_r(n)},left:{key:"w:left",value:lt(a)},header:{key:"w:header",value:lt(i)},footer:{key:"w:footer",value:lt(o)},gutter:{key:"w:gutter",value:lt(l)}}))}}class xE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class yE extends oe{constructor({start:e,formatType:r,separator:n}){super("w:pgNumType"),this.root.push(new xE({start:e===void 0?void 0:vt(e),formatType:r,separator:n}))}}const yx={PORTRAIT:"portrait",LANDSCAPE:"landscape"};class wE extends oe{constructor(e,r,n){super("w:pgSz");const a=n===yx.LANDSCAPE,i=lt(e),o=lt(r);this.root.push(new Mr({width:{key:"w:w",value:a?o:i},height:{key:"w:h",value:a?i:o},orientation:{key:"w:orient",value:n}}))}}class vE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class bE extends oe{constructor(e){super("w:textDirection"),this.root.push(new vE({val:e}))}}class NE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class jE extends oe{constructor(e){super("w:type"),this.root.push(new NE({val:e}))}}const ps={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Nc={WIDTH:11906,HEIGHT:16838,ORIENTATION:yx.PORTRAIT};class EE extends oe{constructor({page:{size:{width:e=Nc.WIDTH,height:r=Nc.HEIGHT,orientation:n=Nc.ORIENTATION}={},margin:{top:a=ps.TOP,right:i=ps.RIGHT,bottom:o=ps.BOTTOM,left:l=ps.LEFT,header:c=ps.HEADER,footer:u=ps.FOOTER,gutter:f=ps.GUTTER}={},pageNumbers:g={},borders:y,textDirection:h}={},grid:{linePitch:v=360,charSpace:b,type:S}={},headerWrapperGroup:p={},footerWrapperGroup:x={},lineNumbers:w,titlePage:T,verticalAlign:O,column:G,type:z}={}){super("w:sectPr"),this.addHeaderFooterGroup(Eh.HEADER,p),this.addHeaderFooterGroup(Eh.FOOTER,x),z&&this.root.push(new jE(z)),this.root.push(new wE(e,r,n)),this.root.push(new gE(a,i,o,l,c,u,f)),y&&this.root.push(new pE(y)),w&&this.root.push(hE(w)),this.root.push(new yE(g)),G&&this.root.push(new dE(G)),O&&this.root.push(new xx(O)),T!==void 0&&this.root.push(new me("w:titlePg",T)),h&&this.root.push(new bE(h)),this.root.push(new mE(v,b,S))}addHeaderFooterGroup(e,r){r.default&&this.root.push(new bc(e,{type:wn.DEFAULT,id:r.default.View.ReferenceId})),r.first&&this.root.push(new bc(e,{type:wn.FIRST,id:r.first.View.ReferenceId})),r.even&&this.root.push(new bc(e,{type:wn.EVEN,id:r.even.View.ReferenceId}))}}class SE extends oe{constructor(){super("w:body"),le(this,"sections",[])}addSection(e){const r=this.sections.pop();this.root.push(this.createSectionParagraph(r)),this.sections.push(new EE(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const r=new ge({}),n=new Mn({});return n.push(e),r.addChildElement(n),r}}class qa extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",aink:"xmlns:aink",am3d:"xmlns:am3d",w16cex:"xmlns:w16cex",w16cid:"xmlns:w16cid",w16:"xmlns:w16",w16sdtdh:"xmlns:w16sdtdh",w16se:"xmlns:w16se"})}}class kE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class CE extends oe{constructor(e){super("w:background"),this.root.push(new kE({color:e.color===void 0?void 0:Dn(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:yh(e.themeShade),themeTint:e.themeTint===void 0?void 0:yh(e.themeTint)}))}}class _E extends oe{constructor(e){super("w:document"),le(this,"body"),this.root.push(new qa({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex",Ignorable:"w14 w15 wp14"})),this.body=new SE,e.background&&this.root.push(new CE(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class AE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns"})}}class Hn extends oe{constructor(){super("Relationships"),this.root.push(new AE({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,r,n,a){const i=new eE(`rId${e}`,r,n,a);return this.root.push(i),i}get RelationshipCount(){return this.root.length-1}}class wx{constructor(e){le(this,"document"),le(this,"relationships"),this.document=new _E(e),this.relationships=new Hn}get View(){return this.document}get Relationships(){return this.relationships}}class TE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class IE extends oe{constructor(){super("w:wordWrap"),this.root.push(new TE({val:0}))}}const PE=t=>{var e,r;return new bt({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:t.anchorLock},dropCap:{key:"w:dropCap",value:t.dropCap},width:{key:"w:w",value:t.width},height:{key:"w:h",value:t.height},x:{key:"w:x",value:t.position?t.position.x:void 0},y:{key:"w:y",value:t.position?t.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:t.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:t.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=t.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(r=t.space)==null?void 0:r.vertical},rule:{key:"w:hRule",value:t.rule},alignmentX:{key:"w:xAlign",value:t.alignment?t.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:t.alignment?t.alignment.y:void 0},lines:{key:"w:lines",value:t.lines},wrap:{key:"w:wrap",value:t.wrap}}})};class Mn extends Lr{constructor(e){var r,n;if(super("w:pPr"),le(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new ji(e.heading)),e.bullet&&this.push(new ji("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new ji("ListParagraph"))),e.style&&this.push(new ji(e.style)),e.keepNext!==void 0&&this.push(new me("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new me("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new Wj),e.frame&&this.push(PE(e.frame)),e.widowControl!==void 0&&this.push(new me("w:widowControl",e.widowControl)),e.bullet&&this.push(new jh(1,e.bullet.level)),e.numbering&&(this.numberingReferences.push({reference:e.numbering.reference,instance:(r=e.numbering.instance)!=null?r:0}),this.push(new jh(`${e.numbering.reference}-${(n=e.numbering.instance)!=null?n:0}`,e.numbering.level))),e.border&&this.push(new uN(e.border)),e.thematicBreak&&this.push(new dN),e.shading&&this.push(new Ko(e.shading)),e.wordWrap&&this.push(new IE),e.overflowPunctuation&&this.push(new me("w:overflowPunct",e.overflowPunctuation));const a=[...e.rightTabStop!==void 0?[{type:Nh.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:Nh.LEFT,position:e.leftTabStop}]:[]];a.length>0&&this.push(new qj(a)),e.bidirectional!==void 0&&this.push(new me("w:bidi",e.bidirectional)),e.spacing&&this.push(new Gj(e.spacing)),e.indent&&this.push(new fN(e.indent)),e.contextualSpacing!==void 0&&this.push(new me("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new sx(e.alignment)),e.outlineLevel!==void 0&&this.push(new lE(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new me("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new me("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Hs(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof wx)for(const r of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(r.reference,r.instance);return super.prepForXml(e)}}class ge extends gx{constructor(e){if(super("w:p"),le(this,"properties"),typeof e=="string")return this.properties=new Mn({}),this.root.push(this.properties),this.root.push(new Ae(e)),this;if(this.properties=new Mn(e),this.root.push(this.properties),e.text&&this.root.push(new Ae(e.text)),e.children)for(const r of e.children){if(r instanceof aE){this.root.push(r.start);for(const n of r.children)this.root.push(n);this.root.push(r.end);continue}this.root.push(r)}}prepForXml(e){for(const r of this.root)if(r instanceof rE){const n=this.root.indexOf(r),a=new Xd(r.options.children,ix());e.viewWrapper.Relationships.createRelationship(a.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",r.options.link,Zj.EXTERNAL),this.root[n]=a}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}class RE extends oe{constructor(e){super("w:tblGrid");for(const r of e)this.root.push(new OE(r))}}class OE extends oe{constructor(e){super("w:gridCol"),e!==void 0&&this.root.push(new Mr({width:{key:"w:w",value:lt(e)}}))}}const vx={TABLE:"w:tblCellMar",TABLE_CELL:"w:tcMar"};class bx extends Lr{constructor(e,{marginUnitType:r=Ke.DXA,top:n,left:a,bottom:i,right:o}){super(e),n!==void 0&&this.root.push(new Cs("w:top",{type:r,size:n})),a!==void 0&&this.root.push(new Cs("w:left",{type:r,size:a})),i!==void 0&&this.root.push(new Cs("w:bottom",{type:r,size:i})),o!==void 0&&this.root.push(new Cs("w:right",{type:r,size:o}))}}const Ke={AUTO:"auto",DXA:"dxa",PERCENTAGE:"pct"};class Cs extends oe{constructor(e,{type:r=Ke.AUTO,size:n}){super(e);let a=n;r===Ke.PERCENTAGE&&typeof n=="number"&&(a=`${n}%`),this.root.push(new Mr({type:{key:"w:type",value:r},size:{key:"w:w",value:sN(a)}}))}}class DE extends Lr{constructor(e){super("w:tcBorders"),e.top&&this.root.push(new Re("w:top",e.top)),e.start&&this.root.push(new Re("w:start",e.start)),e.left&&this.root.push(new Re("w:left",e.left)),e.bottom&&this.root.push(new Re("w:bottom",e.bottom)),e.end&&this.root.push(new Re("w:end",e.end)),e.right&&this.root.push(new Re("w:right",e.right))}}class FE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class LE extends oe{constructor(e){super("w:gridSpan"),this.root.push(new FE({val:vt(e)}))}}const Nx={CONTINUE:"continue",RESTART:"restart"};class ME extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class kh extends oe{constructor(e){super("w:vMerge"),this.root.push(new ME({val:e}))}}class BE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class zE extends oe{constructor(e){super("w:textDirection"),this.root.push(new BE({val:e}))}}class UE extends Lr{constructor(e){super("w:tcPr"),e.width&&this.root.push(new Cs("w:tcW",e.width)),e.columnSpan&&this.root.push(new LE(e.columnSpan)),e.verticalMerge?this.root.push(new kh(e.verticalMerge)):e.rowSpan&&e.rowSpan>1&&this.root.push(new kh(Nx.RESTART)),e.borders&&this.root.push(new DE(e.borders)),e.shading&&this.root.push(new Ko(e.shading)),e.margins&&this.root.push(new bx(vx.TABLE_CELL,e.margins)),e.textDirection&&this.root.push(new zE(e.textDirection)),e.verticalAlign&&this.root.push(new xx(e.verticalAlign))}}class Ee extends oe{constructor(e){super("w:tc"),this.options=e,this.root.push(new UE(e));for(const r of e.children)this.root.push(r)}prepForXml(e){return this.root[this.root.length-1]instanceof ge||this.root.push(new ge({})),super.prepForXml(e)}}const Ks={style:De.NONE,size:0,color:"auto"},Ys={style:De.SINGLE,size:4,color:"auto"};class jx extends oe{constructor(e){super("w:tblBorders"),e.top?this.root.push(new Re("w:top",e.top)):this.root.push(new Re("w:top",Ys)),e.left?this.root.push(new Re("w:left",e.left)):this.root.push(new Re("w:left",Ys)),e.bottom?this.root.push(new Re("w:bottom",e.bottom)):this.root.push(new Re("w:bottom",Ys)),e.right?this.root.push(new Re("w:right",e.right)):this.root.push(new Re("w:right",Ys)),e.insideHorizontal?this.root.push(new Re("w:insideH",e.insideHorizontal)):this.root.push(new Re("w:insideH",Ys)),e.insideVertical?this.root.push(new Re("w:insideV",e.insideVertical)):this.root.push(new Re("w:insideV",Ys))}}le(jx,"NONE",{top:Ks,bottom:Ks,left:Ks,right:Ks,insideHorizontal:Ks,insideVertical:Ks});class $E extends oe{constructor({horizontalAnchor:e,verticalAnchor:r,absoluteHorizontalPosition:n,relativeHorizontalPosition:a,absoluteVerticalPosition:i,relativeVerticalPosition:o,bottomFromText:l,topFromText:c,leftFromText:u,rightFromText:f,overlap:g}){super("w:tblpPr"),this.root.push(new Mr({leftFromText:{key:"w:leftFromText",value:u===void 0?void 0:lt(u)},rightFromText:{key:"w:rightFromText",value:f===void 0?void 0:lt(f)},topFromText:{key:"w:topFromText",value:c===void 0?void 0:lt(c)},bottomFromText:{key:"w:bottomFromText",value:l===void 0?void 0:lt(l)},absoluteHorizontalPosition:{key:"w:tblpX",value:n===void 0?void 0:_r(n)},absoluteVerticalPosition:{key:"w:tblpY",value:i===void 0?void 0:_r(i)},horizontalAnchor:{key:"w:horzAnchor",value:e===void 0?void 0:e},relativeHorizontalPosition:{key:"w:tblpXSpec",value:a},relativeVerticalPosition:{key:"w:tblpYSpec",value:o},verticalAnchor:{key:"w:vertAnchor",value:r}})),g&&this.root.push(new oN("w:tblOverlap",g))}}class VE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:type"})}}class WE extends oe{constructor(e){super("w:tblLayout"),this.root.push(new VE({type:e}))}}class HE extends Lr{constructor(e){super("w:tblPr"),e.style&&this.root.push(new Is("w:tblStyle",e.style)),e.float&&this.root.push(new $E(e.float)),e.visuallyRightToLeft!==void 0&&this.root.push(new me("w:bidiVisual",e.visuallyRightToLeft)),e.width&&this.root.push(new Cs("w:tblW",e.width)),e.alignment&&this.root.push(new sx(e.alignment)),e.indent&&this.root.push(new Cs("w:tblInd",e.indent)),e.borders&&this.root.push(new jx(e.borders)),e.shading&&this.root.push(new Ko(e.shading)),e.layout&&this.root.push(new WE(e.layout)),e.cellMargin&&this.root.push(new bx(vx.TABLE,e.cellMargin))}}class Ei extends gx{constructor({rows:e,width:r,columnWidths:n=Array(Math.max(...e.map(y=>y.CellCount))).fill(100),margins:a,indent:i,float:o,layout:l,style:c,borders:u,alignment:f,visuallyRightToLeft:g}){super("w:tbl"),this.root.push(new HE({borders:u??{},width:r??{size:100},indent:i,float:o,layout:l,style:c,alignment:f,cellMargin:a,visuallyRightToLeft:g})),this.root.push(new RE(n));for(const y of e)this.root.push(y);e.forEach((y,h)=>{if(h===e.length-1)return;let v=0;y.cells.forEach(b=>{if(b.options.rowSpan&&b.options.rowSpan>1){const S=new Ee({rowSpan:b.options.rowSpan-1,columnSpan:b.options.columnSpan,borders:b.options.borders,children:[],verticalMerge:Nx.CONTINUE});e[h+1].addCellToColumnIndex(S,v)}v+=b.options.columnSpan||1})})}}class GE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}}class qE extends oe{constructor(e,r){super("w:trHeight"),this.root.push(new GE({value:lt(e),rule:r}))}}class KE extends Lr{constructor(e){super("w:trPr"),e.cantSplit!==void 0&&this.root.push(new me("w:cantSplit",e.cantSplit)),e.tableHeader!==void 0&&this.root.push(new me("w:tblHeader",e.tableHeader)),e.height&&this.root.push(new qE(e.height.value,e.height.rule))}}class zt extends oe{constructor(e){super("w:tr"),this.options=e,this.root.push(new KE(e));for(const r of e.children)this.root.push(r)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(e=>e instanceof Ee)}addCellToIndex(e,r){this.root.splice(r+1,0,e)}addCellToColumnIndex(e,r){const n=this.columnIndexToRootIndex(r,!0);this.addCellToIndex(e,n-1)}rootIndexToColumnIndex(e){if(e<1||e>=this.root.length)throw new Error(`cell 'rootIndex' should between 1 to ${this.root.length-1}`);let r=0;for(let n=1;n<e;n++){const a=this.root[n];r+=a.options.columnSpan||1}return r}columnIndexToRootIndex(e,r=!1){if(e<0)throw new Error("cell 'columnIndex' should not less than zero");let n=0,a=1;for(;n<=e;){if(a>=this.root.length){if(r)return this.root.length;throw new Error(`cell 'columnIndex' should not great than ${n-1}`)}const i=this.root[a];a+=1,n+=i&&i.options.columnSpan||1}return a-1}}class YE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class XE extends oe{constructor(){super("Properties"),this.root.push(new YE({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class QE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns"})}}class JE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Ur extends oe{constructor(e,r){super("Default"),this.root.push(new JE({contentType:e,extension:r}))}}class ZE extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class Ut extends oe{constructor(e,r){super("Override"),this.root.push(new ZE({contentType:e,partName:r}))}}class eS extends oe{constructor(){super("Types"),this.root.push(new QE({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Ur("image/png","png")),this.root.push(new Ur("image/jpeg","jpeg")),this.root.push(new Ur("image/jpeg","jpg")),this.root.push(new Ur("image/bmp","bmp")),this.root.push(new Ur("image/gif","gif")),this.root.push(new Ur("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Ur("application/xml","xml")),this.root.push(new Ur("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Ut("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new Ut("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class tS extends oe{constructor(e){super("cp:coreProperties"),this.root.push(new qa({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),e.title&&this.root.push(new hs("dc:title",e.title)),e.subject&&this.root.push(new hs("dc:subject",e.subject)),e.creator&&this.root.push(new hs("dc:creator",e.creator)),e.keywords&&this.root.push(new hs("cp:keywords",e.keywords)),e.description&&this.root.push(new hs("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new hs("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new hs("cp:revision",String(e.revision))),this.root.push(new Ch("dcterms:created")),this.root.push(new Ch("dcterms:modified"))}}class Ch extends oe{constructor(e){super(e),this.root.push(new qa({type:"dcterms:W3CDTF"})),this.root.push(iN(new Date))}}class rS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class sS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class nS extends oe{constructor(e,r){super("property"),this.root.push(new sS({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:r.name})),this.root.push(new aS(r.value))}}class aS extends oe{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class iS extends oe{constructor(e){super("Properties"),le(this,"nextId"),le(this,"properties",[]),this.root.push(new rS({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const r of e)this.addCustomProperty(r)}prepForXml(e){return this.properties.forEach(r=>this.root.push(r)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new nS(this.nextId++,e))}}class oS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let lS=class extends ex{constructor(e,r){super("w:ftr",r),le(this,"refId"),this.refId=e,r||this.root.push(new oS({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class cS{constructor(e,r,n){le(this,"footer"),le(this,"relationships"),this.media=e,this.footer=new lS(r,n),this.relationships=new Hn}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class uS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class dS extends oe{constructor(){super("w:footnoteRef")}}class fS extends Ga{constructor(){super({style:"FootnoteReference"}),this.root.push(new dS)}}const _h={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class jc extends oe{constructor(e){super("w:footnote"),this.root.push(new uS({type:e.type,id:e.id}));for(let r=0;r<e.children.length;r++){const n=e.children[r];r===0&&n.addRunToFront(new fS),this.root.push(n)}}}class mS extends oe{constructor(){super("w:continuationSeparator")}}class hS extends Ga{constructor(){super({}),this.root.push(new mS)}}class pS extends oe{constructor(){super("w:separator")}}class gS extends Ga{constructor(){super({}),this.root.push(new pS)}}class xS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class yS extends oe{constructor(){super("w:footnotes"),this.root.push(new xS({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new jc({id:-1,type:_h.SEPERATOR,children:[new ge({spacing:{after:0,line:240,lineRule:Tu.AUTO},children:[new gS]})]});this.root.push(e);const r=new jc({id:0,type:_h.CONTINUATION_SEPERATOR,children:[new ge({spacing:{after:0,line:240,lineRule:Tu.AUTO},children:[new hS]})]});this.root.push(r)}createFootNote(e,r){const n=new jc({id:e,children:r});this.root.push(n)}}class wS{constructor(){le(this,"footnotess"),le(this,"relationships"),this.footnotess=new yS,this.relationships=new Hn}get View(){return this.footnotess}get Relationships(){return this.relationships}}class vS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let bS=class extends ex{constructor(e,r){super("w:hdr",r),le(this,"refId"),this.refId=e,r||this.root.push(new vS({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class NS{constructor(e,r,n){le(this,"header"),le(this,"relationships"),this.media=e,this.header=new bS(r,n),this.relationships=new Hn}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class jS{constructor(){le(this,"map"),this.map=new Map}addImage(e,r){this.map.set(e,r)}get Array(){return Array.from(this.map.values())}}const vr={BULLET:"bullet"};class ES extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class SS extends oe{constructor(e){super("w:numFmt"),this.root.push(new He({val:e}))}}class kS extends oe{constructor(e){super("w:lvlText"),this.root.push(new He({val:e}))}}class CS extends oe{constructor(e){super("w:lvlJc"),this.root.push(new He({val:e}))}}class _S extends oe{constructor(e){super("w:suff"),this.root.push(new He({val:e}))}}class AS extends oe{constructor(){super("w:isLgl")}}class TS extends oe{constructor({level:e,format:r,text:n,alignment:a=ht.START,start:i=1,style:o,suffix:l,isLegalNumberingStyle:c}){if(super("w:lvl"),le(this,"paragraphProperties"),le(this,"runProperties"),this.root.push(new qd("w:start",vt(i))),r&&this.root.push(new SS(r)),l&&this.root.push(new _S(l)),c&&this.root.push(new AS),n&&this.root.push(new kS(n)),this.root.push(new CS(a)),this.paragraphProperties=new Mn(o&&o.paragraph),this.runProperties=new Hs(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new ES({ilvl:vt(e),tentative:1}))}}class IS extends TS{}class PS extends oe{constructor(e){super("w:multiLevelType"),this.root.push(new He({val:e}))}}class RS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class Ah extends oe{constructor(e,r){super("w:abstractNum"),le(this,"id"),this.root.push(new RS({abstractNumId:vt(e),restartNumberingAfterBreak:0})),this.root.push(new PS("hybridMultilevel")),this.id=e;for(const n of r)this.root.push(new IS(n))}}class OS extends oe{constructor(e){super("w:abstractNumId"),this.root.push(new He({val:e}))}}class DS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{numId:"w:numId"})}}class Th extends oe{constructor(e){if(super("w:num"),le(this,"numId"),le(this,"reference"),le(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new DS({numId:vt(e.numId)})),this.root.push(new OS(vt(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const r of e.overrideLevels)this.root.push(new LS(r.num,r.start))}}class FS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{ilvl:"w:ilvl"})}}class LS extends oe{constructor(e,r){super("w:lvlOverride"),this.root.push(new FS({ilvl:e})),r!==void 0&&this.root.push(new BS(r))}}class MS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class BS extends oe{constructor(e){super("w:startOverride"),this.root.push(new MS({val:e}))}}class zS extends oe{constructor(e){super("w:numbering"),le(this,"abstractNumberingMap",new Map),le(this,"concreteNumberingMap",new Map),le(this,"referenceConfigMap",new Map),le(this,"abstractNumUniqueNumericId",DN()),le(this,"concreteNumUniqueNumericId",FN()),this.root.push(new qa({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const r=new Ah(this.abstractNumUniqueNumericId(),[{level:0,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:Jt(.5),hanging:Jt(.25)}}}},{level:1,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:Jt(1),hanging:Jt(.25)}}}},{level:2,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:2160,hanging:Jt(.25)}}}},{level:3,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:2880,hanging:Jt(.25)}}}},{level:4,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:3600,hanging:Jt(.25)}}}},{level:5,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:4320,hanging:Jt(.25)}}}},{level:6,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:5040,hanging:Jt(.25)}}}},{level:7,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:5760,hanging:Jt(.25)}}}},{level:8,format:vr.BULLET,text:"",alignment:ht.LEFT,style:{paragraph:{indent:{left:6480,hanging:Jt(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new Th({numId:1,abstractNumId:r.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",r);for(const n of e.config)this.abstractNumberingMap.set(n.reference,new Ah(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(e){for(const r of this.abstractNumberingMap.values())this.root.push(r);for(const r of this.concreteNumberingMap.values())this.root.push(r);return super.prepForXml(e)}createConcreteNumberingInstance(e,r){const n=this.abstractNumberingMap.get(e);if(!n)return;const a=`${e}-${r}`;if(this.concreteNumberingMap.has(a))return;const i=this.referenceConfigMap.get(e),o=i&&i[0].start,l={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:e,instance:r,overrideLevels:[o&&Number.isInteger(o)?{num:0,start:o}:{num:0,start:1}]};this.concreteNumberingMap.set(a,new Th(l))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class US extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class $S extends oe{constructor(e){super("w:compatSetting"),this.root.push(new US({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class VS extends oe{constructor(e){super("w:compat"),e.version&&this.root.push(new $S(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new me("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new me("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new me("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new me("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new me("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new me("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new me("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new me("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new me("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new me("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new me("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new me("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new me("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new me("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new me("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new me("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new me("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new me("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new me("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new me("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new me("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new me("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new me("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new me("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new me("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new me("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new me("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new me("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new me("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new me("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new me("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new me("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new me("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new me("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new me("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new me("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new me("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new me("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new me("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new me("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new me("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new me("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new me("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new me("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new me("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new me("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new me("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new me("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new me("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new me("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new me("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new me("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new me("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new me("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new me("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new me("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new me("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new me("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new me("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new me("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new me("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new me("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new me("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new me("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new me("w:cachedColBalance",e.cachedColumnBalance))}}class WS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class HS extends oe{constructor(e){var r,n,a,i;super("w:settings"),this.root.push(new WS({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new me("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new me("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new me("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new me("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new qd("w:defaultTabStop",e.defaultTabStop)),this.root.push(new VS(Rn(Ce({},(r=e.compatibility)!=null?r:{}),{version:(i=(a=(n=e.compatibility)==null?void 0:n.version)!=null?a:e.compatibilityModeVersion)!=null?i:15})))}}class Ex extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{val:"w:val"})}}class GS extends oe{constructor(e){super("w:name"),this.root.push(new Ex({val:e}))}}class qS extends oe{constructor(e){super("w:uiPriority"),this.root.push(new Ex({val:vt(e)}))}}class KS extends xe{constructor(){super(...arguments),le(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class Sx extends oe{constructor(e,r){super("w:style"),this.root.push(new KS(e)),r.name&&this.root.push(new GS(r.name)),r.basedOn&&this.root.push(new Is("w:basedOn",r.basedOn)),r.next&&this.root.push(new Is("w:next",r.next)),r.link&&this.root.push(new Is("w:link",r.link)),r.uiPriority!==void 0&&this.root.push(new qS(r.uiPriority)),r.semiHidden!==void 0&&this.root.push(new me("w:semiHidden",r.semiHidden)),r.unhideWhenUsed!==void 0&&this.root.push(new me("w:unhideWhenUsed",r.unhideWhenUsed)),r.quickFormat!==void 0&&this.root.push(new me("w:qFormat",r.quickFormat))}}class Xo extends Sx{constructor(e){super({type:"paragraph",styleId:e.id},e),le(this,"paragraphProperties"),le(this,"runProperties"),this.paragraphProperties=new Mn(e.paragraph),this.runProperties=new Hs(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Qo extends Sx{constructor(e){super({type:"character",styleId:e.id},Ce({uiPriority:99,unhideWhenUsed:!0},e)),le(this,"runProperties"),this.runProperties=new Hs(e.run),this.root.push(this.runProperties)}}class ms extends Xo{constructor(e){super(Ce({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class YS extends ms{constructor(e){super(Ce({id:"Title",name:"Title"},e))}}class XS extends ms{constructor(e){super(Ce({id:"Heading1",name:"Heading 1"},e))}}class QS extends ms{constructor(e){super(Ce({id:"Heading2",name:"Heading 2"},e))}}class JS extends ms{constructor(e){super(Ce({id:"Heading3",name:"Heading 3"},e))}}class ZS extends ms{constructor(e){super(Ce({id:"Heading4",name:"Heading 4"},e))}}class ek extends ms{constructor(e){super(Ce({id:"Heading5",name:"Heading 5"},e))}}class tk extends ms{constructor(e){super(Ce({id:"Heading6",name:"Heading 6"},e))}}class rk extends ms{constructor(e){super(Ce({id:"Strong",name:"Strong"},e))}}class sk extends Xo{constructor(e){super(Ce({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class nk extends Xo{constructor(e){super(Ce({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Tu.AUTO}},run:{size:20}},e))}}class ak extends Qo{constructor(e){super(Ce({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class ik extends Qo{constructor(e){super(Ce({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class ok extends Qo{constructor(e){super(Ce({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:ax.SINGLE}}},e))}}class Iu extends oe{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const r of e.importedStyles)this.root.push(r);if(e.paragraphStyles)for(const r of e.paragraphStyles)this.root.push(new Xo(r));if(e.characterStyles)for(const r of e.characterStyles)this.root.push(new Qo(r))}}class lk extends oe{constructor(e){super("w:pPrDefault"),this.root.push(new Mn(e))}}class ck extends oe{constructor(e){super("w:rPrDefault"),this.root.push(new Hs(e))}}class uk extends oe{constructor(e){super("w:docDefaults"),le(this,"runPropertiesDefaults"),le(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new ck(e.run),this.paragraphPropertiesDefaults=new lk(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class dk{newInstance(e){const r=Zg.xml2js(e,{compact:!1});let n;for(const o of r.elements||[])o.name==="w:styles"&&(n=o);if(n===void 0)throw new Error("can not find styles element");const a=n.elements||[];return new Iu({initialStyles:new eN(n.attributes),importedStyles:a.map(o=>Hd(o))})}}class Ih{newInstance(e={}){var r;return{initialStyles:new qa({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new uk((r=e.document)!=null?r:{}),new YS(Ce({run:{size:56}},e.title)),new XS(Ce({run:{color:"2E74B5",size:32}},e.heading1)),new QS(Ce({run:{color:"2E74B5",size:26}},e.heading2)),new JS(Ce({run:{color:"1F4D78",size:24}},e.heading3)),new ZS(Ce({run:{color:"2E74B5",italics:!0}},e.heading4)),new ek(Ce({run:{color:"2E74B5"}},e.heading5)),new tk(Ce({run:{color:"1F4D78"}},e.heading6)),new rk(Ce({run:{bold:!0}},e.strong)),new sk(e.listParagraph||{}),new ok(e.hyperlink||{}),new ak(e.footnoteReference||{}),new nk(e.footnoteText||{}),new ik(e.footnoteTextChar||{})]}}}const Si=({id:t,fontKey:e,subsetted:r},n)=>new bt({name:n,attributes:Ce({id:{key:"r:id",value:t}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...r?[new me("w:subsetted",r)]:[]]}),fk=({name:t,altName:e,panose1:r,charset:n,family:a,notTrueType:i,pitch:o,sig:l,embedRegular:c,embedBold:u,embedItalic:f,embedBoldItalic:g})=>new bt({name:"w:font",attributes:{name:{key:"w:name",value:t}},children:[...e?[sa("w:altName",e)]:[],...r?[sa("w:panose1",r)]:[],...n?[sa("w:charset",n)]:[],sa("w:family",a),...i?[new me("w:notTrueType",i)]:[],sa("w:pitch",o),...l?[new bt({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:l.usb0},usb1:{key:"w:usb1",value:l.usb1},usb2:{key:"w:usb2",value:l.usb2},usb3:{key:"w:usb3",value:l.usb3},csb0:{key:"w:csb0",value:l.csb0},csb1:{key:"w:csb1",value:l.csb1}}})]:[],...c?[Si(c,"w:embedRegular")]:[],...u?[Si(u,"w:embedBold")]:[],...f?[Si(f,"w:embedItalic")]:[],...g?[Si(g,"w:embedBoldItalic")]:[]]}),mk=({name:t,index:e,fontKey:r,characterSet:n})=>fk({name:t,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:r,id:`rId${e}`}}),hk=t=>new bt({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:t.map((e,r)=>mk({name:e.name,index:r+1,fontKey:e.fontKey}))});class pk{constructor(e){le(this,"fontTable"),le(this,"relationships"),le(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(r=>Rn(Ce({},r),{fontKey:BN()})),this.fontTable=hk(this.fontOptionsWithKey),this.relationships=new Hn;for(let r=0;r<e.length;r++)this.relationships.createRelationship(r+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[r].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class gk{constructor(e){le(this,"currentRelationshipId",1),le(this,"documentWrapper"),le(this,"headers",[]),le(this,"footers",[]),le(this,"coreProperties"),le(this,"numbering"),le(this,"media"),le(this,"fileRelationships"),le(this,"footnotesWrapper"),le(this,"settings"),le(this,"contentTypes"),le(this,"customProperties"),le(this,"appProperties"),le(this,"styles"),le(this,"comments"),le(this,"fontWrapper");var r,n,a,i,o,l,c,u;if(this.coreProperties=new tS(Rn(Ce({},e),{creator:(r=e.creator)!=null?r:"Un-named",revision:(n=e.revision)!=null?n:1,lastModifiedBy:(a=e.lastModifiedBy)!=null?a:"Un-named"})),this.numbering=new zS(e.numbering?e.numbering:{config:[]}),this.comments=new Vj((i=e.comments)!=null?i:{children:[]}),this.fileRelationships=new Hn,this.customProperties=new iS((o=e.customProperties)!=null?o:[]),this.appProperties=new XE,this.footnotesWrapper=new wS,this.contentTypes=new eS,this.documentWrapper=new wx({background:e.background}),this.settings=new HS({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(l=e.features)==null?void 0:l.trackRevisions,updateFields:(c=e.features)==null?void 0:c.updateFields,defaultTabStop:e.defaultTabStop}),this.media=new jS,e.externalStyles){const f=new dk;this.styles=f.newInstance(e.externalStyles)}else if(e.styles){const g=new Ih().newInstance(e.styles.default);this.styles=new Iu(Ce(Ce({},g),e.styles))}else{const f=new Ih;this.styles=new Iu(f.newInstance())}this.addDefaultRelationships();for(const f of e.sections)this.addSection(f);if(e.footnotes)for(const f in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(f),e.footnotes[f].children);this.fontWrapper=new pk((u=e.fonts)!=null?u:[])}addSection({headers:e={},footers:r={},children:n,properties:a}){this.documentWrapper.View.Body.addSection(Rn(Ce({},a),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:r.default?this.createFooter(r.default):void 0,first:r.first?this.createFooter(r.first):void 0,even:r.even?this.createFooter(r.even):void 0}}));for(const i of n)this.documentWrapper.View.add(i)}createHeader(e){const r=new NS(this.media,this.currentRelationshipId++);for(const n of e.options.children)r.add(n);return this.addHeaderToDocument(r),r}createFooter(e){const r=new cS(this.media,this.currentRelationshipId++);for(const n of e.options.children)r.add(n);return this.addFooterToDocument(r),r}addHeaderToDocument(e,r=wn.DEFAULT){this.headers.push({header:e,type:r}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,r=wn.DEFAULT){this.footers.push({footer:e,type:r}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}}function ki(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kx={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,i){function o(u,f){if(!a[u]){if(!n[u]){var g=typeof ki=="function"&&ki;if(!f&&g)return g(u,!0);if(l)return l(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var h=a[u]={exports:{}};n[u][0].call(h.exports,function(v){var b=n[u][1][v];return o(b||v)},h,h.exports,r,n,a,i)}return a[u].exports}for(var l=typeof ki=="function"&&ki,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,a){var i=r("./utils"),o=r("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var u,f,g,y,h,v,b,S=[],p=0,x=c.length,w=x,T=i.getTypeOf(c)!=="string";p<c.length;)w=x-p,g=T?(u=c[p++],f=p<x?c[p++]:0,p<x?c[p++]:0):(u=c.charCodeAt(p++),f=p<x?c.charCodeAt(p++):0,p<x?c.charCodeAt(p++):0),y=u>>2,h=(3&u)<<4|f>>4,v=1<w?(15&f)<<2|g>>6:64,b=2<w?63&g:64,S.push(l.charAt(y)+l.charAt(h)+l.charAt(v)+l.charAt(b));return S.join("")},a.decode=function(c){var u,f,g,y,h,v,b=0,S=0,p="data:";if(c.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var x,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&w--,c.charAt(c.length-2)===l.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|w):new Array(0|w);b<c.length;)u=l.indexOf(c.charAt(b++))<<2|(y=l.indexOf(c.charAt(b++)))>>4,f=(15&y)<<4|(h=l.indexOf(c.charAt(b++)))>>2,g=(3&h)<<6|(v=l.indexOf(c.charAt(b++))),x[S++]=u,h!==64&&(x[S++]=f),v!==64&&(x[S++]=g);return x}},{"./support":30,"./utils":32}],2:[function(r,n,a){var i=r("./external"),o=r("./stream/DataWorker"),l=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function u(f,g,y,h,v){this.compressedSize=f,this.uncompressedSize=g,this.crc32=y,this.compression=h,this.compressedContent=v}u.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return f.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,g,y){return f.pipe(new l).pipe(new c("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,a){var i=r("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,a){var i=r("./utils"),o=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();n.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(u,f,g,y){var h=o,v=y+g;u^=-1;for(var b=y;b<v;b++)u=u>>>8^h[255&(u^f[b])];return-1^u}(0|c,l,l.length,0):function(u,f,g,y){var h=o,v=y+g;u^=-1;for(var b=y;b<v;b++)u=u>>>8^h[255&(u^f.charCodeAt(b))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(r,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(r,n,a){var i=null;i=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),l=r("./utils"),c=r("./stream/GenericWorker"),u=i?"uint8array":"array";function f(g,y){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}a.magic="\b\0",l.inherits(f,c),f.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,g.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},a.compressWorker=function(g){return new f("Deflate",g)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,a){function i(h,v){var b,S="";for(b=0;b<v;b++)S+=String.fromCharCode(255&h),h>>>=8;return S}function o(h,v,b,S,p,x){var w,T,O=h.file,G=h.compression,z=x!==u.utf8encode,K=l.transformTo("string",x(O.name)),I=l.transformTo("string",u.utf8encode(O.name)),se=O.comment,ae=l.transformTo("string",x(se)),P=l.transformTo("string",u.utf8encode(se)),H=I.length!==O.name.length,C=P.length!==se.length,B="",q="",F="",V=O.dir,D=O.date,J={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(J.crc32=h.crc32,J.compressedSize=h.compressedSize,J.uncompressedSize=h.uncompressedSize);var U=0;v&&(U|=8),z||!H&&!C||(U|=2048);var A=0,Y=0;V&&(A|=16),p==="UNIX"?(Y=798,A|=function(re,ee){var k=re;return re||(k=ee?16893:33204),(65535&k)<<16}(O.unixPermissions,V)):(Y=20,A|=function(re){return 63&(re||0)}(O.dosPermissions)),w=D.getUTCHours(),w<<=6,w|=D.getUTCMinutes(),w<<=5,w|=D.getUTCSeconds()/2,T=D.getUTCFullYear()-1980,T<<=4,T|=D.getUTCMonth()+1,T<<=5,T|=D.getUTCDate(),H&&(q=i(1,1)+i(f(K),4)+I,B+="up"+i(q.length,2)+q),C&&(F=i(1,1)+i(f(ae),4)+P,B+="uc"+i(F.length,2)+F);var X="";return X+=`
\0`,X+=i(U,2),X+=G.magic,X+=i(w,2),X+=i(T,2),X+=i(J.crc32,4),X+=i(J.compressedSize,4),X+=i(J.uncompressedSize,4),X+=i(K.length,2),X+=i(B.length,2),{fileRecord:g.LOCAL_FILE_HEADER+X+K+B,dirRecord:g.CENTRAL_FILE_HEADER+i(Y,2)+X+i(ae.length,2)+"\0\0\0\0"+i(A,4)+i(S,4)+K+B+ae}}var l=r("../utils"),c=r("../stream/GenericWorker"),u=r("../utf8"),f=r("../crc32"),g=r("../signature");function y(h,v,b,S){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=S,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(y,c),y.prototype.push=function(h){var v=h.meta.percent||0,b=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,c.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-S-1))/b:100}}))},y.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var v=this.streamFiles&&!h.file.dir;if(v){var b=o(h,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(h){this.accumulate=!1;var v=this.streamFiles&&!h.file.dir,b=o(h,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(S){return g.DATA_DESCRIPTOR+i(S.crc32,4)+i(S.compressedSize,4)+i(S.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var h=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-h,S=function(p,x,w,T,O){var G=l.transformTo("string",O(T));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(p,2)+i(p,2)+i(x,4)+i(w,4)+i(G.length,2)+G}(this.dirRecords.length,b,h,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(h){this._sources.push(h);var v=this;return h.on("data",function(b){v.processChunk(b)}),h.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),h.on("error",function(b){v.error(b)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(h){var v=this._sources;if(!c.prototype.error.call(this,h))return!1;for(var b=0;b<v.length;b++)try{v[b].error(h)}catch{}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var h=this._sources,v=0;v<h.length;v++)h[v].lock()},n.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,a){var i=r("../compressions"),o=r("./ZipFileWorker");a.generateWorker=function(l,c,u){var f=new o(c.streamFiles,u,c.platform,c.encodeFileName),g=0;try{l.forEach(function(y,h){g++;var v=function(x,w){var T=x||w,O=i[T];if(!O)throw new Error(T+" is not a valid compression method !");return O}(h.options.compression,c.compression),b=h.options.compressionOptions||c.compressionOptions||{},S=h.dir,p=h.date;h._compressWorker(v,b).withStreamInfo("file",{name:y,dir:S,date:p,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(y){f.error(y)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,a){var i=r("./utils"),o=r("./external"),l=r("./utf8"),c=r("./zipEntries"),u=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function g(y){return new o.Promise(function(h,v){var b=y.decompressed.getContentWorker().pipe(new u);b.on("error",function(S){v(S)}).on("end",function(){b.streamInfo.crc32!==y.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}n.exports=function(y,h){var v=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),f.isNode&&f.isStream(y)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",y,!0,h.optimizedBinaryString,h.base64).then(function(b){var S=new c(h);return S.load(b),S}).then(function(b){var S=[o.Promise.resolve(b)],p=b.files;if(h.checkCRC32)for(var x=0;x<p.length;x++)S.push(g(p[x]));return o.Promise.all(S)}).then(function(b){for(var S=b.shift(),p=S.files,x=0;x<p.length;x++){var w=p[x],T=w.fileNameStr,O=i.resolve(w.fileNameStr);v.file(O,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:h.createFolders}),w.dir||(v.file(O).unsafeOriginalName=T)}return S.zipComment.length&&(v.comment=S.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,a){var i=r("../utils"),o=r("../stream/GenericWorker");function l(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(l,o),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,a){var i=r("readable-stream").Readable;function o(l,c,u){i.call(this,c),this._helper=l;var f=this;l.on("data",function(g,y){f.push(g)||f._helper.pause(),u&&u(y)}).on("error",function(g){f.emit("error",g)}).on("end",function(){f.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,a){function i(O,G,z){var K,I=l.getTypeOf(G),se=l.extend(z||{},f);se.date=se.date||new Date,se.compression!==null&&(se.compression=se.compression.toUpperCase()),typeof se.unixPermissions=="string"&&(se.unixPermissions=parseInt(se.unixPermissions,8)),se.unixPermissions&&16384&se.unixPermissions&&(se.dir=!0),se.dosPermissions&&16&se.dosPermissions&&(se.dir=!0),se.dir&&(O=p(O)),se.createFolders&&(K=S(O))&&x.call(this,K,!0);var ae=I==="string"&&se.binary===!1&&se.base64===!1;z&&z.binary!==void 0||(se.binary=!ae),(G instanceof g&&G.uncompressedSize===0||se.dir||!G||G.length===0)&&(se.base64=!1,se.binary=!0,G="",se.compression="STORE",I="string");var P=null;P=G instanceof g||G instanceof c?G:v.isNode&&v.isStream(G)?new b(O,G):l.prepareContent(O,G,se.binary,se.optimizedBinaryString,se.base64);var H=new y(O,P,se);this.files[O]=H}var o=r("./utf8"),l=r("./utils"),c=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),f=r("./defaults"),g=r("./compressedObject"),y=r("./zipObject"),h=r("./generate"),v=r("./nodejsUtils"),b=r("./nodejs/NodejsStreamInputAdapter"),S=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var G=O.lastIndexOf("/");return 0<G?O.substring(0,G):""},p=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},x=function(O,G){return G=G!==void 0?G:f.createFolders,O=p(O),this.files[O]||i.call(this,O,null,{dir:!0,createFolders:G}),this.files[O]};function w(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var G,z,K;for(G in this.files)K=this.files[G],(z=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&O(z,K)},filter:function(O){var G=[];return this.forEach(function(z,K){O(z,K)&&G.push(K)}),G},file:function(O,G,z){if(arguments.length!==1)return O=this.root+O,i.call(this,O,G,z),this;if(w(O)){var K=O;return this.filter(function(se,ae){return!ae.dir&&K.test(se)})}var I=this.files[this.root+O];return I&&!I.dir?I:null},folder:function(O){if(!O)return this;if(w(O))return this.filter(function(I,se){return se.dir&&O.test(I)});var G=this.root+O,z=x.call(this,G),K=this.clone();return K.root=z.name,K},remove:function(O){O=this.root+O;var G=this.files[O];if(G||(O.slice(-1)!=="/"&&(O+="/"),G=this.files[O]),G&&!G.dir)delete this.files[O];else for(var z=this.filter(function(I,se){return se.name.slice(0,O.length)===O}),K=0;K<z.length;K++)delete this.files[z[K].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var G,z={};try{if((z=l.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");l.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var K=z.comment||this.comment||"";G=h.generateWorker(this,z,K)}catch(I){(G=new c("error")).error(I)}return new u(G,z.type||"string",z.mimeType)},generateAsync:function(O,G){return this.generateInternalStream(O).accumulate(G)},generateNodeStream:function(O,G){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(G)}};n.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,a){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,a){var i=r("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}r("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),f=l.charCodeAt(2),g=l.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===u&&this.data[y+2]===f&&this.data[y+3]===g)return y-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),f=l.charCodeAt(2),g=l.charCodeAt(3),y=this.readData(4);return c===y[0]&&u===y[1]&&f===y[2]&&g===y[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,a){var i=r("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,a){var i=r("./Uint8ArrayReader");function o(l){i.call(this,l)}r("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,a){var i=r("./DataReader");function o(l){i.call(this,l)}r("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,a){var i=r("./ArrayReader");function o(l){i.call(this,l)}r("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,a){var i=r("../utils"),o=r("../support"),l=r("./ArrayReader"),c=r("./StringReader"),u=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");n.exports=function(g){var y=i.getTypeOf(g);return i.checkSupport(y),y!=="string"||o.uint8array?y==="nodebuffer"?new u(g):o.uint8array?new f(i.transformTo("uint8array",g)):new l(i.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,a){var i=r("./GenericWorker"),o=r("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,a){var i=r("./GenericWorker"),o=r("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function l(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=i.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(r,n,a){var i=r("../utils"),o=r("./ConvertWorker"),l=r("./GenericWorker"),c=r("../base64"),u=r("../support"),f=r("../external"),g=null;if(u.nodestream)try{g=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(v,b){return new f.Promise(function(S,p){var x=[],w=v._internalType,T=v._outputType,O=v._mimeType;v.on("data",function(G,z){x.push(G),b&&b(z)}).on("error",function(G){x=[],p(G)}).on("end",function(){try{var G=function(z,K,I){switch(z){case"blob":return i.newBlob(i.transformTo("arraybuffer",K),I);case"base64":return c.encode(K);default:return i.transformTo(z,K)}}(T,function(z,K){var I,se=0,ae=null,P=0;for(I=0;I<K.length;I++)P+=K[I].length;switch(z){case"string":return K.join("");case"array":return Array.prototype.concat.apply([],K);case"uint8array":for(ae=new Uint8Array(P),I=0;I<K.length;I++)ae.set(K[I],se),se+=K[I].length;return ae;case"nodebuffer":return Buffer.concat(K);default:throw new Error("concat : unsupported type '"+z+"'")}}(w,x),O);S(G)}catch(z){p(z)}x=[]}).resume()})}function h(v,b,S){var p=b;switch(b){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=b,this._mimeType=S,i.checkSupport(p),this._worker=v.pipe(new o(p)),v.lock()}catch(x){this._worker=new l("error"),this._worker.error(x)}}h.prototype={accumulate:function(v){return y(this,v)},on:function(v,b){var S=this;return v==="data"?this._worker.on(v,function(p){b.call(S,p.data,p.meta)}):this._worker.on(v,function(){i.delay(b,arguments,S)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!r("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,a){for(var i=r("./utils"),o=r("./support"),l=r("./nodejsUtils"),c=r("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}a.utf8encode=function(h){return o.nodebuffer?l.newBufferFrom(h,"utf-8"):function(v){var b,S,p,x,w,T=v.length,O=0;for(x=0;x<T;x++)(64512&(S=v.charCodeAt(x)))==55296&&x+1<T&&(64512&(p=v.charCodeAt(x+1)))==56320&&(S=65536+(S-55296<<10)+(p-56320),x++),O+=S<128?1:S<2048?2:S<65536?3:4;for(b=o.uint8array?new Uint8Array(O):new Array(O),x=w=0;w<O;x++)(64512&(S=v.charCodeAt(x)))==55296&&x+1<T&&(64512&(p=v.charCodeAt(x+1)))==56320&&(S=65536+(S-55296<<10)+(p-56320),x++),S<128?b[w++]=S:(S<2048?b[w++]=192|S>>>6:(S<65536?b[w++]=224|S>>>12:(b[w++]=240|S>>>18,b[w++]=128|S>>>12&63),b[w++]=128|S>>>6&63),b[w++]=128|63&S);return b}(h)},a.utf8decode=function(h){return o.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(v){var b,S,p,x,w=v.length,T=new Array(2*w);for(b=S=0;b<w;)if((p=v[b++])<128)T[S++]=p;else if(4<(x=u[p]))T[S++]=65533,b+=x-1;else{for(p&=x===2?31:x===3?15:7;1<x&&b<w;)p=p<<6|63&v[b++],x--;1<x?T[S++]=65533:p<65536?T[S++]=p:(p-=65536,T[S++]=55296|p>>10&1023,T[S++]=56320|1023&p)}return T.length!==S&&(T.subarray?T=T.subarray(0,S):T.length=S),i.applyFromCharCode(T)}(h=i.transformTo(o.uint8array?"uint8array":"array",h))},i.inherits(g,c),g.prototype.processChunk=function(h){var v=i.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var S=function(x,w){var T;for((w=w||x.length)>x.length&&(w=x.length),T=w-1;0<=T&&(192&x[T])==128;)T--;return T<0||T===0?w:T+u[x[T]]>w?T:w}(v),p=v;S!==v.length&&(o.uint8array?(p=v.subarray(0,S),this.leftOver=v.subarray(S,v.length)):(p=v.slice(0,S),this.leftOver=v.slice(S,v.length))),this.push({data:a.utf8decode(p),meta:h.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=g,i.inherits(y,c),y.prototype.processChunk=function(h){this.push({data:a.utf8encode(h.data),meta:h.meta})},a.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,a){var i=r("./support"),o=r("./base64"),l=r("./nodejsUtils"),c=r("./external");function u(b){return b}function f(b,S){for(var p=0;p<b.length;++p)S[p]=255&b.charCodeAt(p);return S}r("setimmediate"),a.newBlob=function(b,S){a.checkSupport("blob");try{return new Blob([b],{type:S})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(b),p.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(b,S,p){var x=[],w=0,T=b.length;if(T<=p)return String.fromCharCode.apply(null,b);for(;w<T;)S==="array"||S==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(w,Math.min(w+p,T)))):x.push(String.fromCharCode.apply(null,b.subarray(w,Math.min(w+p,T)))),w+=p;return x.join("")},stringifyByChar:function(b){for(var S="",p=0;p<b.length;p++)S+=String.fromCharCode(b[p]);return S},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function y(b){var S=65536,p=a.getTypeOf(b),x=!0;if(p==="uint8array"?x=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(x=g.applyCanBeUsed.nodebuffer),x)for(;1<S;)try{return g.stringifyByChunk(b,p,S)}catch{S=Math.floor(S/2)}return g.stringifyByChar(b)}function h(b,S){for(var p=0;p<b.length;p++)S[p]=b[p];return S}a.applyFromCharCode=y;var v={};v.string={string:u,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,l.allocBuffer(b.length))}},v.array={string:y,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return l.newBufferFrom(b)}},v.arraybuffer={string:function(b){return y(new Uint8Array(b))},array:function(b){return h(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return l.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:y,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return l.newBufferFrom(b)}},v.nodebuffer={string:y,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,S){if(S=S||"",!b)return S;a.checkSupport(b);var p=a.getTypeOf(S);return v[p][b](S)},a.resolve=function(b){for(var S=b.split("/"),p=[],x=0;x<S.length;x++){var w=S[x];w==="."||w===""&&x!==0&&x!==S.length-1||(w===".."?p.pop():p.push(w))}return p.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var S,p,x="";for(p=0;p<(b||"").length;p++)x+="\\x"+((S=b.charCodeAt(p))<16?"0":"")+S.toString(16).toUpperCase();return x},a.delay=function(b,S,p){setImmediate(function(){b.apply(p||null,S||[])})},a.inherits=function(b,S){function p(){}p.prototype=S.prototype,b.prototype=new p},a.extend=function(){var b,S,p={};for(b=0;b<arguments.length;b++)for(S in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],S)&&p[S]===void 0&&(p[S]=arguments[b][S]);return p},a.prepareContent=function(b,S,p,x,w){return c.Promise.resolve(S).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new c.Promise(function(O,G){var z=new FileReader;z.onload=function(K){O(K.target.result)},z.onerror=function(K){G(K.target.error)},z.readAsArrayBuffer(T)}):T}).then(function(T){var O=a.getTypeOf(T);return O?(O==="arraybuffer"?T=a.transformTo("uint8array",T):O==="string"&&(w?T=o.decode(T):p&&x!==!0&&(T=function(G){return f(G,i.uint8array?new Uint8Array(G.length):new Array(G.length))}(T))),T):c.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),l=r("./signature"),c=r("./zipEntry"),u=r("./support");function f(g){this.files=[],this.loadOptions=g}f.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(y)+", expected "+o.pretty(g)+")")}},isSignature:function(g,y){var h=this.reader.index;this.reader.setIndex(g);var v=this.reader.readString(4)===y;return this.reader.setIndex(h),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=u.uint8array?"uint8array":"array",h=o.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,h,v=this.zip64EndOfCentralSize-44;0<v;)g=this.reader.readInt(2),y=this.reader.readInt(4),h=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var v=y-h;if(0<v)this.isSignature(y,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(g){this.reader=i(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),l=r("./compressedObject"),c=r("./crc32"),u=r("./utf8"),f=r("./compressions"),g=r("./support");function y(h,v){this.options=h,this.loadOptions=v}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var v,b;if(h.skip(22),this.fileNameLength=h.readInt(2),b=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(S){for(var p in f)if(Object.prototype.hasOwnProperty.call(f,p)&&f[p].magic===S)return f[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var v=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(v),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var v,b,S,p=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<p;)v=h.readInt(2),b=h.readInt(2),S=h.readData(b),this.extraFields[v]={id:v,length:b,value:S};h.setIndex(p)},handleUTF8:function(){var h=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var p=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var v=i(h.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var v=i(h.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(h.length-5))}return null}},n.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,a){function i(v,b,S){this.name=v,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=b,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var o=r("./stream/StreamHelper"),l=r("./stream/DataWorker"),c=r("./utf8"),u=r("./compressedObject"),f=r("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,S="string";try{if(!v)throw new Error("No output type specified.");var p=(S=v.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!p&&(b=b.pipe(new c.Utf8EncodeWorker)),!x&&p&&(b=b.pipe(new c.Utf8DecodeWorker))}catch(w){(b=new f("error")).error(w)}return new o(b,S,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(S,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new l(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<g.length;h++)i.prototype[g[h]]=y;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,a){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,f=new c(v),g=i.document.createTextNode("");f.observe(g,{characterData:!0}),o=function(){g.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var y=new i.MessageChannel;y.port1.onmessage=v,o=function(){y.port2.postMessage(0)}}var h=[];function v(){var b,S;l=!0;for(var p=h.length;p;){for(S=h,h=[],b=-1;++b<p;)S[b]();p=h.length}l=!1}n.exports=function(b){h.push(b)!==1||l||o()}}).call(this,typeof gr<"u"?gr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,a){var i=r("immediate");function o(){}var l={},c=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,p!==o&&b(this,p)}function y(p,x,w){this.promise=p,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function h(p,x,w){i(function(){var T;try{T=x(w)}catch(O){return l.reject(p,O)}T===p?l.reject(p,new TypeError("Cannot resolve promise with itself")):l.resolve(p,T)})}function v(p){var x=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof x=="function")return function(){x.apply(p,arguments)}}function b(p,x){var w=!1;function T(z){w||(w=!0,l.reject(p,z))}function O(z){w||(w=!0,l.resolve(p,z))}var G=S(function(){x(O,T)});G.status==="error"&&T(G.value)}function S(p,x){var w={};try{w.value=p(x),w.status="success"}catch(T){w.status="error",w.value=T}return w}(n.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var x=this.constructor;return this.then(function(w){return x.resolve(p()).then(function(){return w})},function(w){return x.resolve(p()).then(function(){throw w})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,x){if(typeof p!="function"&&this.state===u||typeof x!="function"&&this.state===c)return this;var w=new this.constructor(o);return this.state!==f?h(w,this.state===u?p:x,this.outcome):this.queue.push(new y(w,p,x)),w},y.prototype.callFulfilled=function(p){l.resolve(this.promise,p)},y.prototype.otherCallFulfilled=function(p){h(this.promise,this.onFulfilled,p)},y.prototype.callRejected=function(p){l.reject(this.promise,p)},y.prototype.otherCallRejected=function(p){h(this.promise,this.onRejected,p)},l.resolve=function(p,x){var w=S(v,x);if(w.status==="error")return l.reject(p,w.value);var T=w.value;if(T)b(p,T);else{p.state=u,p.outcome=x;for(var O=-1,G=p.queue.length;++O<G;)p.queue[O].callFulfilled(x)}return p},l.reject=function(p,x){p.state=c,p.outcome=x;for(var w=-1,T=p.queue.length;++w<T;)p.queue[w].callRejected(x);return p},g.resolve=function(p){return p instanceof this?p:l.resolve(new this(o),p)},g.reject=function(p){var x=new this(o);return l.reject(x,p)},g.all=function(p){var x=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=p.length,T=!1;if(!w)return this.resolve([]);for(var O=new Array(w),G=0,z=-1,K=new this(o);++z<w;)I(p[z],z);return K;function I(se,ae){x.resolve(se).then(function(P){O[ae]=P,++G!==w||T||(T=!0,l.resolve(K,O))},function(P){T||(T=!0,l.reject(K,P))})}},g.race=function(p){var x=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=p.length,T=!1;if(!w)return this.resolve([]);for(var O=-1,G=new this(o);++O<w;)z=p[O],x.resolve(z).then(function(K){T||(T=!0,l.resolve(G,K))},function(K){T||(T=!0,l.reject(G,K))});var z;return G}},{immediate:36}],38:[function(r,n,a){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,a){var i=r("./zlib/deflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/messages"),u=r("./zlib/zstream"),f=Object.prototype.toString,g=0,y=-1,h=0,v=8;function b(p){if(!(this instanceof b))return new b(p);this.options=o.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},p||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(w!==g)throw new Error(c[w]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var T;if(T=typeof x.dictionary=="string"?l.string2buf(x.dictionary):f.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(w=i.deflateSetDictionary(this.strm,T))!==g)throw new Error(c[w]);this._dict_set=!0}}function S(p,x){var w=new b(x);if(w.push(p,!0),w.err)throw w.msg||c[w.err];return w.result}b.prototype.push=function(p,x){var w,T,O=this.strm,G=this.options.chunkSize;if(this.ended)return!1;T=x===~~x?x:x===!0?4:0,typeof p=="string"?O.input=l.string2buf(p):f.call(p)==="[object ArrayBuffer]"?O.input=new Uint8Array(p):O.input=p,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(G),O.next_out=0,O.avail_out=G),(w=i.deflate(O,T))!==1&&w!==g)return this.onEnd(w),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&w!==1);return T===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===g):T!==2||(this.onEnd(g),!(O.avail_out=0))},b.prototype.onData=function(p){this.chunks.push(p)},b.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Deflate=b,a.deflate=S,a.deflateRaw=function(p,x){return(x=x||{}).raw=!0,S(p,x)},a.gzip=function(p,x){return(x=x||{}).gzip=!0,S(p,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,a){var i=r("./zlib/inflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/constants"),u=r("./zlib/messages"),f=r("./zlib/zstream"),g=r("./zlib/gzheader"),y=Object.prototype.toString;function h(b){if(!(this instanceof h))return new h(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||b&&b.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var p=i.inflateInit2(this.strm,S.windowBits);if(p!==c.Z_OK)throw new Error(u[p]);this.header=new g,i.inflateGetHeader(this.strm,this.header)}function v(b,S){var p=new h(S);if(p.push(b,!0),p.err)throw p.msg||u[p.err];return p.result}h.prototype.push=function(b,S){var p,x,w,T,O,G,z=this.strm,K=this.options.chunkSize,I=this.options.dictionary,se=!1;if(this.ended)return!1;x=S===~~S?S:S===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof b=="string"?z.input=l.binstring2buf(b):y.call(b)==="[object ArrayBuffer]"?z.input=new Uint8Array(b):z.input=b,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(K),z.next_out=0,z.avail_out=K),(p=i.inflate(z,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&I&&(G=typeof I=="string"?l.string2buf(I):y.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,p=i.inflateSetDictionary(this.strm,G)),p===c.Z_BUF_ERROR&&se===!0&&(p=c.Z_OK,se=!1),p!==c.Z_STREAM_END&&p!==c.Z_OK)return this.onEnd(p),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&p!==c.Z_STREAM_END&&(z.avail_in!==0||x!==c.Z_FINISH&&x!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=l.utf8border(z.output,z.next_out),T=z.next_out-w,O=l.buf2string(z.output,w),z.next_out=T,z.avail_out=K-T,T&&o.arraySet(z.output,z.output,w,T,0),this.onData(O)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(se=!0)}while((0<z.avail_in||z.avail_out===0)&&p!==c.Z_STREAM_END);return p===c.Z_STREAM_END&&(x=c.Z_FINISH),x===c.Z_FINISH?(p=i.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===c.Z_OK):x!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(z.avail_out=0))},h.prototype.onData=function(b){this.chunks.push(b)},h.prototype.onEnd=function(b){b===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=h,a.inflate=v,a.inflateRaw=function(b,S){return(S=S||{}).raw=!0,v(b,S)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}}return c},a.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,f,g,y){if(u.subarray&&c.subarray)c.set(u.subarray(f,f+g),y);else for(var h=0;h<g;h++)c[y+h]=u[f+h]},flattenChunks:function(c){var u,f,g,y,h,v;for(u=g=0,f=c.length;u<f;u++)g+=c[u].length;for(v=new Uint8Array(g),u=y=0,f=c.length;u<f;u++)h=c[u],v.set(h,y),y+=h.length;return v}},l={arraySet:function(c,u,f,g,y){for(var h=0;h<g;h++)c[y+h]=u[f+h]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(i)},{}],42:[function(r,n,a){var i=r("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(g,y){if(y<65537&&(g.subarray&&l||!g.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(g,y));for(var h="",v=0;v<y;v++)h+=String.fromCharCode(g[v]);return h}c[254]=c[254]=1,a.string2buf=function(g){var y,h,v,b,S,p=g.length,x=0;for(b=0;b<p;b++)(64512&(h=g.charCodeAt(b)))==55296&&b+1<p&&(64512&(v=g.charCodeAt(b+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),b++),x+=h<128?1:h<2048?2:h<65536?3:4;for(y=new i.Buf8(x),b=S=0;S<x;b++)(64512&(h=g.charCodeAt(b)))==55296&&b+1<p&&(64512&(v=g.charCodeAt(b+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),b++),h<128?y[S++]=h:(h<2048?y[S++]=192|h>>>6:(h<65536?y[S++]=224|h>>>12:(y[S++]=240|h>>>18,y[S++]=128|h>>>12&63),y[S++]=128|h>>>6&63),y[S++]=128|63&h);return y},a.buf2binstring=function(g){return f(g,g.length)},a.binstring2buf=function(g){for(var y=new i.Buf8(g.length),h=0,v=y.length;h<v;h++)y[h]=g.charCodeAt(h);return y},a.buf2string=function(g,y){var h,v,b,S,p=y||g.length,x=new Array(2*p);for(h=v=0;h<p;)if((b=g[h++])<128)x[v++]=b;else if(4<(S=c[b]))x[v++]=65533,h+=S-1;else{for(b&=S===2?31:S===3?15:7;1<S&&h<p;)b=b<<6|63&g[h++],S--;1<S?x[v++]=65533:b<65536?x[v++]=b:(b-=65536,x[v++]=55296|b>>10&1023,x[v++]=56320|1023&b)}return f(x,v)},a.utf8border=function(g,y){var h;for((y=y||g.length)>g.length&&(y=g.length),h=y-1;0<=h&&(192&g[h])==128;)h--;return h<0||h===0?y:h+c[g[h]]>y?h:y}},{"./common":41}],43:[function(r,n,a){n.exports=function(i,o,l,c){for(var u=65535&i|0,f=i>>>16&65535|0,g=0;l!==0;){for(l-=g=2e3<l?2e3:l;f=f+(u=u+o[c++]|0)|0,--g;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(r,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,a){var i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l,c,u){var f=i,g=u+c;o^=-1;for(var y=u;y<g;y++)o=o>>>8^f[255&(o^l[y])];return-1^o}},{}],46:[function(r,n,a){var i,o=r("../utils/common"),l=r("./trees"),c=r("./adler32"),u=r("./crc32"),f=r("./messages"),g=0,y=4,h=0,v=-2,b=-1,S=4,p=2,x=8,w=9,T=286,O=30,G=19,z=2*T+1,K=15,I=3,se=258,ae=se+I+1,P=42,H=113,C=1,B=2,q=3,F=4;function V(N,ie){return N.msg=f[ie],ie}function D(N){return(N<<1)-(4<N?9:0)}function J(N){for(var ie=N.length;0<=--ie;)N[ie]=0}function U(N){var ie=N.state,_=ie.pending;_>N.avail_out&&(_=N.avail_out),_!==0&&(o.arraySet(N.output,ie.pending_buf,ie.pending_out,_,N.next_out),N.next_out+=_,ie.pending_out+=_,N.total_out+=_,N.avail_out-=_,ie.pending-=_,ie.pending===0&&(ie.pending_out=0))}function A(N,ie){l._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,ie),N.block_start=N.strstart,U(N.strm)}function Y(N,ie){N.pending_buf[N.pending++]=ie}function X(N,ie){N.pending_buf[N.pending++]=ie>>>8&255,N.pending_buf[N.pending++]=255&ie}function re(N,ie){var _,d,m=N.max_chain_length,j=N.strstart,$=N.prev_length,te=N.nice_match,W=N.strstart>N.w_size-ae?N.strstart-(N.w_size-ae):0,ce=N.window,fe=N.w_mask,de=N.prev,pe=N.strstart+se,ve=ce[j+$-1],be=ce[j+$];N.prev_length>=N.good_match&&(m>>=2),te>N.lookahead&&(te=N.lookahead);do if(ce[(_=ie)+$]===be&&ce[_+$-1]===ve&&ce[_]===ce[j]&&ce[++_]===ce[j+1]){j+=2,_++;do;while(ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&ce[++j]===ce[++_]&&j<pe);if(d=se-(pe-j),j=pe-se,$<d){if(N.match_start=ie,te<=($=d))break;ve=ce[j+$-1],be=ce[j+$]}}while((ie=de[ie&fe])>W&&--m!=0);return $<=N.lookahead?$:N.lookahead}function ee(N){var ie,_,d,m,j,$,te,W,ce,fe,de=N.w_size;do{if(m=N.window_size-N.lookahead-N.strstart,N.strstart>=de+(de-ae)){for(o.arraySet(N.window,N.window,de,de,0),N.match_start-=de,N.strstart-=de,N.block_start-=de,ie=_=N.hash_size;d=N.head[--ie],N.head[ie]=de<=d?d-de:0,--_;);for(ie=_=de;d=N.prev[--ie],N.prev[ie]=de<=d?d-de:0,--_;);m+=de}if(N.strm.avail_in===0)break;if($=N.strm,te=N.window,W=N.strstart+N.lookahead,ce=m,fe=void 0,fe=$.avail_in,ce<fe&&(fe=ce),_=fe===0?0:($.avail_in-=fe,o.arraySet(te,$.input,$.next_in,fe,W),$.state.wrap===1?$.adler=c($.adler,te,fe,W):$.state.wrap===2&&($.adler=u($.adler,te,fe,W)),$.next_in+=fe,$.total_in+=fe,fe),N.lookahead+=_,N.lookahead+N.insert>=I)for(j=N.strstart-N.insert,N.ins_h=N.window[j],N.ins_h=(N.ins_h<<N.hash_shift^N.window[j+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[j+I-1])&N.hash_mask,N.prev[j&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=j,j++,N.insert--,!(N.lookahead+N.insert<I)););}while(N.lookahead<ae&&N.strm.avail_in!==0)}function k(N,ie){for(var _,d;;){if(N.lookahead<ae){if(ee(N),N.lookahead<ae&&ie===g)return C;if(N.lookahead===0)break}if(_=0,N.lookahead>=I&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+I-1])&N.hash_mask,_=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),_!==0&&N.strstart-_<=N.w_size-ae&&(N.match_length=re(N,_)),N.match_length>=I)if(d=l._tr_tally(N,N.strstart-N.match_start,N.match_length-I),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=I){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+I-1])&N.hash_mask,_=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else d=l._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(d&&(A(N,!1),N.strm.avail_out===0))return C}return N.insert=N.strstart<I-1?N.strstart:I-1,ie===y?(A(N,!0),N.strm.avail_out===0?q:F):N.last_lit&&(A(N,!1),N.strm.avail_out===0)?C:B}function E(N,ie){for(var _,d,m;;){if(N.lookahead<ae){if(ee(N),N.lookahead<ae&&ie===g)return C;if(N.lookahead===0)break}if(_=0,N.lookahead>=I&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+I-1])&N.hash_mask,_=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=I-1,_!==0&&N.prev_length<N.max_lazy_match&&N.strstart-_<=N.w_size-ae&&(N.match_length=re(N,_),N.match_length<=5&&(N.strategy===1||N.match_length===I&&4096<N.strstart-N.match_start)&&(N.match_length=I-1)),N.prev_length>=I&&N.match_length<=N.prev_length){for(m=N.strstart+N.lookahead-I,d=l._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-I),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=m&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+I-1])&N.hash_mask,_=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=I-1,N.strstart++,d&&(A(N,!1),N.strm.avail_out===0))return C}else if(N.match_available){if((d=l._tr_tally(N,0,N.window[N.strstart-1]))&&A(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return C}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(d=l._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<I-1?N.strstart:I-1,ie===y?(A(N,!0),N.strm.avail_out===0?q:F):N.last_lit&&(A(N,!1),N.strm.avail_out===0)?C:B}function Z(N,ie,_,d,m){this.good_length=N,this.max_lazy=ie,this.nice_length=_,this.max_chain=d,this.func=m}function M(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*G+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(K+1),this.heap=new o.Buf16(2*T+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(N){var ie;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=p,(ie=N.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?P:H,N.adler=ie.wrap===2?0:1,ie.last_flush=g,l._tr_init(ie),h):V(N,v)}function L(N){var ie=R(N);return ie===h&&function(_){_.window_size=2*_.w_size,J(_.head),_.max_lazy_match=i[_.level].max_lazy,_.good_match=i[_.level].good_length,_.nice_match=i[_.level].nice_length,_.max_chain_length=i[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=I-1,_.match_available=0,_.ins_h=0}(N.state),ie}function ne(N,ie,_,d,m,j){if(!N)return v;var $=1;if(ie===b&&(ie=6),d<0?($=0,d=-d):15<d&&($=2,d-=16),m<1||w<m||_!==x||d<8||15<d||ie<0||9<ie||j<0||S<j)return V(N,v);d===8&&(d=9);var te=new M;return(N.state=te).strm=N,te.wrap=$,te.gzhead=null,te.w_bits=d,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=m+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+I-1)/I),te.window=new o.Buf8(2*te.w_size),te.head=new o.Buf16(te.hash_size),te.prev=new o.Buf16(te.w_size),te.lit_bufsize=1<<m+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new o.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=ie,te.strategy=j,te.method=_,L(N)}i=[new Z(0,0,0,0,function(N,ie){var _=65535;for(_>N.pending_buf_size-5&&(_=N.pending_buf_size-5);;){if(N.lookahead<=1){if(ee(N),N.lookahead===0&&ie===g)return C;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var d=N.block_start+_;if((N.strstart===0||N.strstart>=d)&&(N.lookahead=N.strstart-d,N.strstart=d,A(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-ae&&(A(N,!1),N.strm.avail_out===0))return C}return N.insert=0,ie===y?(A(N,!0),N.strm.avail_out===0?q:F):(N.strstart>N.block_start&&(A(N,!1),N.strm.avail_out),C)}),new Z(4,4,8,4,k),new Z(4,5,16,8,k),new Z(4,6,32,32,k),new Z(4,4,16,16,E),new Z(8,16,32,32,E),new Z(8,16,128,128,E),new Z(8,32,128,256,E),new Z(32,128,258,1024,E),new Z(32,258,258,4096,E)],a.deflateInit=function(N,ie){return ne(N,ie,x,15,8,0)},a.deflateInit2=ne,a.deflateReset=L,a.deflateResetKeep=R,a.deflateSetHeader=function(N,ie){return N&&N.state?N.state.wrap!==2?v:(N.state.gzhead=ie,h):v},a.deflate=function(N,ie){var _,d,m,j;if(!N||!N.state||5<ie||ie<0)return N?V(N,v):v;if(d=N.state,!N.output||!N.input&&N.avail_in!==0||d.status===666&&ie!==y)return V(N,N.avail_out===0?-5:v);if(d.strm=N,_=d.last_flush,d.last_flush=ie,d.status===P)if(d.wrap===2)N.adler=0,Y(d,31),Y(d,139),Y(d,8),d.gzhead?(Y(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),Y(d,255&d.gzhead.time),Y(d,d.gzhead.time>>8&255),Y(d,d.gzhead.time>>16&255),Y(d,d.gzhead.time>>24&255),Y(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),Y(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(Y(d,255&d.gzhead.extra.length),Y(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(N.adler=u(N.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(Y(d,0),Y(d,0),Y(d,0),Y(d,0),Y(d,0),Y(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),Y(d,3),d.status=H);else{var $=x+(d.w_bits-8<<4)<<8;$|=(2<=d.strategy||d.level<2?0:d.level<6?1:d.level===6?2:3)<<6,d.strstart!==0&&($|=32),$+=31-$%31,d.status=H,X(d,$),d.strstart!==0&&(X(d,N.adler>>>16),X(d,65535&N.adler)),N.adler=1}if(d.status===69)if(d.gzhead.extra){for(m=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),U(N),m=d.pending,d.pending!==d.pending_buf_size));)Y(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(d.status===73)if(d.gzhead.name){m=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),U(N),m=d.pending,d.pending===d.pending_buf_size)){j=1;break}j=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,Y(d,j)}while(j!==0);d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),j===0&&(d.gzindex=0,d.status=91)}else d.status=91;if(d.status===91)if(d.gzhead.comment){m=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),U(N),m=d.pending,d.pending===d.pending_buf_size)){j=1;break}j=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,Y(d,j)}while(j!==0);d.gzhead.hcrc&&d.pending>m&&(N.adler=u(N.adler,d.pending_buf,d.pending-m,m)),j===0&&(d.status=103)}else d.status=103;if(d.status===103&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&U(N),d.pending+2<=d.pending_buf_size&&(Y(d,255&N.adler),Y(d,N.adler>>8&255),N.adler=0,d.status=H)):d.status=H),d.pending!==0){if(U(N),N.avail_out===0)return d.last_flush=-1,h}else if(N.avail_in===0&&D(ie)<=D(_)&&ie!==y)return V(N,-5);if(d.status===666&&N.avail_in!==0)return V(N,-5);if(N.avail_in!==0||d.lookahead!==0||ie!==g&&d.status!==666){var te=d.strategy===2?function(W,ce){for(var fe;;){if(W.lookahead===0&&(ee(W),W.lookahead===0)){if(ce===g)return C;break}if(W.match_length=0,fe=l._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,fe&&(A(W,!1),W.strm.avail_out===0))return C}return W.insert=0,ce===y?(A(W,!0),W.strm.avail_out===0?q:F):W.last_lit&&(A(W,!1),W.strm.avail_out===0)?C:B}(d,ie):d.strategy===3?function(W,ce){for(var fe,de,pe,ve,be=W.window;;){if(W.lookahead<=se){if(ee(W),W.lookahead<=se&&ce===g)return C;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=I&&0<W.strstart&&(de=be[pe=W.strstart-1])===be[++pe]&&de===be[++pe]&&de===be[++pe]){ve=W.strstart+se;do;while(de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&de===be[++pe]&&pe<ve);W.match_length=se-(ve-pe),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=I?(fe=l._tr_tally(W,1,W.match_length-I),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(fe=l._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),fe&&(A(W,!1),W.strm.avail_out===0))return C}return W.insert=0,ce===y?(A(W,!0),W.strm.avail_out===0?q:F):W.last_lit&&(A(W,!1),W.strm.avail_out===0)?C:B}(d,ie):i[d.level].func(d,ie);if(te!==q&&te!==F||(d.status=666),te===C||te===q)return N.avail_out===0&&(d.last_flush=-1),h;if(te===B&&(ie===1?l._tr_align(d):ie!==5&&(l._tr_stored_block(d,0,0,!1),ie===3&&(J(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),U(N),N.avail_out===0))return d.last_flush=-1,h}return ie!==y?h:d.wrap<=0?1:(d.wrap===2?(Y(d,255&N.adler),Y(d,N.adler>>8&255),Y(d,N.adler>>16&255),Y(d,N.adler>>24&255),Y(d,255&N.total_in),Y(d,N.total_in>>8&255),Y(d,N.total_in>>16&255),Y(d,N.total_in>>24&255)):(X(d,N.adler>>>16),X(d,65535&N.adler)),U(N),0<d.wrap&&(d.wrap=-d.wrap),d.pending!==0?h:1)},a.deflateEnd=function(N){var ie;return N&&N.state?(ie=N.state.status)!==P&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==H&&ie!==666?V(N,v):(N.state=null,ie===H?V(N,-3):h):v},a.deflateSetDictionary=function(N,ie){var _,d,m,j,$,te,W,ce,fe=ie.length;if(!N||!N.state||(j=(_=N.state).wrap)===2||j===1&&_.status!==P||_.lookahead)return v;for(j===1&&(N.adler=c(N.adler,ie,fe,0)),_.wrap=0,fe>=_.w_size&&(j===0&&(J(_.head),_.strstart=0,_.block_start=0,_.insert=0),ce=new o.Buf8(_.w_size),o.arraySet(ce,ie,fe-_.w_size,_.w_size,0),ie=ce,fe=_.w_size),$=N.avail_in,te=N.next_in,W=N.input,N.avail_in=fe,N.next_in=0,N.input=ie,ee(_);_.lookahead>=I;){for(d=_.strstart,m=_.lookahead-(I-1);_.ins_h=(_.ins_h<<_.hash_shift^_.window[d+I-1])&_.hash_mask,_.prev[d&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=d,d++,--m;);_.strstart=d,_.lookahead=I-1,ee(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=I-1,_.match_available=0,N.next_in=te,N.input=W,N.avail_in=$,_.wrap=j,h},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,a){n.exports=function(i,o){var l,c,u,f,g,y,h,v,b,S,p,x,w,T,O,G,z,K,I,se,ae,P,H,C,B;l=i.state,c=i.next_in,C=i.input,u=c+(i.avail_in-5),f=i.next_out,B=i.output,g=f-(o-i.avail_out),y=f+(i.avail_out-257),h=l.dmax,v=l.wsize,b=l.whave,S=l.wnext,p=l.window,x=l.hold,w=l.bits,T=l.lencode,O=l.distcode,G=(1<<l.lenbits)-1,z=(1<<l.distbits)-1;e:do{w<15&&(x+=C[c++]<<w,w+=8,x+=C[c++]<<w,w+=8),K=T[x&G];t:for(;;){if(x>>>=I=K>>>24,w-=I,(I=K>>>16&255)===0)B[f++]=65535&K;else{if(!(16&I)){if(!(64&I)){K=T[(65535&K)+(x&(1<<I)-1)];continue t}if(32&I){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}se=65535&K,(I&=15)&&(w<I&&(x+=C[c++]<<w,w+=8),se+=x&(1<<I)-1,x>>>=I,w-=I),w<15&&(x+=C[c++]<<w,w+=8,x+=C[c++]<<w,w+=8),K=O[x&z];r:for(;;){if(x>>>=I=K>>>24,w-=I,!(16&(I=K>>>16&255))){if(!(64&I)){K=O[(65535&K)+(x&(1<<I)-1)];continue r}i.msg="invalid distance code",l.mode=30;break e}if(ae=65535&K,w<(I&=15)&&(x+=C[c++]<<w,(w+=8)<I&&(x+=C[c++]<<w,w+=8)),h<(ae+=x&(1<<I)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(x>>>=I,w-=I,(I=f-g)<ae){if(b<(I=ae-I)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(H=p,(P=0)===S){if(P+=v-I,I<se){for(se-=I;B[f++]=p[P++],--I;);P=f-ae,H=B}}else if(S<I){if(P+=v+S-I,(I-=S)<se){for(se-=I;B[f++]=p[P++],--I;);if(P=0,S<se){for(se-=I=S;B[f++]=p[P++],--I;);P=f-ae,H=B}}}else if(P+=S-I,I<se){for(se-=I;B[f++]=p[P++],--I;);P=f-ae,H=B}for(;2<se;)B[f++]=H[P++],B[f++]=H[P++],B[f++]=H[P++],se-=3;se&&(B[f++]=H[P++],1<se&&(B[f++]=H[P++]))}else{for(P=f-ae;B[f++]=B[P++],B[f++]=B[P++],B[f++]=B[P++],2<(se-=3););se&&(B[f++]=B[P++],1<se&&(B[f++]=B[P++]))}break}}break}}while(c<u&&f<y);c-=se=w>>3,x&=(1<<(w-=se<<3))-1,i.next_in=c,i.next_out=f,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=f<y?y-f+257:257-(f-y),l.hold=x,l.bits=w}},{}],49:[function(r,n,a){var i=r("../utils/common"),o=r("./adler32"),l=r("./crc32"),c=r("./inffast"),u=r("./inftrees"),f=1,g=2,y=0,h=-2,v=1,b=852,S=592;function p(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(P){var H;return P&&P.state?(H=P.state,P.total_in=P.total_out=H.total=0,P.msg="",H.wrap&&(P.adler=1&H.wrap),H.mode=v,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new i.Buf32(b),H.distcode=H.distdyn=new i.Buf32(S),H.sane=1,H.back=-1,y):h}function T(P){var H;return P&&P.state?((H=P.state).wsize=0,H.whave=0,H.wnext=0,w(P)):h}function O(P,H){var C,B;return P&&P.state?(B=P.state,H<0?(C=0,H=-H):(C=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?h:(B.window!==null&&B.wbits!==H&&(B.window=null),B.wrap=C,B.wbits=H,T(P))):h}function G(P,H){var C,B;return P?(B=new x,(P.state=B).window=null,(C=O(P,H))!==y&&(P.state=null),C):h}var z,K,I=!0;function se(P){if(I){var H;for(z=new i.Buf32(512),K=new i.Buf32(32),H=0;H<144;)P.lens[H++]=8;for(;H<256;)P.lens[H++]=9;for(;H<280;)P.lens[H++]=7;for(;H<288;)P.lens[H++]=8;for(u(f,P.lens,0,288,z,0,P.work,{bits:9}),H=0;H<32;)P.lens[H++]=5;u(g,P.lens,0,32,K,0,P.work,{bits:5}),I=!1}P.lencode=z,P.lenbits=9,P.distcode=K,P.distbits=5}function ae(P,H,C,B){var q,F=P.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new i.Buf8(F.wsize)),B>=F.wsize?(i.arraySet(F.window,H,C-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(B<(q=F.wsize-F.wnext)&&(q=B),i.arraySet(F.window,H,C-B,q,F.wnext),(B-=q)?(i.arraySet(F.window,H,C-B,B,0),F.wnext=B,F.whave=F.wsize):(F.wnext+=q,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=q))),0}a.inflateReset=T,a.inflateReset2=O,a.inflateResetKeep=w,a.inflateInit=function(P){return G(P,15)},a.inflateInit2=G,a.inflate=function(P,H){var C,B,q,F,V,D,J,U,A,Y,X,re,ee,k,E,Z,M,R,L,ne,N,ie,_,d,m=0,j=new i.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return h;(C=P.state).mode===12&&(C.mode=13),V=P.next_out,q=P.output,J=P.avail_out,F=P.next_in,B=P.input,D=P.avail_in,U=C.hold,A=C.bits,Y=D,X=J,ie=y;e:for(;;)switch(C.mode){case v:if(C.wrap===0){C.mode=13;break}for(;A<16;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(2&C.wrap&&U===35615){j[C.check=0]=255&U,j[1]=U>>>8&255,C.check=l(C.check,j,2,0),A=U=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&U)<<8)+(U>>8))%31){P.msg="incorrect header check",C.mode=30;break}if((15&U)!=8){P.msg="unknown compression method",C.mode=30;break}if(A-=4,N=8+(15&(U>>>=4)),C.wbits===0)C.wbits=N;else if(N>C.wbits){P.msg="invalid window size",C.mode=30;break}C.dmax=1<<N,P.adler=C.check=1,C.mode=512&U?10:12,A=U=0;break;case 2:for(;A<16;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(C.flags=U,(255&C.flags)!=8){P.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){P.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=U>>8&1),512&C.flags&&(j[0]=255&U,j[1]=U>>>8&255,C.check=l(C.check,j,2,0)),A=U=0,C.mode=3;case 3:for(;A<32;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.head&&(C.head.time=U),512&C.flags&&(j[0]=255&U,j[1]=U>>>8&255,j[2]=U>>>16&255,j[3]=U>>>24&255,C.check=l(C.check,j,4,0)),A=U=0,C.mode=4;case 4:for(;A<16;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.head&&(C.head.xflags=255&U,C.head.os=U>>8),512&C.flags&&(j[0]=255&U,j[1]=U>>>8&255,C.check=l(C.check,j,2,0)),A=U=0,C.mode=5;case 5:if(1024&C.flags){for(;A<16;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.length=U,C.head&&(C.head.extra_len=U),512&C.flags&&(j[0]=255&U,j[1]=U>>>8&255,C.check=l(C.check,j,2,0)),A=U=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(D<(re=C.length)&&(re=D),re&&(C.head&&(N=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),i.arraySet(C.head.extra,B,F,re,N)),512&C.flags&&(C.check=l(C.check,B,re,F)),D-=re,F+=re,C.length-=re),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(D===0)break e;for(re=0;N=B[F+re++],C.head&&N&&C.length<65536&&(C.head.name+=String.fromCharCode(N)),N&&re<D;);if(512&C.flags&&(C.check=l(C.check,B,re,F)),D-=re,F+=re,N)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(D===0)break e;for(re=0;N=B[F+re++],C.head&&N&&C.length<65536&&(C.head.comment+=String.fromCharCode(N)),N&&re<D;);if(512&C.flags&&(C.check=l(C.check,B,re,F)),D-=re,F+=re,N)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;A<16;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(U!==(65535&C.check)){P.msg="header crc mismatch",C.mode=30;break}A=U=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),P.adler=C.check=0,C.mode=12;break;case 10:for(;A<32;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}P.adler=C.check=p(U),A=U=0,C.mode=11;case 11:if(C.havedict===0)return P.next_out=V,P.avail_out=J,P.next_in=F,P.avail_in=D,C.hold=U,C.bits=A,2;P.adler=C.check=1,C.mode=12;case 12:if(H===5||H===6)break e;case 13:if(C.last){U>>>=7&A,A-=7&A,C.mode=27;break}for(;A<3;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}switch(C.last=1&U,A-=1,3&(U>>>=1)){case 0:C.mode=14;break;case 1:if(se(C),C.mode=20,H!==6)break;U>>>=2,A-=2;break e;case 2:C.mode=17;break;case 3:P.msg="invalid block type",C.mode=30}U>>>=2,A-=2;break;case 14:for(U>>>=7&A,A-=7&A;A<32;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if((65535&U)!=(U>>>16^65535)){P.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&U,A=U=0,C.mode=15,H===6)break e;case 15:C.mode=16;case 16:if(re=C.length){if(D<re&&(re=D),J<re&&(re=J),re===0)break e;i.arraySet(q,B,F,re,V),D-=re,F+=re,J-=re,V+=re,C.length-=re;break}C.mode=12;break;case 17:for(;A<14;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(C.nlen=257+(31&U),U>>>=5,A-=5,C.ndist=1+(31&U),U>>>=5,A-=5,C.ncode=4+(15&U),U>>>=4,A-=4,286<C.nlen||30<C.ndist){P.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;A<3;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.lens[$[C.have++]]=7&U,U>>>=3,A-=3}for(;C.have<19;)C.lens[$[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,_={bits:C.lenbits},ie=u(0,C.lens,0,19,C.lencode,0,C.work,_),C.lenbits=_.bits,ie){P.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;Z=(m=C.lencode[U&(1<<C.lenbits)-1])>>>16&255,M=65535&m,!((E=m>>>24)<=A);){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(M<16)U>>>=E,A-=E,C.lens[C.have++]=M;else{if(M===16){for(d=E+2;A<d;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(U>>>=E,A-=E,C.have===0){P.msg="invalid bit length repeat",C.mode=30;break}N=C.lens[C.have-1],re=3+(3&U),U>>>=2,A-=2}else if(M===17){for(d=E+3;A<d;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}A-=E,N=0,re=3+(7&(U>>>=E)),U>>>=3,A-=3}else{for(d=E+7;A<d;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}A-=E,N=0,re=11+(127&(U>>>=E)),U>>>=7,A-=7}if(C.have+re>C.nlen+C.ndist){P.msg="invalid bit length repeat",C.mode=30;break}for(;re--;)C.lens[C.have++]=N}}if(C.mode===30)break;if(C.lens[256]===0){P.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,_={bits:C.lenbits},ie=u(f,C.lens,0,C.nlen,C.lencode,0,C.work,_),C.lenbits=_.bits,ie){P.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,_={bits:C.distbits},ie=u(g,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,_),C.distbits=_.bits,ie){P.msg="invalid distances set",C.mode=30;break}if(C.mode=20,H===6)break e;case 20:C.mode=21;case 21:if(6<=D&&258<=J){P.next_out=V,P.avail_out=J,P.next_in=F,P.avail_in=D,C.hold=U,C.bits=A,c(P,X),V=P.next_out,q=P.output,J=P.avail_out,F=P.next_in,B=P.input,D=P.avail_in,U=C.hold,A=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;Z=(m=C.lencode[U&(1<<C.lenbits)-1])>>>16&255,M=65535&m,!((E=m>>>24)<=A);){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(Z&&!(240&Z)){for(R=E,L=Z,ne=M;Z=(m=C.lencode[ne+((U&(1<<R+L)-1)>>R)])>>>16&255,M=65535&m,!(R+(E=m>>>24)<=A);){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}U>>>=R,A-=R,C.back+=R}if(U>>>=E,A-=E,C.back+=E,C.length=M,Z===0){C.mode=26;break}if(32&Z){C.back=-1,C.mode=12;break}if(64&Z){P.msg="invalid literal/length code",C.mode=30;break}C.extra=15&Z,C.mode=22;case 22:if(C.extra){for(d=C.extra;A<d;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.length+=U&(1<<C.extra)-1,U>>>=C.extra,A-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;Z=(m=C.distcode[U&(1<<C.distbits)-1])>>>16&255,M=65535&m,!((E=m>>>24)<=A);){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(!(240&Z)){for(R=E,L=Z,ne=M;Z=(m=C.distcode[ne+((U&(1<<R+L)-1)>>R)])>>>16&255,M=65535&m,!(R+(E=m>>>24)<=A);){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}U>>>=R,A-=R,C.back+=R}if(U>>>=E,A-=E,C.back+=E,64&Z){P.msg="invalid distance code",C.mode=30;break}C.offset=M,C.extra=15&Z,C.mode=24;case 24:if(C.extra){for(d=C.extra;A<d;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}C.offset+=U&(1<<C.extra)-1,U>>>=C.extra,A-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){P.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(J===0)break e;if(re=X-J,C.offset>re){if((re=C.offset-re)>C.whave&&C.sane){P.msg="invalid distance too far back",C.mode=30;break}ee=re>C.wnext?(re-=C.wnext,C.wsize-re):C.wnext-re,re>C.length&&(re=C.length),k=C.window}else k=q,ee=V-C.offset,re=C.length;for(J<re&&(re=J),J-=re,C.length-=re;q[V++]=k[ee++],--re;);C.length===0&&(C.mode=21);break;case 26:if(J===0)break e;q[V++]=C.length,J--,C.mode=21;break;case 27:if(C.wrap){for(;A<32;){if(D===0)break e;D--,U|=B[F++]<<A,A+=8}if(X-=J,P.total_out+=X,C.total+=X,X&&(P.adler=C.check=C.flags?l(C.check,q,X,V-X):o(C.check,q,X,V-X)),X=J,(C.flags?U:p(U))!==C.check){P.msg="incorrect data check",C.mode=30;break}A=U=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;A<32;){if(D===0)break e;D--,U+=B[F++]<<A,A+=8}if(U!==(4294967295&C.total)){P.msg="incorrect length check",C.mode=30;break}A=U=0}C.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return h}return P.next_out=V,P.avail_out=J,P.next_in=F,P.avail_in=D,C.hold=U,C.bits=A,(C.wsize||X!==P.avail_out&&C.mode<30&&(C.mode<27||H!==4))&&ae(P,P.output,P.next_out,X-P.avail_out)?(C.mode=31,-4):(Y-=P.avail_in,X-=P.avail_out,P.total_in+=Y,P.total_out+=X,C.total+=X,C.wrap&&X&&(P.adler=C.check=C.flags?l(C.check,q,X,P.next_out-X):o(C.check,q,X,P.next_out-X)),P.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(Y==0&&X===0||H===4)&&ie===y&&(ie=-5),ie)},a.inflateEnd=function(P){if(!P||!P.state)return h;var H=P.state;return H.window&&(H.window=null),P.state=null,y},a.inflateGetHeader=function(P,H){var C;return P&&P.state&&2&(C=P.state).wrap?((C.head=H).done=!1,y):h},a.inflateSetDictionary=function(P,H){var C,B=H.length;return P&&P.state?(C=P.state).wrap!==0&&C.mode!==11?h:C.mode===11&&o(1,H,B,0)!==C.check?-3:ae(P,H,B,B)?(C.mode=31,-4):(C.havedict=1,y):h},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,a){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,g,y,h,v,b,S,p){var x,w,T,O,G,z,K,I,se,ae=p.bits,P=0,H=0,C=0,B=0,q=0,F=0,V=0,D=0,J=0,U=0,A=null,Y=0,X=new i.Buf16(16),re=new i.Buf16(16),ee=null,k=0;for(P=0;P<=15;P++)X[P]=0;for(H=0;H<h;H++)X[g[y+H]]++;for(q=ae,B=15;1<=B&&X[B]===0;B--);if(B<q&&(q=B),B===0)return v[b++]=20971520,v[b++]=20971520,p.bits=1,0;for(C=1;C<B&&X[C]===0;C++);for(q<C&&(q=C),P=D=1;P<=15;P++)if(D<<=1,(D-=X[P])<0)return-1;if(0<D&&(f===0||B!==1))return-1;for(re[1]=0,P=1;P<15;P++)re[P+1]=re[P]+X[P];for(H=0;H<h;H++)g[y+H]!==0&&(S[re[g[y+H]]++]=H);if(z=f===0?(A=ee=S,19):f===1?(A=o,Y-=257,ee=l,k-=257,256):(A=c,ee=u,-1),P=C,G=b,V=H=U=0,T=-1,O=(J=1<<(F=q))-1,f===1&&852<J||f===2&&592<J)return 1;for(;;){for(K=P-V,se=S[H]<z?(I=0,S[H]):S[H]>z?(I=ee[k+S[H]],A[Y+S[H]]):(I=96,0),x=1<<P-V,C=w=1<<F;v[G+(U>>V)+(w-=x)]=K<<24|I<<16|se|0,w!==0;);for(x=1<<P-1;U&x;)x>>=1;if(x!==0?(U&=x-1,U+=x):U=0,H++,--X[P]==0){if(P===B)break;P=g[y+S[H]]}if(q<P&&(U&O)!==T){for(V===0&&(V=q),G+=C,D=1<<(F=P-V);F+V<B&&!((D-=X[F+V])<=0);)F++,D<<=1;if(J+=1<<F,f===1&&852<J||f===2&&592<J)return 1;v[T=U&O]=q<<24|F<<16|G-b|0}}return U!==0&&(v[G+U]=P-V<<24|64<<16|0),p.bits=q,0}},{"../utils/common":41}],51:[function(r,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,a){var i=r("../utils/common"),o=0,l=1;function c(m){for(var j=m.length;0<=--j;)m[j]=0}var u=0,f=29,g=256,y=g+1+f,h=30,v=19,b=2*y+1,S=15,p=16,x=7,w=256,T=16,O=17,G=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=new Array(2*(y+2));c(ae);var P=new Array(2*h);c(P);var H=new Array(512);c(H);var C=new Array(256);c(C);var B=new Array(f);c(B);var q,F,V,D=new Array(h);function J(m,j,$,te,W){this.static_tree=m,this.extra_bits=j,this.extra_base=$,this.elems=te,this.max_length=W,this.has_stree=m&&m.length}function U(m,j){this.dyn_tree=m,this.max_code=0,this.stat_desc=j}function A(m){return m<256?H[m]:H[256+(m>>>7)]}function Y(m,j){m.pending_buf[m.pending++]=255&j,m.pending_buf[m.pending++]=j>>>8&255}function X(m,j,$){m.bi_valid>p-$?(m.bi_buf|=j<<m.bi_valid&65535,Y(m,m.bi_buf),m.bi_buf=j>>p-m.bi_valid,m.bi_valid+=$-p):(m.bi_buf|=j<<m.bi_valid&65535,m.bi_valid+=$)}function re(m,j,$){X(m,$[2*j],$[2*j+1])}function ee(m,j){for(var $=0;$|=1&m,m>>>=1,$<<=1,0<--j;);return $>>>1}function k(m,j,$){var te,W,ce=new Array(S+1),fe=0;for(te=1;te<=S;te++)ce[te]=fe=fe+$[te-1]<<1;for(W=0;W<=j;W++){var de=m[2*W+1];de!==0&&(m[2*W]=ee(ce[de]++,de))}}function E(m){var j;for(j=0;j<y;j++)m.dyn_ltree[2*j]=0;for(j=0;j<h;j++)m.dyn_dtree[2*j]=0;for(j=0;j<v;j++)m.bl_tree[2*j]=0;m.dyn_ltree[2*w]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function Z(m){8<m.bi_valid?Y(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function M(m,j,$,te){var W=2*j,ce=2*$;return m[W]<m[ce]||m[W]===m[ce]&&te[j]<=te[$]}function R(m,j,$){for(var te=m.heap[$],W=$<<1;W<=m.heap_len&&(W<m.heap_len&&M(j,m.heap[W+1],m.heap[W],m.depth)&&W++,!M(j,te,m.heap[W],m.depth));)m.heap[$]=m.heap[W],$=W,W<<=1;m.heap[$]=te}function L(m,j,$){var te,W,ce,fe,de=0;if(m.last_lit!==0)for(;te=m.pending_buf[m.d_buf+2*de]<<8|m.pending_buf[m.d_buf+2*de+1],W=m.pending_buf[m.l_buf+de],de++,te===0?re(m,W,j):(re(m,(ce=C[W])+g+1,j),(fe=z[ce])!==0&&X(m,W-=B[ce],fe),re(m,ce=A(--te),$),(fe=K[ce])!==0&&X(m,te-=D[ce],fe)),de<m.last_lit;);re(m,w,j)}function ne(m,j){var $,te,W,ce=j.dyn_tree,fe=j.stat_desc.static_tree,de=j.stat_desc.has_stree,pe=j.stat_desc.elems,ve=-1;for(m.heap_len=0,m.heap_max=b,$=0;$<pe;$++)ce[2*$]!==0?(m.heap[++m.heap_len]=ve=$,m.depth[$]=0):ce[2*$+1]=0;for(;m.heap_len<2;)ce[2*(W=m.heap[++m.heap_len]=ve<2?++ve:0)]=1,m.depth[W]=0,m.opt_len--,de&&(m.static_len-=fe[2*W+1]);for(j.max_code=ve,$=m.heap_len>>1;1<=$;$--)R(m,ce,$);for(W=pe;$=m.heap[1],m.heap[1]=m.heap[m.heap_len--],R(m,ce,1),te=m.heap[1],m.heap[--m.heap_max]=$,m.heap[--m.heap_max]=te,ce[2*W]=ce[2*$]+ce[2*te],m.depth[W]=(m.depth[$]>=m.depth[te]?m.depth[$]:m.depth[te])+1,ce[2*$+1]=ce[2*te+1]=W,m.heap[1]=W++,R(m,ce,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(be,je){var dt,Ge,cr,Pe,Ka,Jo,wr=je.dyn_tree,Jd=je.max_code,Tx=je.stat_desc.static_tree,Ix=je.stat_desc.has_stree,Px=je.stat_desc.extra_bits,Zd=je.stat_desc.extra_base,Gn=je.stat_desc.max_length,Ya=0;for(Pe=0;Pe<=S;Pe++)be.bl_count[Pe]=0;for(wr[2*be.heap[be.heap_max]+1]=0,dt=be.heap_max+1;dt<b;dt++)Gn<(Pe=wr[2*wr[2*(Ge=be.heap[dt])+1]+1]+1)&&(Pe=Gn,Ya++),wr[2*Ge+1]=Pe,Jd<Ge||(be.bl_count[Pe]++,Ka=0,Zd<=Ge&&(Ka=Px[Ge-Zd]),Jo=wr[2*Ge],be.opt_len+=Jo*(Pe+Ka),Ix&&(be.static_len+=Jo*(Tx[2*Ge+1]+Ka)));if(Ya!==0){do{for(Pe=Gn-1;be.bl_count[Pe]===0;)Pe--;be.bl_count[Pe]--,be.bl_count[Pe+1]+=2,be.bl_count[Gn]--,Ya-=2}while(0<Ya);for(Pe=Gn;Pe!==0;Pe--)for(Ge=be.bl_count[Pe];Ge!==0;)Jd<(cr=be.heap[--dt])||(wr[2*cr+1]!==Pe&&(be.opt_len+=(Pe-wr[2*cr+1])*wr[2*cr],wr[2*cr+1]=Pe),Ge--)}}(m,j),k(ce,ve,m.bl_count)}function N(m,j,$){var te,W,ce=-1,fe=j[1],de=0,pe=7,ve=4;for(fe===0&&(pe=138,ve=3),j[2*($+1)+1]=65535,te=0;te<=$;te++)W=fe,fe=j[2*(te+1)+1],++de<pe&&W===fe||(de<ve?m.bl_tree[2*W]+=de:W!==0?(W!==ce&&m.bl_tree[2*W]++,m.bl_tree[2*T]++):de<=10?m.bl_tree[2*O]++:m.bl_tree[2*G]++,ce=W,ve=(de=0)===fe?(pe=138,3):W===fe?(pe=6,3):(pe=7,4))}function ie(m,j,$){var te,W,ce=-1,fe=j[1],de=0,pe=7,ve=4;for(fe===0&&(pe=138,ve=3),te=0;te<=$;te++)if(W=fe,fe=j[2*(te+1)+1],!(++de<pe&&W===fe)){if(de<ve)for(;re(m,W,m.bl_tree),--de!=0;);else W!==0?(W!==ce&&(re(m,W,m.bl_tree),de--),re(m,T,m.bl_tree),X(m,de-3,2)):de<=10?(re(m,O,m.bl_tree),X(m,de-3,3)):(re(m,G,m.bl_tree),X(m,de-11,7));ce=W,ve=(de=0)===fe?(pe=138,3):W===fe?(pe=6,3):(pe=7,4)}}c(D);var _=!1;function d(m,j,$,te){X(m,(u<<1)+(te?1:0),3),function(W,ce,fe,de){Z(W),Y(W,fe),Y(W,~fe),i.arraySet(W.pending_buf,W.window,ce,fe,W.pending),W.pending+=fe}(m,j,$)}a._tr_init=function(m){_||(function(){var j,$,te,W,ce,fe=new Array(S+1);for(W=te=0;W<f-1;W++)for(B[W]=te,j=0;j<1<<z[W];j++)C[te++]=W;for(C[te-1]=W,W=ce=0;W<16;W++)for(D[W]=ce,j=0;j<1<<K[W];j++)H[ce++]=W;for(ce>>=7;W<h;W++)for(D[W]=ce<<7,j=0;j<1<<K[W]-7;j++)H[256+ce++]=W;for($=0;$<=S;$++)fe[$]=0;for(j=0;j<=143;)ae[2*j+1]=8,j++,fe[8]++;for(;j<=255;)ae[2*j+1]=9,j++,fe[9]++;for(;j<=279;)ae[2*j+1]=7,j++,fe[7]++;for(;j<=287;)ae[2*j+1]=8,j++,fe[8]++;for(k(ae,y+1,fe),j=0;j<h;j++)P[2*j+1]=5,P[2*j]=ee(j,5);q=new J(ae,z,g+1,y,S),F=new J(P,K,0,h,S),V=new J(new Array(0),I,0,v,x)}(),_=!0),m.l_desc=new U(m.dyn_ltree,q),m.d_desc=new U(m.dyn_dtree,F),m.bl_desc=new U(m.bl_tree,V),m.bi_buf=0,m.bi_valid=0,E(m)},a._tr_stored_block=d,a._tr_flush_block=function(m,j,$,te){var W,ce,fe=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(de){var pe,ve=4093624447;for(pe=0;pe<=31;pe++,ve>>>=1)if(1&ve&&de.dyn_ltree[2*pe]!==0)return o;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return l;for(pe=32;pe<g;pe++)if(de.dyn_ltree[2*pe]!==0)return l;return o}(m)),ne(m,m.l_desc),ne(m,m.d_desc),fe=function(de){var pe;for(N(de,de.dyn_ltree,de.l_desc.max_code),N(de,de.dyn_dtree,de.d_desc.max_code),ne(de,de.bl_desc),pe=v-1;3<=pe&&de.bl_tree[2*se[pe]+1]===0;pe--);return de.opt_len+=3*(pe+1)+5+5+4,pe}(m),W=m.opt_len+3+7>>>3,(ce=m.static_len+3+7>>>3)<=W&&(W=ce)):W=ce=$+5,$+4<=W&&j!==-1?d(m,j,$,te):m.strategy===4||ce===W?(X(m,2+(te?1:0),3),L(m,ae,P)):(X(m,4+(te?1:0),3),function(de,pe,ve,be){var je;for(X(de,pe-257,5),X(de,ve-1,5),X(de,be-4,4),je=0;je<be;je++)X(de,de.bl_tree[2*se[je]+1],3);ie(de,de.dyn_ltree,pe-1),ie(de,de.dyn_dtree,ve-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,fe+1),L(m,m.dyn_ltree,m.dyn_dtree)),E(m),te&&Z(m)},a._tr_tally=function(m,j,$){return m.pending_buf[m.d_buf+2*m.last_lit]=j>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&j,m.pending_buf[m.l_buf+m.last_lit]=255&$,m.last_lit++,j===0?m.dyn_ltree[2*$]++:(m.matches++,j--,m.dyn_ltree[2*(C[$]+g+1)]++,m.dyn_dtree[2*A(j)]++),m.last_lit===m.lit_bufsize-1},a._tr_align=function(m){X(m,2,3),re(m,w,ae),function(j){j.bi_valid===16?(Y(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(r,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,a){(function(i){(function(o,l){if(!o.setImmediate){var c,u,f,g,y=1,h={},v=!1,b=o.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(o);S=S&&S.setTimeout?S:o,c={}.toString.call(o.process)==="[object process]"?function(T){Se.nextTick(function(){x(T)})}:function(){if(o.postMessage&&!o.importScripts){var T=!0,O=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=O,T}}()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(T){o.postMessage(g+T,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(T){x(T.data)},function(T){f.port2.postMessage(T)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(T){var O=b.createElement("script");O.onreadystatechange=function(){x(T),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(T){setTimeout(x,0,T)},S.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var O=new Array(arguments.length-1),G=0;G<O.length;G++)O[G]=arguments[G+1];var z={callback:T,args:O};return h[y]=z,c(y),y++},S.clearImmediate=p}function p(T){delete h[T]}function x(T){if(v)setTimeout(x,0,T);else{var O=h[T];if(O){v=!0;try{(function(G){var z=G.callback,K=G.args;switch(K.length){case 0:z();break;case 1:z(K[0]);break;case 2:z(K[0],K[1]);break;case 3:z(K[0],K[1],K[2]);break;default:z.apply(l,K)}})(O)}finally{p(T),v=!1}}}}function w(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(g)===0&&x(+T.data.slice(g.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof gr<"u"?gr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(kx);var xk=kx.exports;const yk=pg(xk);var jo={exports:{}},wk={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function vk(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(e,r){return wk[r]}):t}var bk=vk,Pu=bk,Ph=zd.Stream,Nk="    ";function jk(t,e){typeof e!="object"&&(e={indent:e});var r=e.stream?new Ph:null,n="",a=!1,i=e.indent?e.indent===!0?Nk:e.indent:"",o=!0;function l(y){o?Se.nextTick(y):y()}function c(y,h){if(h!==void 0&&(n+=h),y&&!a&&(r=r||new Ph,a=!0),y&&a){var v=n;l(function(){r.emit("data",v)}),n=""}}function u(y,h){Qd(c,Eo(y,i,i?1:0),h)}function f(){if(r){var y=n;l(function(){r.emit("data",y),r.emit("end"),r.readable=!1,r.emit("close")})}}function g(y){var h=y.encoding||"UTF-8",v={version:"1.0",encoding:h};y.standalone&&(v.standalone=y.standalone),u({"?xml":{_attr:v}}),n=n.replace("/>","?>")}return l(function(){o=!1}),e.declaration&&g(e.declaration),t&&t.forEach?t.forEach(function(y,h){var v;h+1===t.length&&(v=f),u(y,v)}):u(t,f),r?(r.readable=!0,r):n}function Ek(){var t=Array.prototype.slice.call(arguments),e={_elem:Eo(t)};return e.push=function(r){if(!this.append)throw new Error("not assigned to a parent!");var n=this,a=this._elem.indent;Qd(this.append,Eo(r,a,this._elem.icount+(a?1:0)),function(){n.append(!0)})},e.close=function(r){r!==void 0&&this.push(r),this.end&&this.end()},e}function Sk(t,e){return new Array(e||0).join(t||"")}function Eo(t,e,r){r=r||0;var n=Sk(e,r),a,i=t,o=!1;if(typeof t=="object"){var l=Object.keys(t);if(a=l[0],i=t[a],i&&i._elem)return i._elem.name=a,i._elem.icount=r,i._elem.indent=e,i._elem.indents=n,i._elem.interrupt=i,i._elem}var c=[],u=[],f;function g(y){var h=Object.keys(y);h.forEach(function(v){c.push(kk(v,y[v]))})}switch(typeof i){case"object":if(i===null)break;i._attr&&g(i._attr),i._cdata&&u.push(("<![CDATA["+i._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),i.forEach&&(f=!1,u.push(""),i.forEach(function(y){if(typeof y=="object"){var h=Object.keys(y)[0];h=="_attr"?g(y._attr):u.push(Eo(y,e,r+1))}else u.pop(),f=!0,u.push(Pu(y))}),f||u.push(""));break;default:u.push(Pu(i))}return{name:a,interrupt:o,attributes:c,content:u,icount:r,indents:n,indent:e}}function Qd(t,e,r){if(typeof e!="object")return t(!1,e);var n=e.interrupt?1:e.content.length;function a(){for(;e.content.length;){var o=e.content.shift();if(o!==void 0){if(i(o))return;Qd(t,o)}}t(!1,(n>1?e.indents:"")+(e.name?"</"+e.name+">":"")+(e.indent&&!r?`
`:"")),r&&r()}function i(o){return o.interrupt?(o.interrupt.append=t,o.interrupt.end=a,o.interrupt=!1,t(!0),!0):!1}if(t(!1,e.indents+(e.name?"<"+e.name:"")+(e.attributes.length?" "+e.attributes.join(" "):"")+(n?e.name?">":"":e.name?"/>":"")+(e.indent&&n>1?`
`:"")),!n)return t(!1,e.indent?`
`:"");i(e)||a()}function kk(t,e){return t+'="'+Pu(e)+'"'}jo.exports=jk;jo.exports.element=jo.exports.Element=Ek;var Ck=jo.exports;const qe=pg(Ck),Rh=0,Oh=32,_k=32,Ak=(t,e)=>{const r=e.replace(/-/g,"");if(r.length!==_k)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const a=r.replace(/(..)/g,"$1 ").trim().split(" ").map(c=>parseInt(c,16));a.reverse();const o=t.slice(Rh,Oh).map((c,u)=>c^a[u%a.length]);return Buffer.concat([t.slice(0,Rh),o,t.slice(Oh)])};class Tk{format(e,r={stack:[]}){const n=e.prepForXml(r);if(n)return n;throw Error("XMLComponent did not format correctly")}}class Ik{replace(e,r,n){let a=e;return r.forEach((i,o)=>{a=a.replace(new RegExp(`{${i.fileName}}`,"g"),(n+o).toString())}),a}getMediaData(e,r){return r.Array.filter(n=>e.search(`{${n.fileName}}`)>0)}}class Pk{replace(e,r){let n=e;for(const a of r)n=n.replace(new RegExp(`{${a.reference}-${a.instance}}`,"g"),a.numId.toString());return n}}class Rk{constructor(){le(this,"formatter"),le(this,"imageReplacer"),le(this,"numberingReplacer"),this.formatter=new Tk,this.imageReplacer=new Ik,this.numberingReplacer=new Pk}compile(e,r){const n=new yk,a=this.xmlifyFile(e,r),i=new Map(Object.entries(a));for(const[,o]of i)if(Array.isArray(o))for(const l of o)n.file(l.path,l.data);else n.file(o.path,o.data);for(const{stream:o,fileName:l}of e.Media.Array)n.file(`word/media/${l}`,o);for(const{data:o,name:l,fontKey:c}of e.FontTable.fontOptionsWithKey){const[u]=l.split(".");n.file(`word/fonts/${u}.odttf`,Ak(o,c))}return n}xmlifyFile(e,r){const n=e.Document.Relationships.RelationshipCount+1,a=qe(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),i=this.imageReplacer.getMediaData(a,e.Media);return{Relationships:{data:(i.forEach((o,l)=>{e.Document.Relationships.createRelationship(n+l,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${o.fileName}`)}),qe(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const o=this.imageReplacer.replace(a,i,n);return this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const o=qe(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:qe(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:qe(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:qe(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((o,l)=>{const c=qe(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(c,e.Media).forEach((f,g)=>{o.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),{data:qe(this.formatter.format(o.Relationships,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${l+1}.xml.rels`}}),FooterRelationships:e.Footers.map((o,l)=>{const c=qe(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(c,e.Media).forEach((f,g)=>{o.Relationships.createRelationship(g,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),{data:qe(this.formatter.format(o.Relationships,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${l+1}.xml.rels`}}),Headers:e.Headers.map((o,l)=>{const c=qe(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),u=this.imageReplacer.getMediaData(c,e.Media),f=this.imageReplacer.replace(c,u,0);return{data:this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering),path:`word/header${l+1}.xml`}}),Footers:e.Footers.map((o,l)=>{const c=qe(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),u=this.imageReplacer.getMediaData(c,e.Media),f=this.imageReplacer.replace(c,u,0);return{data:this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering),path:`word/footer${l+1}.xml`}}),ContentTypes:{data:qe(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:qe(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:qe(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:qe(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:qe(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:qe(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:qe(this.formatter.format(e.Comments,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/comments.xml"},FontTable:{data:qe(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:qe(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const Ok={WITH_2_BLANKS:"  "},aa=t=>t===!0?Ok.WITH_2_BLANKS:t===!1?void 0:t;class Cx{static toString(e,r){return pi(this,null,function*(){return yield this.compiler.compile(e,aa(r)).generateAsync({type:"string",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBuffer(e,r){return pi(this,null,function*(){return yield this.compiler.compile(e,aa(r)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBase64String(e,r){return pi(this,null,function*(){return yield this.compiler.compile(e,aa(r)).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBlob(e,r){return pi(this,null,function*(){return yield this.compiler.compile(e,aa(r)).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toStream(e,r){const n=new zd.Stream;return this.compiler.compile(e,aa(r)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(i=>{n.emit("data",i),n.emit("end")}),n}}le(Cx,"compiler",new Rk);var _x={exports:{}};(function(t,e){(function(r,n){n()})(qn,function(){function r(u,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,f,g){var y=new XMLHttpRequest;y.open("GET",u),y.responseType="blob",y.onload=function(){c(y.response,f,g)},y.onerror=function(){console.error("could not download file")},y.send()}function a(u){var f=new XMLHttpRequest;f.open("HEAD",u,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qn=="object"&&qn.global===qn?qn:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(u,f,g){var y=o.URL||o.webkitURL,h=document.createElement("a");f=f||u.name||"download",h.download=f,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?i(h):a(h.href)?n(u,f,g):i(h,h.target="_blank")):(h.href=y.createObjectURL(u),setTimeout(function(){y.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,f,g){if(f=f||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,g),f);else if(a(u))n(u,f,g);else{var y=document.createElement("a");y.href=u,y.target="_blank",setTimeout(function(){i(y)})}}:function(u,f,g,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof u=="string")return n(u,f,g);var h=u.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||h&&v||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var w=S.result;w=b?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=w:location=w,y=null},S.readAsDataURL(u)}else{var p=o.URL||o.webkitURL,x=p.createObjectURL(u);y?y.location=x:location.href=x,y=null,setTimeout(function(){p.revokeObjectURL(x)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})})(_x);var Dk=_x.exports;const Fk=async t=>{const e=l=>{try{const c=l.split(",")[1],u=atob(c),f=new Uint8Array(u.length);for(let g=0;g<u.length;g++)f[g]=u.charCodeAt(g);return f}catch(c){return console.error("Error converting base64 to buffer:",c),new Uint8Array(0)}},r=l=>{if(!l)return{images:[],text:""};const c=l.split(`
`),u=[],f=[];for(const g of c)if(g.startsWith("IMAGE_DATA:"))try{const y=g.replace("IMAGE_DATA:",""),h=JSON.parse(y);u.push(h)}catch(y){console.error("Error parsing image data:",y)}else g.trim()&&!g.startsWith("[Imagem ")&&f.push(g);return{images:u,text:f.join(`
`)}},n=l=>{if(!l||!l.includes("=== DADOS EXTRADOS POR IA ==="))return null;const c=l.split("=== DADOS EXTRADOS POR IA ===")[1];if(!c)return null;const u=c.match(/Processo Elementar: (\w+) \(([^)]+)\)/),f=c.match(/Complexidade: (\w+)/),g=c.match(/Total de Pontos de Funo: (\d+)/);return!u||!f||!g?null:{processType:u[1],processTypeDescription:u[2],complexity:f[1],totalFunctionPoints:parseInt(g[1],10)}},a=new gk({styles:{paragraphStyles:[{id:"title",name:"Title",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:32,bold:!0,color:"2563EB"},paragraph:{spacing:{after:300},alignment:ht.CENTER}},{id:"subtitle",name:"Subtitle",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:16,color:"6B7280"},paragraph:{spacing:{after:400},alignment:ht.CENTER}},{id:"heading1",name:"Heading 1",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:24,bold:!0,color:"1F2937"},paragraph:{spacing:{before:240,after:120}}},{id:"heading2",name:"Heading 2",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:20,bold:!0,color:"374151"},paragraph:{spacing:{before:200,after:100}}}]},sections:[{properties:{},children:[new ge({text:t.title||"Anlise de Impacto",style:"title"}),new ge({text:"Documento de Anlise de Impacto",style:"subtitle"}),new Ei({width:{size:100,type:Ke.PERCENTAGE},borders:{top:{style:De.SINGLE,size:1,color:"CCCCCC"},bottom:{style:De.SINGLE,size:1,color:"CCCCCC"},left:{style:De.SINGLE,size:1,color:"CCCCCC"},right:{style:De.SINGLE,size:1,color:"CCCCCC"},insideHorizontal:{style:De.SINGLE,size:1,color:"CCCCCC"},insideVertical:{style:De.SINGLE,size:1,color:"CCCCCC"}},rows:[new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Nmero da PA:",bold:!0})]})],width:{size:25,type:Ke.PERCENTAGE},shading:{fill:"F3F4F6"}}),new Ee({children:[new ge(t.title||"N/A")],width:{size:25,type:Ke.PERCENTAGE}}),new Ee({children:[new ge({children:[new Ae({text:"Projeto:",bold:!0})]})],width:{size:25,type:Ke.PERCENTAGE},shading:{fill:"F3F4F6"}}),new Ee({children:[new ge(t.project||"N/A")],width:{size:25,type:Ke.PERCENTAGE}})]}),new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Autor:",bold:!0})]})],shading:{fill:"F3F4F6"}}),new Ee({children:[new ge(t.author||"N/A")]}),new Ee({children:[new ge({children:[new Ae({text:"Data:",bold:!0})]})],shading:{fill:"F3F4F6"}}),new Ee({children:[new ge(new Date(t.date).toLocaleDateString("pt-BR")||"N/A")]})]}),new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Verso:",bold:!0})]})],shading:{fill:"F3F4F6"}}),new Ee({children:[new ge(t.version||"N/A")]}),new Ee({children:[new ge("")]}),new Ee({children:[new ge("")]})]})]}),new ge({text:"",spacing:{after:400}}),...t.description?[new ge({text:"1. Descrio",style:"heading1"}),new ge({text:t.description,spacing:{after:300}})]:[],new ge({text:"2. Escopo",style:"heading1"}),...t.scope.processes.length>0?[new ge({text:"2.1 Funcionalidades Impactadas",style:"heading2"}),...t.scope.processes.flatMap((l,c)=>{const u=[],{images:f,text:g}=r(l.screenshots||""),y=n(l.workDetails);u.push(new ge({children:[new Ae({text:`Funcionalidade ${c+1}: ${l.name}`,bold:!0})],spacing:{before:200,after:100}}));const h=[new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Campo",bold:!0})]})],width:{size:30,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Informao",bold:!0})]})],width:{size:70,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}})]}),new zt({children:[new Ee({children:[new ge("Status")]}),new Ee({children:[new ge(l.status.charAt(0).toUpperCase()+l.status.slice(1))]})]})];if(l.status==="alterada"&&l.websisCreated!==void 0&&h.push(new zt({children:[new Ee({children:[new ge("Websis Criou/Alterou Antes")]}),new Ee({children:[new ge(l.websisCreated?"SIM":"NO")]})]})),y&&h.push(new zt({children:[new Ee({children:[new ge("Anlise de Pontos de Funo")]}),new Ee({children:[new ge({children:[new Ae({text:"Processo Elementar: ",bold:!0}),new Ae(`${y.processType} (${y.processTypeDescription})`)]}),new ge({children:[new Ae({text:"Complexidade: ",bold:!0}),new Ae(y.complexity)]}),new ge({children:[new Ae({text:"Total de Pontos de Funo: ",bold:!0}),new Ae(`${y.totalFunctionPoints}`)]})]})]})),l.workDetails&&l.workDetails.trim()){let v=l.workDetails;v.includes("=== DADOS EXTRADOS POR IA ===")&&(v=v.split("=== DADOS EXTRADOS POR IA ===")[0].trim()),v&&h.push(new zt({children:[new Ee({children:[new ge("Detalhamento do Trabalho")]}),new Ee({children:[new ge(v)]})]}))}return u.push(new Ei({width:{size:100,type:Ke.PERCENTAGE},borders:{top:{style:De.SINGLE,size:1,color:"CCCCCC"},bottom:{style:De.SINGLE,size:1,color:"CCCCCC"},left:{style:De.SINGLE,size:1,color:"CCCCCC"},right:{style:De.SINGLE,size:1,color:"CCCCCC"},insideHorizontal:{style:De.SINGLE,size:1,color:"CCCCCC"},insideVertical:{style:De.SINGLE,size:1,color:"CCCCCC"}},rows:h})),l.screenshots&&l.screenshots.trim()&&(g.trim()||f.length>0)&&(u.push(new ge({children:[new Ae({text:"Prints das Telas:",bold:!0})],spacing:{before:150,after:100}})),g.trim()&&u.push(new ge({text:g,spacing:{after:100}})),f.forEach((v,b)=>{try{const S=e(v.base64);S.length>0&&(u.push(new ge({children:[new Bj({data:S,transformation:{width:400,height:300}})],spacing:{after:100},alignment:ht.CENTER})),u.push(new ge({text:v.name,spacing:{after:150},alignment:ht.CENTER,run:{italics:!0,size:18,color:"666666"}})))}catch(S){console.error("Error processing image:",S),u.push(new ge({text:`[${v.name} - Erro ao processar imagem]`,spacing:{after:100},alignment:ht.CENTER,run:{italics:!0,color:"FF0000"}}))}})),u.push(new ge({text:"",spacing:{after:200}})),u})]:[new ge({text:"Nenhuma funcionalidade definida no escopo.",spacing:{after:300}})],new ge({text:"3. Anlise de Impactos",style:"heading1"}),...Lk(t),...t.risks.length>0?[new ge({text:"4. Matriz de Riscos",style:"heading1"}),new Ei({width:{size:100,type:Ke.PERCENTAGE},borders:{top:{style:De.SINGLE,size:1,color:"CCCCCC"},bottom:{style:De.SINGLE,size:1,color:"CCCCCC"},left:{style:De.SINGLE,size:1,color:"CCCCCC"},right:{style:De.SINGLE,size:1,color:"CCCCCC"},insideHorizontal:{style:De.SINGLE,size:1,color:"CCCCCC"},insideVertical:{style:De.SINGLE,size:1,color:"CCCCCC"}},rows:[new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Descrio do Risco",bold:!0})]})],width:{size:40,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Impacto",bold:!0})]})],width:{size:15,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Probabilidade",bold:!0})]})],width:{size:15,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Mitigao",bold:!0})]})],width:{size:30,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}})]}),...t.risks.map(l=>new zt({children:[new Ee({children:[new ge(l.description)]}),new Ee({children:[new ge(l.impact.charAt(0).toUpperCase()+l.impact.slice(1))]}),new Ee({children:[new ge(l.probability.charAt(0).toUpperCase()+l.probability.slice(1))]}),new Ee({children:[new ge(l.mitigation||"N/A")]})]}))]})]:[],...t.mitigations.length>0?[new ge({text:"5. Plano de Mitigao",style:"heading1"}),new Ei({width:{size:100,type:Ke.PERCENTAGE},borders:{top:{style:De.SINGLE,size:1,color:"CCCCCC"},bottom:{style:De.SINGLE,size:1,color:"CCCCCC"},left:{style:De.SINGLE,size:1,color:"CCCCCC"},right:{style:De.SINGLE,size:1,color:"CCCCCC"},insideHorizontal:{style:De.SINGLE,size:1,color:"CCCCCC"},insideVertical:{style:De.SINGLE,size:1,color:"CCCCCC"}},rows:[new zt({children:[new Ee({children:[new ge({children:[new Ae({text:"Ao",bold:!0})]})],width:{size:40,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Responsvel",bold:!0})]})],width:{size:25,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Prazo",bold:!0})]})],width:{size:20,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}}),new Ee({children:[new ge({children:[new Ae({text:"Prioridade",bold:!0})]})],width:{size:15,type:Ke.PERCENTAGE},shading:{fill:"E5E7EB"}})]}),...t.mitigations.map(l=>new zt({children:[new Ee({children:[new ge(l.action)]}),new Ee({children:[new ge(l.responsible)]}),new Ee({children:[new ge(new Date(l.deadline).toLocaleDateString("pt-BR"))]}),new Ee({children:[new ge(l.priority.charAt(0).toUpperCase()+l.priority.slice(1))]})]}))]})]:[],...t.conclusions.summary||t.conclusions.recommendations.length>0||t.conclusions.nextSteps.length>0?[new ge({text:"6. Concluses e Recomendaes",style:"heading1"}),...t.conclusions.summary?[new ge({text:"6.1 Resumo Executivo",style:"heading2"}),new ge({text:t.conclusions.summary,spacing:{after:200}})]:[],...t.conclusions.recommendations.length>0?[new ge({text:"6.2 Recomendaes",style:"heading2"}),...t.conclusions.recommendations.map(l=>new ge({text:` ${l}`,spacing:{after:100}}))]:[],...t.conclusions.nextSteps.length>0?[new ge({text:"6.3 Prximos Passos",style:"heading2"}),...t.conclusions.nextSteps.map(l=>new ge({text:` ${l}`,spacing:{after:100}}))]:[]]:[],new ge({text:"",spacing:{before:400}}),new ge({text:"NuPTechs - Sua fbrica de softwares inteligentes",alignment:ht.CENTER,spacing:{before:200},run:{italics:!0,color:"6B7280"}})]}]}),i=await Cx.toBlob(a),o=`${t.title||"Analise_de_Impacto"}_${new Date().toISOString().split("T")[0]}.docx`;Dk.saveAs(i,o)};function Lk(t){const e=[],r={business:"Impactos de Negcio",technical:"Impactos Tcnicos",operational:"Impactos Operacionais",financial:"Impactos Financeiros"};let n=1;return Object.entries(r).forEach(([a,i])=>{const o=t.impacts[a];o.length>0&&(e.push(new ge({text:`3.${n} ${i}`,style:"heading2"})),o.forEach((l,c)=>{e.push(new ge({text:` ${l.description}`,spacing:{after:50}}),new ge({children:[new Ae({text:"  Severidade: ",bold:!0}),new Ae({text:l.severity.charAt(0).toUpperCase()+l.severity.slice(1)}),new Ae({text:" | "}),new Ae({text:"Probabilidade: ",bold:!0}),new Ae({text:l.probability.charAt(0).toUpperCase()+l.probability.slice(1)})],spacing:{after:100}}))}),e.push(new ge({text:"",spacing:{after:200}})),n++)}),e}const Mk=({onComplete:t,onCancel:e})=>{const[r,n]=Q.useState(null),[a,i]=Q.useState(""),[o,l]=Q.useState(""),[c,u]=Q.useState(!1),[f,g]=Q.useState(!1),[y,h]=Q.useState(null),v=Q.useRef(null),b=Q.useCallback(z=>{z.preventDefault(),u(!0)},[]),S=Q.useCallback(z=>{z.preventDefault(),u(!1)},[]),p=Q.useCallback(z=>{z.preventDefault(),u(!1);const K=z.dataTransfer.files[0];K&&x(K)},[]),x=z=>{if(h(null),!["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(z.type)&&!z.name.endsWith(".docx")){h("Por favor, selecione um arquivo Word (.docx)");return}if(z.size>10*1024*1024){h("O arquivo no pode ter mais de 10MB");return}if(n(z),!a){const I=z.name.replace(/\.[^/.]+$/,"");i(I)}},w=z=>{var I;const K=(I=z.target.files)==null?void 0:I[0];K&&x(K)},T=async()=>{if(!r||!a.trim()){h("Nome e arquivo so obrigatrios");return}g(!0),h(null);try{const z=new FileReader;z.onload=async()=>{var I;const K=(I=z.result)==null?void 0:I.toString().split(",")[1];if(!K){h("Erro ao processar o arquivo"),g(!1);return}try{const se=await Je.post("/api/templates",{name:a.trim(),description:o.trim(),fileName:r.name,fileContent:K});t(se.template)}catch(se){h(se.message||"Erro ao fazer upload do template")}finally{g(!1)}},z.onerror=()=>{h("Erro ao ler o arquivo"),g(!1)},z.readAsDataURL(r)}catch(z){h(z.message||"Erro ao fazer upload"),g(!1)}},O=()=>{n(null),v.current&&(v.current.value="")},G=z=>z<1024?z+" B":z<1024*1024?(z/1024).toFixed(1)+" KB":(z/(1024*1024)).toFixed(1)+" MB";return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-6 transition-colors",children:[s.jsx(Cn,{className:"w-5 h-5"}),"Voltar para lista de templates"]}),s.jsxs(jt,{className:"overflow-hidden",children:[s.jsx(Es,{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(rg,{className:"w-8 h-8"})}),s.jsxs("div",{children:[s.jsx(Ss,{className:"text-xl text-white",children:"Novo Modelo de Documento"}),s.jsx("p",{className:"text-primary-100 mt-1",children:"Faa upload de um documento Word com marcadores #$campo#$"})]})]})}),s.jsxs(nr,{className:"p-6 space-y-6",children:[s.jsxs("div",{onDragOver:b,onDragLeave:S,onDrop:p,onClick:()=>{var z;return(z=v.current)==null?void 0:z.click()},className:`relative border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all ${c?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":r?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-700 hover:border-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx("input",{ref:v,type:"file",accept:".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:w,className:"hidden"}),r?s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("div",{className:"p-4 bg-green-100 dark:bg-green-900/40 rounded-xl",children:s.jsx(et,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:G(r.size)})]}),s.jsx("button",{onClick:z=>{z.stopPropagation(),O()},className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(tt,{className:"w-5 h-5 text-gray-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-full w-fit mx-auto mb-4",children:s.jsx(An,{className:"w-10 h-10 text-gray-400"})}),s.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:c?"Solte o arquivo aqui":"Arraste e solte seu documento"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ou clique para selecionar um arquivo .docx (mx. 10MB)"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome do Template *"}),s.jsx("input",{type:"text",value:a,onChange:z=>i(z.target.value),placeholder:"Ex: Modelo rea Comercial",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descrio (opcional)"}),s.jsx("textarea",{value:o,onChange:z=>l(z.target.value),placeholder:"Descreva o propsito deste template...",rows:3,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none"})]})]}),y&&s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-700 dark:text-red-400",children:[s.jsx(gt,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("p",{children:y})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:"Dica: Como criar marcadores"}),s.jsxs("p",{children:["No seu documento Word, insira marcadores no formato ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-900/40 px-1.5 py-0.5 rounded",children:"#$nome_do_campo#$"})]}),s.jsxs("p",{className:"mt-1",children:["Exemplo: ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-900/40 px-1.5 py-0.5 rounded",children:"#$titulo#$"}),", ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-900/40 px-1.5 py-0.5 rounded",children:"#$autor#$"}),", ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-900/40 px-1.5 py-0.5 rounded",children:"#$descricao#$"})]})]})]})}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:e,disabled:f,className:"flex-1 py-3 px-6 border border-gray-200 dark:border-gray-700 rounded-xl font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:T,disabled:!r||!a.trim()||f,className:"flex-1 py-3 px-6 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx(_n,{className:"w-5 h-5 animate-spin"}),"Analisando documento..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"w-5 h-5"}),"Fazer Upload e Analisar"]})})]})]})]})]})})},Bk={FileText:et,Folder:Ev,AlertTriangle:is,Shield:os,CheckCircle:bv,Layers:ho,User:zs,Info:Gt},zk=({template:t,onSave:e,onCancel:r})=>{const[n,a]=Q.useState(t.fieldMappings||{}),[i,o]=Q.useState([]),[l,c]=Q.useState(!0),[u,f]=Q.useState(!1),[g,y]=Q.useState(""),[h,v]=Q.useState(new Set),[b,S]=Q.useState(null),[p,x]=Q.useState(null);Q.useEffect(()=>{(async()=>{try{const H=(await Je.get("/api/templates/available-fields")).fields||[];o(H),v(new Set(H.map(C=>C.id)))}catch(P){console.error("Error fetching fields:",P),x("Erro ao carregar campos disponveis")}finally{c(!1)}})()},[]);const w=Q.useMemo(()=>{const ae=t.parsedMarkers.length,P=Object.keys(n).filter(B=>n[B]&&n[B]!=="").length,H=ae-P,C=ae>0?Math.round(P/ae*100):0;return{total:ae,mapped:P,unmapped:H,percentage:C}},[t.parsedMarkers,n]),T=Q.useMemo(()=>{if(!g)return i;const ae=g.toLowerCase();return i.map(P=>({...P,fields:P.fields.filter(H=>H.label.toLowerCase().includes(ae)||H.id.toLowerCase().includes(ae)||H.tableLabel.toLowerCase().includes(ae))})).filter(P=>P.fields.length>0)},[i,g]),O=(ae,P)=>{a(H=>({...H,[ae]:P}))},G=async()=>{f(!0),x(null);try{await Je.put(`/api/templates/${t.id}`,{fieldMappings:n}),e({...t,fieldMappings:n,updatedAt:new Date().toISOString()})}catch(ae){x(ae.message||"Erro ao salvar mapeamento")}finally{f(!1)}},z=ae=>{v(P=>{const H=new Set(P);return H.has(ae)?H.delete(ae):H.add(ae),H})},K=ae=>{for(const P of i){const H=P.fields.find(C=>C.id===ae);if(H)return H}},I=ae=>{switch(ae){case"text":return s.jsx(et,{className:"w-4 h-4"});case"number":return s.jsx(Sv,{className:"w-4 h-4"});case"date":return s.jsx(Ms,{className:"w-4 h-4"});case"list":return s.jsx(ho,{className:"w-4 h-4"});default:return s.jsx(Gt,{className:"w-4 h-4"})}},se=ae=>{const P={text:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",number:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",date:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",list:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",json:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400"},H={text:"Texto",number:"Nmero",date:"Data",list:"Lista",json:"JSON"};return s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${P[ae]||P.text}`,children:H[ae]||ae})};return l?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(_n,{className:"w-10 h-10 text-primary-600 animate-spin"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando campos disponveis..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-6 transition-colors",children:[s.jsx(Cn,{className:"w-5 h-5"}),"Voltar para lista de templates"]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl",children:s.jsx(ho,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.name}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Mapeie os marcadores do documento para campos do sistema"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[w.percentage,"%"]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[w.mapped," de ",w.total," mapeados"]})]}),s.jsx("div",{className:"w-32 h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all ${w.percentage===100?"bg-green-500":w.percentage>50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${w.percentage}%`}})})]})]}),p&&s.jsxs("div",{className:"mb-6 flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-700 dark:text-red-400",children:[s.jsx(gt,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("p",{children:p}),s.jsx("button",{onClick:()=>x(null),className:"ml-auto",children:s.jsx(tt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(jt,{children:[s.jsx(Es,{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ss,{className:"flex items-center gap-2",children:[s.jsx(et,{className:"w-5 h-5 text-primary-600"}),"Marcadores Encontrados"]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(bo,{variant:w.unmapped>0?"danger":"success",children:w.unmapped>0?`${w.unmapped} pendentes`:"Todos mapeados"})})]})}),s.jsx(nr,{className:"p-0",children:t.parsedMarkers.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nenhum marcador encontrado"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"O documento no contm marcadores no formato #$campo#$"})]}):s.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:t.parsedMarkers.map((ae,P)=>{const H=K(n[ae.fieldName]),C=!!H;return s.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${b===ae.fieldName?"bg-primary-50 dark:bg-primary-900/20":""}`,onClick:()=>S(ae.fieldName),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${C?"bg-green-100 dark:bg-green-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:C?s.jsx(Ze,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):s.jsx(gt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("code",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-sm font-mono text-primary-600 dark:text-primary-400",children:ae.marker}),H&&s.jsxs("span",{className:"text-sm text-gray-500",children:[" ",H.label]})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:['Contexto: "',ae.context,'"']}),s.jsx("div",{className:"mt-3",children:s.jsxs("select",{value:n[ae.fieldName]||"",onChange:B=>O(ae.fieldName,B.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:[s.jsx("option",{value:"",children:"Selecione um campo..."}),i.map(B=>s.jsx("optgroup",{label:B.label,children:B.fields.map(q=>s.jsxs("option",{value:q.id,children:[q.label," (",q.type,")"]},q.id))},B.id))]})})]})]})},P)})})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(jt,{children:[s.jsx(Es,{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs(Ss,{className:"flex items-center gap-2 text-base",children:[s.jsx(La,{className:"w-5 h-5 text-primary-600"}),"Campos Disponveis"]})}),s.jsxs(nr,{className:"p-4",children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar campos...",value:g,onChange:ae=>y(ae.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:T.map(ae=>{const P=Bk[ae.icon]||Gt,H=h.has(ae.id);return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>z(ae.id),className:"w-full flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[H?s.jsx(Cd,{className:"w-4 h-4 text-gray-500"}):s.jsx(eg,{className:"w-4 h-4 text-gray-500"}),s.jsx(P,{className:"w-4 h-4 text-primary-600"}),s.jsx("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:ae.label}),s.jsx("span",{className:"ml-auto text-xs text-gray-500",children:ae.fields.length})]}),H&&s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:ae.fields.map(C=>s.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>{b&&O(b,C.id)},children:[I(C.type),s.jsx("span",{className:"text-gray-700 dark:text-gray-300 flex-1",children:C.label}),se(C.type)]},C.id))})]},ae.id)})})]})]}),s.jsx(jt,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:"Dica"}),s.jsx("p",{children:"Clique em um marcador  esquerda e depois em um campo aqui para fazer o mapeamento rapidamente."})]})]})})})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 shadow-lg",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("div",{className:`flex items-center gap-2 ${w.unmapped>0?"text-yellow-600":"text-green-600"}`,children:w.unmapped>0?s.jsxs(s.Fragment,{children:[s.jsx(gt,{className:"w-5 h-5"}),s.jsxs("span",{children:[w.unmapped," marcadores pendentes"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"w-5 h-5"}),s.jsx("span",{children:"Todos os marcadores mapeados"})]})})}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:r,disabled:u,className:"px-6 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:G,disabled:u,className:"px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx(_n,{className:"w-5 h-5 animate-spin"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_d,{className:"w-5 h-5"}),"Salvar Mapeamento"]})})]})]})}),s.jsx("div",{className:"h-20"})]})})},Uk=({onClose:t})=>{const[e,r]=Q.useState([]),[n,a]=Q.useState(!0),[i,o]=Q.useState("list"),[l,c]=Q.useState(null),[u,f]=Q.useState(""),[g,y]=Q.useState(null),[h,v]=Q.useState(null),[b,S]=Q.useState(null),p=(P,H)=>{S({message:P,type:H}),setTimeout(()=>S(null),3e3)},x=Q.useCallback(async()=>{try{a(!0);const P=await Je.get("/api/templates");r(P.templates||[])}catch(P){console.error("Error fetching templates:",P),p("Erro ao carregar templates","error")}finally{a(!1)}},[]);Q.useEffect(()=>{x()},[x]);const w=async P=>{try{await Je.delete(`/api/templates/${P}`),r(e.filter(H=>H.id!==P)),p("Template excludo com sucesso","success")}catch{p("Erro ao excluir template","error")}v(null)},T=async P=>{try{const H=await Je.post(`/api/templates/${P.id}/duplicate`,{name:`${P.name} (Cpia)`});r([H.template,...e]),p("Template duplicado com sucesso","success")}catch{p("Erro ao duplicar template","error")}},O=async P=>{try{await Je.put(`/api/templates/${P.id}`,{isDefault:!P.isDefault}),r(e.map(H=>({...H,isDefault:H.id===P.id?!H.isDefault:!1}))),p(P.isDefault?"Template removido como padro":"Template definido como padro","success")}catch{p("Erro ao atualizar template","error")}},G=async P=>{try{await Je.put(`/api/templates/${P.id}`,{isActive:!P.isActive}),r(e.map(H=>H.id===P.id?{...H,isActive:!H.isActive}:H)),p(P.isActive?"Template desativado":"Template ativado","success")}catch{p("Erro ao atualizar template","error")}},z=P=>{r([P,...e]),c(P),o("mapper"),p(`Template criado! ${P.parsedMarkers.length} marcadores encontrados.`,"success")},K=P=>{r(e.map(H=>H.id===P.id?P:H)),o("list"),c(null),p("Mapeamento salvo com sucesso","success")},I=e.filter(P=>{var B;const H=P.name.toLowerCase().includes(u.toLowerCase())||((B=P.description)==null?void 0:B.toLowerCase().includes(u.toLowerCase())),C=g===null||P.isActive===g;return H&&C}),se=P=>{const H=P.parsedMarkers.length,C=Object.keys(P.fieldMappings).length;return H===0?{status:"empty",label:"Sem marcadores",color:"gray"}:C===0?{status:"pending",label:"No configurado",color:"red"}:C<H?{status:"partial",label:`${C}/${H} mapeados`,color:"yellow"}:{status:"complete",label:"Configurado",color:"green"}},ae=P=>new Date(P).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"});return i==="upload"?s.jsx(Mk,{onComplete:z,onCancel:()=>o("list")}):i==="mapper"&&l?s.jsx(zk,{template:l,onSave:K,onCancel:()=>{o("list"),c(null)}}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[b&&s.jsxs("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-fade-in ${b.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[b.type==="success"?s.jsx(Ze,{className:"w-5 h-5"}):s.jsx(gt,{className:"w-5 h-5"}),b.message]}),s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl",children:s.jsx(ho,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Modelos de Documento"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie templates personalizados para exportao de anlises"})]})]})}),s.jsxs("button",{onClick:()=>o("upload"),className:"flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[s.jsx(Yt,{className:"w-5 h-5"}),"Novo Modelo"]})]}),s.jsx(jt,{className:"mb-6",children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar templates...",value:u,onChange:P=>f(P.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>y(g===!0?null:!0),className:`px-4 py-2.5 rounded-xl border transition-all flex items-center gap-2 ${g===!0?"bg-green-100 border-green-300 text-green-700 dark:bg-green-900/30 dark:border-green-700 dark:text-green-400":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ze,{className:"w-4 h-4"}),"Ativos"]}),s.jsxs("button",{onClick:()=>y(g===!1?null:!1),className:`px-4 py-2.5 rounded-xl border transition-all flex items-center gap-2 ${g===!1?"bg-gray-200 border-gray-400 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(gt,{className:"w-4 h-4"}),"Inativos"]})]})]})})}),n?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((P,H)=>s.jsxs(jt,{className:"p-6",children:[s.jsx(Gr,{height:24,width:"70%",className:"mb-3"}),s.jsx(Gr,{height:16,width:"100%",className:"mb-2"}),s.jsx(Gr,{height:16,width:"60%",className:"mb-4"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Gr,{height:28,width:80}),s.jsx(Gr,{height:28,width:80})]})]},H))}):I.length===0?s.jsx(jt,{className:"p-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-full mb-4",children:s.jsx(et,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:u||g!==null?"Nenhum template encontrado":"Nenhum template criado"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md",children:u||g!==null?"Tente ajustar os filtros ou termo de busca":"Crie seu primeiro template para exportar anlises de impacto com seu layout personalizado"}),!u&&g===null&&s.jsxs("button",{onClick:()=>o("upload"),className:"flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-all",children:[s.jsx(An,{className:"w-5 h-5"}),"Fazer Upload do Primeiro Template"]})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(P=>{const H=se(P);return s.jsx(jt,{className:`group hover:shadow-xl transition-all duration-300 ${P.isActive?"":"opacity-60"} ${P.isDefault?"ring-2 ring-primary-500":""}`,children:s.jsxs(nr,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2.5 rounded-xl ${P.isDefault?"bg-primary-100 dark:bg-primary-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:s.jsx(et,{className:`w-6 h-6 ${P.isDefault?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"}`})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[P.name,P.isDefault&&s.jsx(go,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[180px]",children:P.originalFileName})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>v(h===P.id?null:P.id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:s.jsx(Tv,{className:"w-5 h-5 text-gray-500"})}),h===P.id&&s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-10",children:[s.jsxs("button",{onClick:()=>{c(P),o("mapper"),v(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[s.jsx(Bs,{className:"w-4 h-4"}),"Configurar Campos"]}),s.jsxs("button",{onClick:()=>{O(P),v(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[P.isDefault?s.jsx(Ad,{className:"w-4 h-4"}):s.jsx(go,{className:"w-4 h-4"}),P.isDefault?"Remover Padro":"Definir como Padro"]}),s.jsxs("button",{onClick:()=>{T(P),v(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[s.jsx(or,{className:"w-4 h-4"}),"Duplicar"]}),s.jsxs("button",{onClick:()=>{G(P),v(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[P.isActive?s.jsx(gt,{className:"w-4 h-4"}):s.jsx(Ze,{className:"w-4 h-4"}),P.isActive?"Desativar":"Ativar"]}),s.jsx("hr",{className:"my-2 border-gray-200 dark:border-gray-700"}),s.jsxs("button",{onClick:()=>w(P.id),className:"w-full px-4 py-2 text-left hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 text-red-600 dark:text-red-400",children:[s.jsx(fs,{className:"w-4 h-4"}),"Excluir"]})]})]})]}),P.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:P.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs(bo,{variant:H.color,className:"flex items-center gap-1",children:[H.status==="complete"&&s.jsx(Ze,{className:"w-3 h-3"}),H.status==="pending"&&s.jsx(gt,{className:"w-3 h-3"}),H.status==="partial"&&s.jsx(Ms,{className:"w-3 h-3"}),H.label]}),s.jsxs(bo,{variant:"secondary",children:[P.parsedMarkers.length," marcadores"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Wa,{className:"w-4 h-4"}),P.usageCount," usos"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ms,{className:"w-4 h-4"}),ae(P.updatedAt)]})]}),s.jsxs("button",{onClick:()=>{c(P),o("mapper")},className:"w-full py-2.5 bg-primary-50 hover:bg-primary-100 dark:bg-primary-900/20 dark:hover:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-xl font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(Bs,{className:"w-4 h-4"}),"Configurar Mapeamento"]})]})},P.id)})}),s.jsx(jt,{className:"mt-8 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 border-primary-200 dark:border-primary-800",children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/40 rounded-xl",children:s.jsx(rg,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"Como funcionam os templates?"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["1. Faa upload de um documento Word (.docx) com marcadores no formato ",s.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"#$campo#$"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"2. O sistema identificar automaticamente todos os marcadores no documento"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"3. Mapeie cada marcador para um campo do banco de dados e use o template para gerar documentos"})]})]})})})]})]})},Dh=()=>{const t=og();return{id:br(),title:"PA",description:"",author:"",date:new Date().toISOString().split("T")[0],version:"1.0",project:(t==null?void 0:t.name)||"",scope:{processes:[]},impacts:{business:[],technical:[],operational:[],financial:[]},risks:[],mitigations:[],conclusions:{summary:"",recommendations:[],nextSteps:[]},customFieldsValues:{}}},$k=()=>{const{isAuthenticated:t,hasPermission:e,logout:r}=ds(),n=zv(),[a,i]=Q.useState(Dh()),[o,l]=Q.useState({}),[c,u]=Q.useState(!1),[f,g]=Q.useState(!1),[y,h]=Q.useState("dashboard"),[v,b]=Q.useState({}),[S,p]=Q.useState(!1),[x,w]=Q.useState(null),[T,O]=Q.useState(!1),[G,z]=Q.useState("login"),[K,I]=Q.useState(null),[se,ae]=Q.useState(!1),[P,H]=Q.useState(!1);Q.useEffect(()=>{const X=localStorage.getItem("nup-aim-onboarding-complete");t&&!X&&H(!0)},[t]),Q.useEffect(()=>{const re=new URLSearchParams(window.location.hash.split("?")[1]||"").get("token");re?(I(re),z("verify-email")):z(t?"app":"login")},[t]),Q.useEffect(()=>{t&&hg().catch(X=>{console.error("Failed to register custom fields sections:",X)})},[t]);const C=()=>{localStorage.setItem("nup_aim_last_activity",Date.now().toString()),ae(!1)},B=()=>{r(),ae(!1)};if(G==="verify-email")return s.jsx($v,{token:K||void 0,onBackToLogin:()=>{z("login"),I(null),window.location.hash=""}});if(!t)return s.jsx(Uv,{});const q=X=>{i(re=>({...re,...X}))},F=async()=>{if(!e("ANALYSIS","EXPORT")){alert("Voc no tem permisso para exportar anlises.");return}u(!0);try{await Fk(a)}catch(X){console.error("Erro ao exportar documento:",X),alert("Erro ao exportar o documento. Tente novamente.")}finally{u(!1)}},V=async()=>{if(!e("ANALYSIS","CREATE")&&!e("ANALYSIS","EDIT")){alert("Voc no tem permisso para salvar anlises.");return}g(!0);let X=!0,re=[],ee=!1;try{const k={...a,customFieldsValues:o};bu(k);try{const ne=a.dbId,N=!ne,ie={scope:a.scope,impacts:a.impacts,risks:a.risks,mitigations:a.mitigations,conclusions:a.conclusions,customFieldsValues:o,date:a.date,version:a.version,project:a.project};if(N){const _=await Je.createAnalysis({title:a.title,description:a.description,author:a.author,projectId:null,data:ie});if(_.success&&_.data){console.log(" Anlise criada no banco de dados:",_.data.id),ee=!0;const d={...a,dbId:_.data.id};i(d),bu({...d,customFieldsValues:o})}else console.warn(" Falha ao salvar no banco:",_.error)}else{const _=await Je.updateAnalysis(ne,{title:a.title,description:a.description,author:a.author,data:ie});_.success?(console.log(" Anlise atualizada no banco de dados"),ee=!0):console.warn(" Falha ao atualizar no banco:",_.error)}}catch(ne){console.warn(" Erro ao salvar no banco de dados:",ne)}const{getCustomFieldsSDK:E}=await kr(async()=>{const{getCustomFieldsSDK:ne}=await Promise.resolve().then(()=>Nb);return{getCustomFieldsSDK:ne}},void 0),Z=E();for(const[ne,N]of Object.entries(o))if(Object.keys(N).length>0)try{await Z.saveValues(a.id,ne,N)}catch(ie){X=!1,re.push(ne),console.warn(`Failed to save custom fields for section ${ne}:`,ie)}w(new Date);const M=document.createElement("div");let R="bg-green-500",L="";ee&&X?L="Anlise salva no banco de dados com sucesso!":ee&&!X?(R="bg-yellow-500",L=`Anlise salva no banco. Campos personalizados com erro: ${re.join(", ")}`):!ee&&X?(R="bg-yellow-500",L="Anlise salva localmente. Falha ao salvar no banco de dados."):(R="bg-yellow-500",L="Anlise salva localmente apenas."),M.className=`fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50 ${R} text-white`,M.textContent=L,document.body.appendChild(M),setTimeout(()=>{document.body.contains(M)&&document.body.removeChild(M)},ee?3e3:5e3)}catch(k){console.error("Erro ao salvar anlise:",k),alert("Erro ao salvar a anlise. Tente novamente.")}finally{g(!1)}},D=X=>{if(!e("ANALYSIS","VIEW")){alert("Voc no tem permisso para visualizar anlises.");return}i(X),l(X.customFieldsValues||{}),h("form"),p(!1)},J=()=>{if(!e("ANALYSIS","CREATE")){alert("Voc no tem permisso para criar anlises.");return}i(Dh()),l({}),h("form"),b({}),w(null),O(!1)},U=X=>{b(re=>({...re,[X]:!re[X]}))},A=()=>a.title.trim()&&a.title!=="PA"&&a.project.trim()&&a.author.trim()&&a.description.trim(),Y=e("ANALYSIS","VIEW")||e("ANALYSIS","EDIT")||e("ANALYSIS","DELETE");return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 theme-transition",children:[s.jsx(Eb,{onExport:F,isExporting:c}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl mb-8 max-w-2xl mx-auto shadow-soft",children:[s.jsxs("button",{onClick:()=>h("dashboard"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 text-sm font-medium rounded-lg transition-all duration-200 ${y==="dashboard"?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[s.jsx(kv,{className:"w-4 h-4"}),"Dashboard"]}),s.jsxs("button",{onClick:()=>h("form"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 text-sm font-medium rounded-lg transition-all duration-200 ${y==="form"?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[s.jsx(et,{className:"w-4 h-4"}),"Formulrio"]}),s.jsx("button",{onClick:()=>h("preview"),className:`flex-1 py-2.5 px-4 text-sm font-medium rounded-lg transition-all duration-200 ${y==="preview"?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Visualizao"}),s.jsxs("button",{onClick:()=>h("templates"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 text-sm font-medium rounded-lg transition-all duration-200 ${y==="templates"?"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[s.jsx(jv,{className:"w-4 h-4"}),"Templates"]})]}),y==="dashboard"?s.jsx(Mb,{onNewAnalysis:()=>{J(),h("form")},onNavigate:X=>{X==="analyses"&&p(!0)}}):y==="templates"?s.jsx(Uk,{onClose:()=>h("dashboard")}):y==="form"?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(qs,{title:"Informaes Bsicas",required:!0,isCollapsed:v.basic,onToggle:()=>U("basic"),children:s.jsx(kb,{data:a,onChange:q,customFieldsValues:o.basic_info||{},onCustomFieldsChange:X=>{l(re=>({...re,basic_info:X}))}})}),s.jsx(qs,{title:"Escopo",isCollapsed:v.scope,onToggle:()=>U("scope"),children:s.jsx(_b,{data:a,onChange:q,customFieldsValues:o.scope||{},onCustomFieldsChange:X=>{l(re=>({...re,scope:X}))}})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Informaes Adicionais"}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:T,onChange:X=>O(X.target.checked),className:"mr-2 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Incluir sees adicionais"})]})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Marque esta opo para incluir as sees de Anlise de Impactos, Matriz de Riscos, Plano de Mitigao e Concluses."})]}),T&&s.jsxs(s.Fragment,{children:[s.jsx(qs,{title:"Anlise de Impactos",isCollapsed:v.impacts,onToggle:()=>U("impacts"),children:s.jsx(Ab,{data:a,onChange:q,customFieldsValues:o.impacts||{},onCustomFieldsChange:X=>{l(re=>({...re,impacts:X}))}})}),s.jsx(qs,{title:"Matriz de Riscos",isCollapsed:v.risks,onToggle:()=>U("risks"),children:s.jsx(Tb,{data:a,onChange:q,customFieldsValues:o.risks||{},onCustomFieldsChange:X=>{l(re=>({...re,risks:X}))}})}),s.jsx(qs,{title:"Plano de Mitigao",isCollapsed:v.mitigations,onToggle:()=>U("mitigations"),children:s.jsx(Ib,{data:a,onChange:q,customFieldsValues:o.mitigations||{},onCustomFieldsChange:X=>{l(re=>({...re,mitigations:X}))}})}),s.jsx(qs,{title:"Concluses e Recomendaes",isCollapsed:v.conclusions,onToggle:()=>U("conclusions"),children:s.jsx(Pb,{data:a,onChange:q,customFieldsValues:o.conclusions||{},onCustomFieldsChange:X=>{l(re=>({...re,conclusions:X}))}})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[(e("ANALYSIS","CREATE")||e("ANALYSIS","EDIT"))&&s.jsxs("button",{onClick:V,disabled:f||!A(),className:"inline-flex items-center px-6 py-3 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(_d,{className:"w-4 h-4 mr-2"}),f?"Salvando...":"Salvar Anlise"]}),Y&&s.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-3 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:[s.jsx(yu,{className:"w-4 h-4 mr-2"}),"Gerenciar Anlises"]})]}),x&&s.jsxs("div",{className:"text-sm text-gray-500",children:["ltima alterao salva: ",x.toLocaleTimeString("pt-BR")]})]}),!A()&&(e("ANALYSIS","CREATE")||e("ANALYSIS","EDIT"))&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Ateno:"})," Preencha os campos obrigatrios (Nmero da PA, Projeto, Autor e Descrio) para salvar a anlise."]})})]})]}):s.jsx(Rb,{data:a})]}),S&&Y&&s.jsx(Db,{onLoadAnalysis:D,onNewAnalysis:J,onClose:()=>p(!1)}),se&&s.jsx(Vv,{onExtendSession:C,onLogout:B}),t&&y==="form"&&s.jsx(Bb,{analysisContext:{title:a.title,description:a.description,project:a.project}}),P&&s.jsx(zb,{onComplete:()=>{H(!1),localStorage.setItem("nup-aim-onboarding-complete","true"),n.success("Bem-vindo ao NuP-AIM! Voc est pronto para comear.")},onSkip:()=>{H(!1),localStorage.setItem("nup-aim-onboarding-complete","true")}})]})};function Vk(){return s.jsx(hv,{children:s.jsx(Bv,{children:s.jsx(mv,{children:s.jsx($k,{})})})})}class Wk extends Zt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("React Error Boundary caught an error:",e,r)}render(){var e;return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-red-600 text-2xl",children:""})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erro na Aplicao"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Ocorreu um erro inesperado. Tente recarregar a pgina."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Recarregar Pgina"}),s.jsxs("details",{className:"mt-4 text-left",children:[s.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer",children:"Detalhes do erro"}),s.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-gray-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}}const Ax=document.getElementById("root");if(!Ax)throw new Error("Root element not found");const Hk=K0(Ax);document.body.classList.add("app-loaded");Hk.render(s.jsx(Q.StrictMode,{children:s.jsx(Wk,{children:s.jsx(Vk,{})})}));
